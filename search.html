<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Elytron: </title>
    <script src="/wildfly-elytron/assets/javascript/highlight.pack.js" type="text/javascript"></script>

    <link rel="shortcut icon" type="image/png" href="/wildfly-elytron/favicon.ico">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- We override the colours from this theme manually -->
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="/wildfly-elytron/assets/css/styles.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <script src="/wildfly-elytron/assets/javascript/hl.js" type="text/javascript"></script>
    <link rel="alternate" type="application/rss+xml"  href="/wildfly-elytron/feed.xml" title="WildFly Elytron">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135301155-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-135301155-1');
    </script>
</head>
<body>


<!-- Always shows a header, even in smaller screens. -->
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header mdl-layout__header--scroll">
        <div class="mdl-layout__header-row ">
            <!-- Title -->
            <span class="mdl-layout-title"><h3>Wild<strong>Fly</strong>  Elytron</h3></span>
            <!-- Add spacer, to align navigation to the right -->
            <div class="mdl-layout-spacer"></div>
            <nav class="mdl-navigation mdl-layout--large-screen-only">
                
                    
                    
                         <a class="mdl-navigation__link Home-menuitem" href="/wildfly-elytron/">Home</a>
                    
                
                    
                    
                         <a class="mdl-navigation__link Docs-menuitem" href="/wildfly-elytron/docs/">Docs</a>
                    
                
                    
                    
                         <a class="mdl-navigation__link Community-menuitem" href="/wildfly-elytron/community/">Community</a>
                    
                
                    
                    
                         <a class="mdl-navigation__link Blog-menuitem" href="/wildfly-elytron/blog/">Blog</a>
                    
                
                    
                    
                         <a class="mdl-navigation__link GitHub-menuitem" href="https://github.com/wildfly-security/wildfly-elytron">GitHub</a>
                    
                
            </nav>
        </div>
    </header>
    <div class="mdl-layout__drawer">
        <div class="side-drawer-logo-container"><h3>Wild<strong>Fly</strong>  Elytron</h3></div>
        <nav class="mdl-navigation">
            
            
            
                <a class="mdl-navigation__link Home-menuitem" href="/wildfly-elytron/">Home</a>
            
            
            
            
                <a class="mdl-navigation__link Docs-menuitem" href="/wildfly-elytron/docs/">Docs</a>
            
            
            
            
                <a class="mdl-navigation__link Community-menuitem" href="/wildfly-elytron/community/">Community</a>
            
            
            
            
                <a class="mdl-navigation__link Blog-menuitem" href="/wildfly-elytron/blog/">Blog</a>
            
            
            
            
                <a class="mdl-navigation__link GitHub-menuitem" href="https://github.com/wildfly-security/wildfly-elytron">GitHub</a>
            
            
            <!-- mdl-navigation__link--current -->
        </nav>
    </div>
    <main class="mdl-layout__content">
        <div class="page-content">
            
            <div class="content">
                <form action="/wildfly-elytron/search.html" method="get">
  <label for="search-box">Search</label>
  <input type="text" id="search-box" name="query">
  <input type="submit" value="search">
</form>

<ul id="search-results"></ul>

<script>
  window.store = {
    
      "blog-failover-realm": {
        "title": "Using failover realm in Elytron",
        "author": "dvilkola",
        "category": "",
        "content": "With a failover realm you can configure an alternative realm that will be used if primary realm is not available. A common use case is to fail over to a local file based realm if an LDAP or database server has gone down allowing administrators to retain access to the server.Add a failover realmYou can add a failover-realm to the Elytron subsystem by specifying the following attributes:delegate-realm primary security realmfailover-realm alternative realm that will be used when primary realm is not available[1]emit-events configures whether this failover realm should emit SecurityRealmUnavailableEvent security event to the corresponding SecurityDomain when it fails over[2]./subsystem=elytron/failover-realm=failoverRealmExample:add( delegate-realm=LdapRealm,failover-realm=LocalRealm,emit-events=false)If the delegate throws a RealmUnavailableException during RealmIdentity lookup, it will be caught and failover realm will be used instead.[1] Realm is unavailable when it throws a RealmUnavailableException during lookup. This exception occurs when the connection to the realm was unsuccessful.[2] Security events are captured by security event listeners and can be used for audit loggingExampleBelow is an example of adding a failover-realm with primary LDAP realm and fail over filesystem realm.To make this example simple, we are going to use containerised version of OpenLdap. You can use docker and run the following:$ docker run --env LDAP_ORGANISATION=\"wildfly\" --env LDAP_DOMAIN=\"wildfly.org\" --env LDAP_ADMIN_PASSWORD=\"admin\" --detach osixia/openldapYou can check its IP address with the following command:$ docker inspect --format '{{ .NetworkSettings.IPAddress }}' $(docker ps -q)172.17.0.2Use any LDAP browser to check that the connection is working and to import a sample ldif file containing a single user named \"user\" which is granted the Role “Admin”.dn: ou=Users,dc=wildfly,dc=orgobjectClass: organizationalUnitobjectClass: topou: Usersdn: uid=user,ou=Users,dc=wildfly,dc=orgobjectClass: topobjectClass: personobjectClass: inetOrgPersoncn: Janesn: useruid: useruserPassword: secret123dn: ou=Roles,dc=wildfly,dc=orgobjectclass: topobjectclass: organizationalUnitou: Rolesdn: cn=Admin,ou=Roles,dc=wildfly,dc=orgobjectClass: topobjectClass: groupOfNamescn: Adminmember: uid=user,ou=Users,dc=wildfly,dc=orgNext, configure the LDAP realm in the elytron subsystem with appropriate identity and attribute mappings./subsystem=elytron/dir-context=exampleDC:add(url=\"ldap://172.17.0.2:389\",principal=\"cn=admin,dc=wildfly,dc=org\",credential-reference={clear-text=\"admin\"})/subsystem=elytron/ldap-realm=exampleLdapRealm:add(dir-context=exampleDC,identity-mapping={search-base-dn=\"ou=Users,dc=wildfly,dc=org\",rdn-identifier=\"uid\",user-password-mapper={from=\"userPassword\"},attribute-mapping=[{filter-base-dn=\"ou=Roles,dc=wildfly,dc=org\",filter=\"(&amp;(objectClass=groupOfNames)(member={1}))\",from=\"cn\",to=\"Roles\"}]})Add filesystem realm with identity user and role Admin as well./subsystem=elytron/filesystem-realm=exampleFSRealm:add(path=demofs-realm-users,relative-to=jboss.server.config.dir)/subsystem=elytron/filesystem-realm=exampleFSRealm:add-identity(identity=user)/subsystem=elytron/filesystem-realm=exampleFSRealm:set-password(identity=user,clear={password=\"secret123\"})/subsystem=elytron/filesystem-realm=exampleFSRealm:add-identity-attribute(identity=user,name=Roles, value=[\"Admin\"])Configure failover-realm to use the file system realm as a failover when LDAP realm is not available./subsystem=elytron/failover-realm=failoverRealm:add(delegate-realm=exampleLdapRealm,failover-realm=exampleFSRealm)Add a security domain that uses this failover realm and role decoder that decodes roles from the Roles attribute./subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)/subsystem=elytron/security-domain=failoverSD:add(default-realm=failoverRealm,permission-mapper=default-permission-mapper,realms=[{realm=failoverRealm,role-decoder=\"from-roles-attribute\"}])Add HTTP authentication factory with this new security domain and BASIC authentication mechanism. Finally, configure undertow to use this HTTP authentication factory./subsystem=elytron/http-authentication-factory=example-failover-http-auth:add(http-server-mechanism-factory=\"global\",mechanism-configurations=[{mechanism-name=\"BASIC\",mechanism-realm-configurations=[{realm-name=\"RealmUsersRoles\"}]}],security-domain=failoverSD)/subsystem=undertow/application-security-domain=httpSD:add(http-authentication-factory=example-failover-http-auth)Clone the example from this link https://github.com/wildfly-security-incubator/elytron-examples/tree/master/failover-realm and deploy it to the running WildFly instance.mvn clean install wildfly:deployAfter the application was successfully deployed you can  access the http://localhost:8080/failover-realm-demo/secure in your browser. You will be prompted to authenticate. Provide username user and password secret123.The security domain is configured to use the failover realm. Since the LDAP realm is configured to be the delegate realm, the authentication request was handled by the LDAP realm.Use docker to pause the OpenLDAP container:$ docker pause ${CONTAINER}The docker pause command suspends all processes in the specified container. This will make the LDAP realm unable to establish the connection to the OpenLDAP running in the container.When you access the http://localhost:8080/failover-realm-demo/secure and try to authenticate again, the LDAP realm will try to establish the connection. You might notice a slight delay in your authentication. After a certain timeout is exceeded, the failover filesystem realm will be used for authentication instead. Since the user is present in the filesystem realm as well, you will be able to connect successfully.To use ldap-realm instead of the filesystem-realm again, you can unpause the container.$ docker unpause ${CONTAINER}SummaryThis blog post has given an overview of failover-realm usage in the Elytron subsystem.You can take a look at a following example https://github.com/wildfly-security-incubator/elytron-examples/tree/master/failover-realm for more information.",
        "url": "
          
            /blog/failover-realm/
          "
      }
      ,
    
      "blog-distributed-realm": {
        "title": "Using distributed realm in Elytron",
        "author": "dvilkola",
        "category": "",
        "content": "With a distributed realm you can combine identities located across multiple security realms of any type into a single security realm.Identities can be used for both authentication and authorization purposes.Add a distributed realmYou can add a distributed-realm to the Elytron subsystem by specifying the list of realms to combine. The order of realms is important, as they will be queried sequentially in the order they were provided.realms list of realms in the order they should be queried/subsystem=elytron/distributed-realm=distributedRealmExample:add(realms=securityRealm1,securityRealm2,...,securityRealmN])The exception will be thrown if any of the queried realms is unavailable. For example, if authentication information for user user2 is stored in securityRealm2 and the realm securityRealm1 is unavailable, then an authenticaion request for user2 will result in an exception. This is because the securityRealm1 was configured to be first in the list and therefore was queried first.ExampleBelow is example of adding 2 separate filesystem security realms with different users and combining them in distributed realm.# Add first filesystem realm with user1/subsystem=elytron/filesystem-realm=FsRealm1:add(path=demofs-realm-users1,relative-to=jboss.server.config.dir)/subsystem=elytron/filesystem-realm=FsRealm1:add-identity(identity=user1)/subsystem=elytron/filesystem-realm=FsRealm1:set-password(identity=user1,clear={password=\"passwordUser1\"})/subsystem=elytron/filesystem-realm=FsRealm1:add-identity-attribute(identity=user1,name=Roles, value=[\"Admin\"])# Add second filesystem realm with user2/subsystem=elytron/filesystem-realm=FsRealm2:add(path=demofs-realm-users2,relative-to=jboss.server.config.dir)/subsystem=elytron/filesystem-realm=FsRealm2:add-identity(identity=user2)/subsystem=elytron/filesystem-realm=FsRealm2:set-password(identity=user2,clear={password=\"passwordUser2\"})/subsystem=elytron/filesystem-realm=FsRealm2:add-identity-attribute(identity=user2,name=Roles, value=[\"Admin\"])# Add distributed realm that combines both filesystem realms/subsystem=elytron/distributed-realm=distributedRealm:add(realms=[FsRealm1, FsRealm2])Now you can add security domain that uses this distributed realm:# Add security domain distributedSD that uses distributedRealm and from-roles-attribute role decoder/subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)/subsystem=elytron/security-domain=distributedSD:add(default-realm=distributedRealm,permission-mapper=default-permission-mapper,realms=[{realm=distributedRealm,role-decoder=\"from-roles-attribute\"}])Accessing both user1 and user2 is possible:/subsystem=elytron/security-domain=distributedSD:read-identity(name=user1){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {        \"name\" =&gt; \"user1\",        \"attributes\" =&gt; {\"Roles\" =&gt; [\"Admin\"]},        \"roles\" =&gt; [\"Admin\"]    }}/subsystem=elytron/security-domain=distributedSD:read-identity(name=user2){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {        \"name\" =&gt; \"user2\",        \"attributes\" =&gt; {\"Roles\" =&gt; [\"Admin\"]},        \"roles\" =&gt; [\"Admin\"]    }}You can configure undertow to use this security domain in order to secure your deployed applications.# Configure HTTP authentication factory to use distributedSD and BASIC auth mechanism and configure undertow to use this http authentication factory/subsystem=elytron/http-authentication-factory=example-distributed-http-auth:add(http-server-mechanism-factory=\"global\",mechanism-configurations=[{mechanism-name=\"BASIC\",mechanism-realm-configurations=[{realm-name=\"FSRealmUsers\"}]}],security-domain=distributedSD)/subsystem=undertow/application-security-domain=httpSD:add(http-authentication-factory=example-distributed-http-auth)When you deploy an application that uses this security domain, users from both realms can successfully authorize to access it. To see an example with simple secured servlet that uses above distributed realm you can take a look here: https://github.com/wildfly-security-incubator/elytron-examples/tree/master/distributed-realm.Note that you can configure distributed realm to be used with the management interface as well and the security realms can be of different types (ldap-realm, jdbc-realm, etc.). You can also configure more than 2 security realms.SummaryThis blog post has given an overview of distributed-realm in Elytron subsystem.You can take a look at a following example https://github.com/wildfly-security-incubator/elytron-examples/tree/master/distributed-realm for more information.",
        "url": "
          
            /blog/distributed-realm/
          "
      }
      ,
    
      "blog-open-source-day-recap": {
        "title": "Open Source Day 2021 Recap",
        "author": "fjuma",
        "category": "",
        "content": "A couple weeks ago, the WildFly Elytron team had a great timeparticipating in Open Source Day,an all-day hackathon that took place during the virtual Grace Hopper Celebration (vGHC). This wasthe WildFly Elytron team&#8217;s second time participating in this event, after having been a part of the recent Summer OpenSource Day as well. Once again, we were thrilled to see participants, project representatives, and mentorscome together from all over the globe for this virtual event. The goal of Open Source Day is to guide participants throughmaking contributions to open source projects.How the day wentFrom the very beginning of the day, we could tell that this would be an even larger event than the Summer Open Source Day.We kicked things off with some introductory comments from Caitlyn Georger, the event program manager, and Rocio Montes, the chairof the event. It was then time tointroduce our WildFly Elytron team members and mentors. Open Source Day mentors are volunteers who assist participantswith their contributions for a particular project throughout the day. We were lucky to have 4 mentors join our WildFlyElytron team members to help our participants. We were also delighted that one of these mentors was actually one of ourparticipants during the Summer Open Source Day!After the initial introductions, it was time to jump into an overview of our project. We then covered somegeneral information on how to submit pull requests against the wildfly-elytron repository.After that, it was time to start the hackathon!Prior to the event, we had created a bunch of issues and triaged existing ones that would be suitable for anyone gettingstarted on the WildFly Elytron project. We made sure that the descriptions of these issues had useful pointers fortackling the tasks. We also added the \"good-first-issue\"label to these issues to make them easy to spot. We shared this list of issues with participants and helped them pick whichones to work on.Throughout the day, the WildFly Elytron team members and mentors helped participants set up their development environment,answered questions about Git and the process of submitting and updating pull requests, helped participants work on theirissues, and provided feedback on their pull requests. There was also some time for general questions about working onopen source projects. We ended the day with several pull requests submitted from first time contributors (we actuallydoubled our numbers from the Summer Open Source Day)!Some thoughts from our first time contributors and mentorsThe WildFly Elytron team thoroughly enjoyed being a part of this event! It was a great way to end the virtual Grace HopperCelebration. What did some of our first time contributors and mentors think of the day? Here&#8217;s what they had to say:I would like to say that as a student that just finished her 2nd year in software engineering in security I learneda lot about cyber security and what potential work I could be doing in the future. In the short time I was on callwith the team, everyone was so supportive and I felt welcome even though I didn’t have a lot of knowledge.I really appreciate that as someone who doesn’t have a lot of experience. Working with individuals in the industryis a great privilege because I get to learn skills I wouldn’t otherwise learn in the classroom! I hope to keepcontributing to the wildfly elytron repository as a novice in this field!-Suha Siddiqui, Open Source Day participantBefore participating in the Open Source Day, I had no idea how contributing to Open Source works. Everything seemedso complicated that I was seriously doubting I would be able to make a contribution. Luckily, mentors of theWildFly Elytron team answered all of my questions and helped me navigate my way through GitHub. In the end, Ilearned how the whole process of contributing to projects looks like and was able to push several commits of my ownto the project!-Yana Z., Open Source Day participantIt was my first time mentoring for an Open Source Day event, and I couldn&#8217;t have asked for a better team.Every team member of Wildfly Elytron was humble and provided their technical expertise on navigating through docs,setting up the project locally, and sharing tips on how to be a successful OSD mentor. I enjoyed my time working withWildFly Elytron folks and hope to contribute more in the future!-Purva Singh, Open Source Day mentorIt was an amazing experience for me to work with all the mentors. It was a first time experience for me as a mentorin Open Source Day. That helps me to upskill myself. Also I learned a lot about next generation security applicationsthrough the wildfly-elytron project with the support of you guys. I&#8217;m exploring more about this project and lookingforward to start contributing to this project.-Amulya Dixit , Open Source Day mentorI first worked with Farah, Ashpan, Sonia, and Diana during OSD summer. Their enthusiasm encouraged me to make myfirst open-source contributions over the summer. To contribute back to the community, I decided to come back tothe Wildly Elytron project as a mentor during vGHC 2021. It was gratifying introducing people to open sourcedevelopment while learning more about the project from the team. Along with more technical details, the team’sapproach towards introducing open-source development to new contributors is something I’ll take away from this event.-Stuti Misra, Open Source Day mentorWhat&#8217;s next?The WildFly Elytron project is participating in Hacktoberfest this monthand welcomes your contributions! Check out this blog postfor all the details on how to get started with our project.",
        "url": "
          
            /blog/open-source-day-recap/
          "
      }
      ,
    
      "blog-hacktoberfest-has-begun": {
        "title": "Hacktoberfest Has Begun",
        "author": "fjuma",
        "category": "",
        "content": "The WildFly Elytron project is participating in Hacktoberfest this month and welcomes your contributions!What is Hacktoberfest?Hacktoberfest takes places annually during the month of October.This event encourages open source contributions from the community. To participate in Hacktoberfest, yousimply need to:Register on the Hacktoberfest siteSubmit 4 approved PRs against participating project repositories during the month of OctoberChoose whether you&#8217;d like to receive a t-shirt or have a tree planted in your nameWhat repositories can you contribute to?Participating projects have added the \"hacktoberfest\" topic to their project repos. If you&#8217;d like tocontribute to WildFly Elytron and our related projects, check out these repos:WildFly ElytronWildFly Elytron WebWildFly OpenSSLHow to get started?Our contribution guide will helpguide you through the steps for getting started on the WildFly Elytron project and will go through howto format and submit your first PR.How to pick an issue?We have created a list of good first issues to help you get started.These also have the hacktoberfest label.How to reach us?If you&#8217;d like some help or have questions about making contributions to our project, feel free to reachus on chat or add questionsdirectly on your PR.Happy Hacktoberfest!We hope you enjoy making contributions to open source projects this month and in the future too!",
        "url": "
          
            /blog/hacktoberfest-has-begun/
          "
      }
      ,
    
      "blog-open-source-day-summer-recap": {
        "title": "Open Source Day Summer 2021 Recap",
        "author": "fjuma",
        "category": "",
        "content": "Last week, the WildFly Elytron team had the pleasure of participatingin Open Source Day,an all-day hackathon hosted by the AnitaB.org community. It was the very first time that this event,known as the largest female-led movement in open source, was held outside of the Grace Hopper conference.Participants and open source project representatives and mentors from around the world came together for this virtual event.The goal of the event was to guide participants through making contributions to open source projects. This was the firsttime that the WildFly Elytron project has participated in Open Source Day.About the dayThe day started with some inspiring introductory comments from Rocio Montes, one of the event co-chairs. We then introducedour WildFly Elytron team members, gave an introduction to our project, and went over some general information for submittingpull requests against the wildfly-elytron repository. It was then timeto start coding for the day!Prior to the event, we had created a bunch of issues and triaged existing ones that would be suitable for anyone gettingstarted on the WildFly Elytron project. We added the \"good-first-issue\"label to these issues to make them easy to spot. We shared this list of issues with participants and helped them pick whichones to work on.Over the course of the day, the WildFly Elytron team helped participants set up their development environment, answeredquestions about Git and the process of submitting and updating pull requests, and helped participants work on their issues.The WildFly Elytron team also fielded general questions on what it&#8217;s like working on open source projects. By the end ofthe day, we had merged several pull requests from first time contributors!Some thoughts from our first time contributorsWhat better way to learn more about how the day went than from our first time contributors themselves? Here&#8217;s what theyhad to say about Open Source Day.I had the chance to make my very first contributions to an open source project, and the WildFly Elytron team fromRed Hat was kind and supportive every step of the way. The group of engineers was so approachable and encouraging thatI felt like I belonged right from the very beginning of the day. It was really challenging setting up my dev environment(it was my first time working with Java!), but the team provided helpful links and suggestions. Likewise, after making myfirst PR I needed to make some changes to match their preferred formatting and they walked me through the whole processpatiently. I appreciate that I had the chance to do everything myself, with just the right amount of support to turn theday into an awesome learning opportunity. When the day was done I had made two PRs that were approved and merged, and Ifelt energized to know that working in the open source community can be fun and accessible. Massive thanks to everyonewho made the experience so awesome!-Rachel Misurac, Open Source Day participantWorking on the WildFly Elytron project on Open Source Day was a great learning experience! The project representativesand mentors made sure that all my doubts were clarified and were very warm and encouraging. Contributing to such a hugerepository can be intimidating, but the WildFly Elytron team ensured that no one gets left behind. I&#8217;m looking forward tocontinuing my exploration of this project.-Neha Binwal, Open Source Day participantWorking with the WildFly Elytron team was also the perfect introduction to open source repositories and open sourcedevelopment. Farah, Sonia, Diana, and Ashpan were all patient as we worked through the setup and sent our first pullrequest. Their support and the collaborative environment during the Open Source Day allowed me to merge my firstopen source pull request.-Stuti Misra, Open Source Day participantWhat&#8217;s next?The WildFly Elytron project will also be participating in the September Open Source Daythat will be held during the upcoming Grace Hopper conference. Whether you&#8217;re new to open source, new to security,or looking to level up your skills, the WildFly Elytron project has you covered! We&#8217;ve got a bunch of issues that areperfect for getting started on our project. We hope to see you there!",
        "url": "
          
            /blog/open-source-day-summer-recap/
          "
      }
      ,
    
      "blog-galleon-cli-keycloak": {
        "title": "Installing Keycloak OIDC adaptor using the Galleon CLI",
        "author": "darranl",
        "category": "",
        "content": "Traditionally to install WildFly you would download a complete archive of the application server distribution, unzip it locallyand run it directly from where it was unzipped.  Subsequently to install the Keycloak adaptor for WildFly a second archive wouldbe downloaded and unzipped on top of the WildFly installation and a CLI script executed to complete the installation.Although this approach has certainly stood the test of time it does have a couple of limitations.  Firstly these steps need to berepeated each time a new version of the application server or Keycloak adaptors are released.  Secondly the installed applicationserver contains all of the various supported subsystems even if only a small subset are required.  The Galleon projectprovides an alternative installation approach addressing both of these limitations.This blog post illustrates how a slimed WildFly installation can be performed with the addition of the Keycloak client adaptorsusing the Galleon command line tools.GalleonThis blog post is not intended to be a replacment for the already published Galleon documentation, more information can be found inthe Galleon Provisioning Guide.This blog post assumes you already have Java 8 or Java 11 installed locally, the first step is to download and unzip the latest releasefrom the Galleon project to make the CLI tools available.  The latest version can be downloaded from theGalleon Releases page.Installing the \"web-server\" layer.Using the Galleon CLI is a two step process to install a slimmed WildFly server followed by the Keycloak adaptors.The Galleon CLI can be used both in an interactive and non-interactive mode, both of which are covered in more detail in the Galleondocumentation, the examples in this blog post will just be using non-interactive mode.$GALLEON_HOME/bin/galleon.sh install wildfly:current --dir=wildfly --layers=web-serverFeature pack installed.d.======= ============ ==============Product Build        Update Channel======= ============ ==============wildfly 24.0.0.Final currentThis command will have provisioned a slimed WildFly server which can be used to deploy simple servlet based web applications, this installationdoes not have the management interfaces defined so the server can not be configured using the jboss-cli.  However the installation does havethe deployment scanner active so deployments can be added by placing them into the $WILDFLY_HOME/standalone/deployments directory.Installing the \"keycloak-client-oidc\" layer.The next step is to add the keycloak-client-oidc layer on top of the WildFly installation, for the Keycloak specific layers we need to usethe fully qualified Maven group, artifact and version to reference the Keycloak feature pack.$GALLEON_HOME/bin/galleon.sh install org.keycloak:keycloak-adapter-galleon-pack:14.0.0 --dir=wildfly --layers=keycloak-client-oidcFeature-packs resolved.Feature-packs resolved.Packages installed.JBoss modules installed.Configurations generated.Feature pack installed.In addition to adding the required modules to the WildFly installation this second command will have also added the WildFly Elytron subsystem tosecure deployments by default, the Keycloak adapter subsystem and configuration to make the Keycloak OpenID Connect authentication mechanism availablefor deployments.Starting WildFlyAt this stage the installation and configuration of WildFly is now complete and the application server can be started.cd $WILDFLY_HOMEbin/standalone.sh -Djboss.socket.binding.port-offset=10If you are familiar with the usual output when starting the application server you should now see the boot process leads to less output, this is becauseonly the subsystems required for securing a servlet based web application with Keycloak are now installed so the subsystems which are not required are noteven present.Deploying a web applicationFinally a web application can now be deployed to WildFly.There are two different approaches that can be taken to configure a web application to use the Keycloak OpenID Connect authentication mechanism as describedin JBoss SSO.Note: The preceding section in the Keycloak documentation is skipped as Galleon has replaced the installation steps described there.As the installed server does not have the management interfaces enabled the easiest approach to configuration is to embed the configuration within the deployment,for the Keycloak authentication mechanism this can be achieved by adding a keycloak.json descriptor to the WEB-INF directory of a web application:{    \"realm\" : \"WildFly\",    \"resource\" : \"simple-webapp\",    \"public-client\" : \"true\",    \"auth-server-url\" : \"http://localhost:8080/auth/\",    \"ssl-required\" : \"EXTERNAL\"}The authentication mechanism is activate by setting the auth-method in the web.xml to KEYCLOAK:    &lt;login-config&gt;        &lt;auth-method&gt;KEYCLOAK&lt;/auth-method&gt;        &lt;realm-name&gt;Simple Realm&lt;/realm-name&gt;    &lt;/login-config&gt;After a web application with these changes is built it can be copied to the standalone\\deployments directory of the WildFly installation where it willbe automatically deployed, the application will be secured by Keycloak using the embedded configuration.Additional configuration options are also described in the Keycloak documentation in theJava Adapter Config section, also instead of using the keycloak.jsondescriptor the configuration could have been contained in the urn:jboss:domain:keycloak:1.1 subsystem as described in Securing WARs via Adapter Subsystem but overall the purpose of this blog post was to illustrate how to get started installing the Keycloak client adapters and WildFly using Galleon.",
        "url": "
          
            /blog/galleon-cli-keycloak/
          "
      }
      ,
    
      "blog-hash-charsets-encodings": {
        "title": "Using hash character sets and encodings in Elytron",
        "author": "szaldana",
        "category": "",
        "content": "In the legacy security configuration using PicketBox, theUsernamePasswordLoginModulesupports storing hashed passwords by specifying the hashing algorithm, encoding and character set to comparethe client-supplied password to the password stored in the management system.Previously, Elytron supported specifying the hashing algorithm, but not the string encoding or character set to usein its security realms (with the exception of the JDBC realm where configuring the encoding was supported). In WildFly24, the Properties Realm, Filesystem Realm, JDBC Realm and LDAP realm all support specifying the encoding andcharset via the attributes hash-encoding and hash-charset.An overview of the new attributesAll realms that support storing hashed passwords (namely the Properties Realm, Filesystem Realm, JDBC Realm and LDAP realm)now support the following attributes:hash-encoding: This attribute specifies the string format for the hashed password if thepassword is not being stored in plain text. It may specify one of two: hex or base64. It is set to base64 by defaultwith the exception of the Properties Realm where it is set to hex by default.hash-charset: This attribute specifies the name of the character set to use when converting the client providedpassword string to a byte array for hashing calculations. It is set to UTF-8 by default.Some of these realms support using different hashing algorithms with the same realm, i.e. in the filesystem realm,you can configure identities within the same realm with different password types. However,with the exception of the JDBC realm, the attributes above are resource-wide. Ergo,you can only have one hash-encoding and one hash-charset throughout the wholerealm, even if you have different hashing algorithms.Reviewing the Elytron ConfigurationIn the following section, we will review the configuration available in the script for the quickstartconfigure-elytron.cli. We start our configuration by connecting to the server using the following command:$ WILDFLY_HOME/bin/jboss-cli.sh --connectNote: Use of WILDFLY_HOMEIn the following post, replace WILDFLY_HOME with the actual path to your WildFly installation.We first create a filesystem realm under the Elytron subsystem using hex encoding and the KOI8-Rcharacter set. We then add an identity quickstartUser, setting a digest password and adding theattributes Guest and Admin as follows:/subsystem=elytron/filesystem-realm=fsRealm:add(path=fs-users, relative-to=jboss.server.config.dir, hash-encoding=hex, hash-charset=KOI8-R)/subsystem=elytron/filesystem-realm=fsRealm:add-identity(identity=quickstartUser)/subsystem=elytron/filesystem-realm=fsRealm:set-password(digest={algorithm=digest-md5, realm=fsRealm, password=пароль}, identity=quickstartUser)/subsystem=elytron/filesystem-realm=fsRealm:add-identity-attribute(identity=quickstartUser, name=Roles, value=[\"Admin\", \"Guest\"])The password for this identity uses special characters belonging to the KOI8-R character set.For more information about creating FileSystem realms along with all of its possible configurations,please refer to the Elytron documentation.We then configure a simple role decoder and create a new security domain which will make use of ourfilesystem realm and role decoder as follows:/subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)/subsystem=elytron/security-domain=fsDomain:add(realms=[{realm=fsRealm, role-decoder=from-roles-attribute}], \\default-realm=fsRealm,permission-mapper=default-permission-mapper)Creating an additional security domain (fsDomainin this case) is not necessary.We could alternatively take the default ApplicationDomain and add theFileSystem realm and role-decoder to it.We then add our security domain mapping to the EJB3 subsystem, update the sasl-authentication-factory to useour security domain, add the PLAIN authentication mechanism and update the http-remoting-connector to use our sasl-authentication-factory:/subsystem=ejb3/application-security-domain=other:add(security-domain=fsDomain)/subsystem=elytron/sasl-authentication-factory=application-sasl-authentication:write-attribute(name=security-domain, value=fsDomain)/subsystem=elytron/sasl-authentication-factory=application-sasl-authentication:list-add(name=mechanism-configurations, value={mechanism-name=PLAIN})/subsystem=remoting/http-connector=http-remoting-connector:write-attribute(name=sasl-authentication-factory,value=application-sasl-authentication)We add the PLAIN authentication mechanism as it is important that the server receives thepassword in clear-text. We could alternatively use HTTP BASIC.Configuring the Client (wildfly-config.xml)The username and credentials to establish the connection to the application server are configured in thewildfly-config.xml file. &lt;authentication-configurations&gt;            &lt;configuration name=\"default-config\"&gt;                &lt;set-user-name name=\"quickstartUser\"/&gt;                &lt;credentials&gt;                    &lt;clear-password password=\"пароль\"/&gt;                &lt;/credentials&gt;                &lt;sasl-mechanism-selector selector=\"PLAIN\"/&gt;                ...            &lt;/configuration&gt;&lt;/authentication-configurations&gt;Again, it is important we select the PLAIN mechanism as our authentication mechanism, as the server needsto receive the password in clear text in order to correctly hash it with the character set we provided in our realmconfiguration.SummaryThis blog post has given an overview on how to specify the string encoding and hash character set in Elytron Security Realms.",
        "url": "
          
            /blog/hash-charsets-encodings/
          "
      }
      ,
    
      "blog-oneway-sslv2hello": {
        "title": "SSLv2Hello with WildFly",
        "author": "szaldana",
        "category": "",
        "content": "It is now possible to use SSLv2Hello with WildFly. This blog post will give anintroduction to this new feature, but it will assume previous knowledge on how toconfigure SSL in Elytron. For more information on how to configure SSL,refer to the elytron documentation.An Overview of SSLv2HelloOlder JDK versions use SSLv2Hello during the initial handshake messagewhere the SSL version that will be used for the rest of the handshake is negotiated.The use of this protocol is discouraged. As a result, newer JDK versions disable thisprotocol by default for clients, but do provide the ability to re-enable it if needed.By adding SSLv2Hello as a supported protocol in WildFly, we are ensuring olderclients are still able to communicate to servers guaranteeing parity with legacy security.Enabling SSLv2Hello on the Server SideSSLv2Hello can be enabled by configuring it in the protocols attribute in theSSL context definition in the Elytron subsystem. Let&#8217;s take a look at an example configuringone way SSL using SSLv2Hello in the server and client. The example application is available here.Back Up Your Standalone Server ConfigurationPrior to starting, back up your standalone server configuration by making a copy ofyour WILDFLY_HOME/standalone/configuration/standalone.xml file. You will need it in the endto restore your server&#8217;s configuration.Pre-requisite Server ConfigurationAs a first step, we&#8217;re going to enable one-way SSL for applications deployed to WildFlyusing the security enable-ssl-http-server CLI command.First, make sure you have an instance of your WildFly server running. Then,run the following commands:WILDFLY_HOME/bin/jboss-cli.sh --connectThen run the security enable-ssl-http-server command as follows:security enable-ssl-http-server --interactivePlease provide required pieces of information to enable SSL:Certificate info:Key-store file name (default default-server.keystore): server.keystorePassword (blank generated): secretWhat is your first and last name? [Unknown]: localhostWhat is the name of your organizational unit? [Unknown]: wildflyWhat is the name of your organization? [Unknown]: jbossWhat is the name of your City or Locality? [Unknown]: RaleighWhat is the name of your State or Province? [Unknown]: North CarolinaWhat is the two-letter country code for this unit? [Unknown]: USIs CN=localhost, OU=jboss, O=wildfly, L=Raleigh, ST=North Carolina, C=US correct y/n [y]?yValidity (in days, blank default): 365Alias (blank generated): localhostEnable SSL Mutual Authentication y/n (blank n):nSSL options:key store file: server.keystoredistinguished name: CN=localhost, OU=wildfly, O=jboss, L=Raleigh, ST=North Carolina, C=USpassword: secretvalidity: 365alias: localhostServer keystore file server.keystore, certificate file server.pem and server.csr file will be generated in server configuration directory.Do you confirm y/n :yServer reloaded.SSL enabled for default-serverssl-context is ssl-context-aaad4a67-14f1-4869-a01c-9fc56c3ff884key-manager is key-manager-aaad4a67-14f1-4869-a01c-9fc56c3ff884key-store   is key-store-aaad4a67-14f1-4869-a01c-9fc56c3ff884Make sure you enter your desired \"hostname\" for the first and last name field, otherwise you mightrun into issues while permanently accepting this certificateas an exception to some browsers. Chrome does not currently exhibit this behaviour.As we can see from the output, the above command automatically generated a self-signedcertificate, added it to a newly created keystore and added a new ssl-context resource,ssl-context-aaad4a67-14f1-4869-a01c-9fc56c3ff884 to the Elytron subsystem in order to enableone-way SSL for applications deployed to WildFly.Test the Server SSL ConfigurationTo test the connection to the SSL port of your server instance, open a browser and navigate tohttps://localhost:8443/.You get the privacy error because theserver certificate is self-signed. If you need to use a fully signed certificate, you mustget a PEM file from the Certificate Authority and then import the PEM into the keystore.Configuring SSLv2Hello in the ServerAt this point in time, your server has not yet been configured to accept SSLv2Hellomessages. Since, we used the security enable-ssl-http-server CLI command, this configures our SSL contextto accept TLSv1.2 only. To enable SSLv2Hello, we need to update our ssl-context configuration in theElytron subsystem to modify the attribute protocols to include SSLv2Hello as follows:/subsystem=elytron/server-ssl-context=ssl-context-aaad4a67-14f1-4869-a01c-9fc56c3ff884:write-attribute(name=protocols,value=[TLSv1,SSLv2Hello])reloadWhen configuring any SSL context to enable SSLv2Hello (client or server), you alwaysneed to specify an additional SSL/TLS protocol. SSLv2Hello cannot be specified by itself,as it is a pseudo protocol which is only used to negotiate another SSL/TLS version to be usedthroughout the rest of the communication.A Note On Enabling SSLv2Hello In Newer JDK VersionsNewer JDK versions have disabled TLSv1. Since we need the TLSv1 protocol to make use ofSSLv2Hello, we will walk you through how to re-enable it on the server side.Access the following file: WILDFLY_HOME/bin/standalone.conf.Look for the following line# JAVA_OPTS=\"$JAVA_OPTS -Djava.security.properties==/path/to/custom/java.security\"Make sure to uncomment it and edit the path to the file enabled_tlsv1.properties in this example application.Additionally, make sure you use one = as opposed to two. That way you will not completelyoverride the java.security file.Note, you might have to reload your server for these changes to take effect.Configure the Client&#8217;s Trust StoreExport the server&#8217;s certificate to a file by navigating to WILDFLY_HOME/standalone/configuration andrunning the following command:keytool -export -alias localhost -keystore server.keystore -file myCert.cer -storepass secretImport the certificate into the client&#8217;s trust store. Note the following command will create a trust storeif it does not exist at the location specified.keytool -import -file myCert.cer -alias localhost -keystore client.keystore -storepass secretYou should see the following output next:Owner: CN=localhost, OU=wildfly, O=jboss, L=Raleigh, ST=North Carolina, C=USIssuer: CN=localhost, OU=wildfly, O=jboss, L=Raleigh, ST=North Carolina, C=USSerial number: 7af5ad9991816bbcValid from: Wed Nov 04 16:15:09 EST 2020 until: Thu Nov 04 16:15:09 EDT 2021Certificate fingerprints:\t SHA1: 24:6E:96:9A:8B:D2:FF:2B:7B:58:87:84:03:F3:ED:C6:56:8B:96:5B\t SHA256: 27:51:F6:7A:F8:51:7D:6E:CB:DA:4A:9A:75:E5:9A:AD:06:88:1B:AE:40:73:7D:D8:E4:4F:22:CA:8E:03:94:37Signature algorithm name: SHA256withRSASubject Public Key Algorithm: 2048-bit RSA keyVersion: 3Extensions:#1: ObjectId: 2.5.29.14 Criticality=falseSubjectKeyIdentifier [KeyIdentifier [0000: FF BA 34 E8 94 94 BE EB   25 B5 C5 4E B3 B2 A4 34  ..4.....%..N...40010: 97 EE A2 24                                        ...$]]Trust this certificate? [no]: yCertificate was added to keystoreYou have now created the client&#8217;s trustore and imported the server&#8217;s certificate.Configure a Client that sends SSLv2Hello messagesThe example application presents a simple client Client.java which checks the connectionto the server is successful. To ensure the client uses SSLv2Hello in its initialhandshake, we have provided a common configuration framework inwildfly-config.xml.Review this file to see how SSLv2Hello is enabled in the client SSL context along withTLSv1.As a final step in configuring the client, update the path to the client&#8217;s trust store to/PATH/TO/client.keystore.Build and Deploy the ApplicationEnsure you have a running instance of your server. Then, navigate to the root directory of the example application and run the following commands:cd servermvn clean package wildfly:deployThis deploys the server-sslv2hello.war to the running instance of the server.You should see a message in the server log indicating that the archive deployed successfully.Run the ClientNavigate to the root directory of the example application and run the following commands:cd clientmvn clean install -Dtest=ClientThe test verifies a successful connection using SSLv2Hello.Verifying the Client Sends SSLv2Hello MessagesIn the following section, we will be inspecting the SSL debug logs to ensure the Client Hello messagesmake use of SSLv2Hello. You will need to enable SSL debug logs in your client and server usingthe javax.net.debug system property as follows:To run your client with SSL debug logs:mvn clean install -Dtest=Client -Djavax.net.debug=ssl,handshakeTo run your server with SSL debug logs:WILDFLY_HOME/bin/standalone.sh -Djavax.net.debug=ssl,handshakeVerifying SSLv2Hello Messages Succeed When SSLv2Hello is Configured on the ServerRun your client.In your client SSL logs, you should see a ClientHello message similar to the following:\"ClientHello\": {  \"client version\"      : \"TLSv1\",  \"random\"              : \"28 D9 B0 EB 0E A1 5B 07 B6 0D 21 B1 87 F8 42 14 EE 11 6A 11 8B B6 19 7D 2B CF DB B5 B1 A1 43 01\",  \"session id\"          : \"\",  \"cipher suites\"       : \"[TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033)]\",  \"compression methods\" : \"00\",  \"extensions\"          : [    \"status_request (5)\": {      \"certificate status type\": ocsp      \"OCSP status request\": {        \"responder_id\": &lt;empty&gt;        \"request extensions\": {          &lt;empty&gt;        }      }    },    \"supported_groups (10)\": {      \"versions\": [secp256r1, secp384r1, secp521r1, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]    },    \"ec_point_formats (11)\": {      \"formats\": [uncompressed]    },    \"status_request_v2 (17)\": {      \"cert status request\": {        \"certificate status type\": ocsp_multi        \"OCSP status request\": {          \"responder_id\": &lt;empty&gt;          \"request extensions\": {            &lt;empty&gt;          }        }      }    },    \"extended_master_secret (23)\": {      &lt;empty&gt;    },    \"supported_versions (43)\": {      \"versions\": [TLSv1, SSLv2Hello]    },    \"renegotiation_info (65,281)\": {      \"renegotiated connection\": [&lt;no renegotiated connection&gt;]    }  ]}Notice how TLSv1 and SSLv2Hello are specified under supported_versions. This triggersan SSLv2Hello ClientHello. Your tests should succeed, and you should be able to see thenegotiated protocol is TLSv1 in both your client and server logs.Verifying SSLv2Hello messages fail when SSLv2Hello is not configured on the serverYou can modify your server-ssl-context resource again to only accept TLSv1 as follows:/subsystem=elytron/server-ssl-context=ssl-context-aaad4a67-14f1-4869-a01c-9fc56c3ff884:write-attribute(name=protocols,value=[TLSv1])Now, run your client.You should be able to see a similar ClientHello as the one in the section above, but you should also see ahandshake_failure in the log.Upon reviewing your server log, it should provide more details as to what causes the failure. You should see amessage similar to the following:ERROR [stderr] (default I/O-2) javax.net.ssl|ERROR|01 14|default I/O-2|2020-11-0514:29:27.677 EST|TransportContext.java:318|Fatal (HANDSHAKE_FAILURE): SSLv2Hello is not enabled (14:29:27,678 ERROR [stderr] (default I/O-2) \"throwable\" : {14:29:27,678 ERROR [stderr] (default I/O-2)   javax.net.ssl.SSLHandshakeException: SSLv2Hello is not enabledNow, you have verified that enabling SSLv2Hello on the client side triggers an SSLv2Hello message,which if not supported by the server, causes a handshake exception.Undeploy the ApplicationWhen you are finished testing the application, follow these steps to undeploy the archive:Make sure you start the WildFly server.Open a terminal and navigate to the root directory of this example.Type the following commands to undeploy the archive:cd servermvn wildfly:undeployRestore the WildFly Standalone Server ConfigurationYou can restore your WildFly Standalone Server Configuration by replacing yourWILDFLY_HOME/standalone/configuration/standalone.xml file with your backed up copy.SummaryThis blog post has given an overview on how SSLv2Hello can be used with WildFly on boththe server and client side. For more details, take a look at theElytron documentation.",
        "url": "
          
            /blog/oneway-sslv2hello/
          "
      }
      ,
    
      "blog-ssl-certificate-revocation-list": {
        "title": "SSL Certificate Revocation Lists with WildFly",
        "author": "szaldana",
        "category": "",
        "content": "An Overview of Certificate Revocation ListsConfiguring CRLs on the Client SideBack Up Your Standalone Server ConfigurationPre-requisite Server ConfigurationPre-requisite Client ConfigurationConfigure the ServerCreate the Certificate Revocation ListsConfigure a Client that verifies certificates against CRLsBuild and Deploy the ApplicationRun the Client and Verify Certificate RejectionUndeploy the ApplicationRestore the WildFly Standalone Server ConfigurationConfiguring CRLs on the Server SideSummaryAn Overview of Certificate Revocation ListsCertificate Revocation Lists (CRLs) contain a list of certificates that have been revokedby the issuing Certificate Authority before their expected expiration date, and therefore should no longerbe trusted. Elytron previously supported configuring only one Certificate Revocation List.It is now possible to configure multiple CRL files, which is useful when several certificate authorities are used.This blog post assumes previous knowledge on how to configure SSL in Elytron. For more information on how to configure SSL,refer to the elytron documentation.Configuring CRLs on the Client SideSupport for multiple CRLs is now available in the client and server side using WildFly Elytron.Let&#8217;s take a look at an example configuring one way SSL using CRLs in the client. The example application isavailable  here.Back Up Your Standalone Server ConfigurationPrior to starting, back up your standalone server configuration by making a copy ofyour WILDFLY_HOME/standalone/configuration/standalone.xml file. You will need it in the endto restore your server&#8217;s configuration.Pre-requisite Server ConfigurationSince certificate revocation lists correspond to a specific certificate authority, we will create our ownself signed Root Certificate Authority which will then be used to sign our server&#8217;s certificate.The following steps demonstrate how to achieve this set up:Generate a Self Signed Root Certificate AuthorityNavigate to the directory where you would like to configure your Root Certificate Authority.We will refer to this directory as SSL_CONFIG throughout this blog post.Generate a 4096-bit long RSA key for our Root Certificate Authority and store it in the file ca.key:openssl genrsa -out ca.key 4096Generating RSA private key, 4096 bit long modulus (2 primes)..................................................................++++.........................................................................................................................................................................................................++++e is 65537 (0x010001)Create the self-signed Root CA certificate ca.crt as follows:openssl req -new -x509 -days 365 -key ca.key -out ca.crtYou are about to be asked to enter information that will be incorporatedinto your certificate request.What you are about to enter is what is called a Distinguished Name or a DN.There are quite a few fields but you can leave some blankFor some fields there will be a default value,If you enter '.', the field will be left blank.-----Country Name (2 letter code) [XX]:USState or Province Name (full name) []:North CarolinaLocality Name (eg, city) [Default City]:RaleighOrganization Name (eg, company) [Default Company Ltd]:WildFlyOrganizational Unit Name (eg, section) []:jbossCommon Name (eg, your name or your server's hostname) []:Root Certificate AuthorityEmail Address []:Note the information about the CA is not relevant to the configuration.Create the Server CertificateNavigate to the server configuration directory:cd WILDFLY_HOME/standalone/configuration/Generate the private key for the server:openssl genrsa -out server.key 4096Generating RSA private key, 4096 bit long modulus (2 primes)....................++++............................................................................++++e is 65537 (0x010001)Generate a certificate signing request for our Root Certificate Authority.openssl req -new -key server.key -out server.csrYou are about to be asked to enter information that will be incorporatedinto your certificate request.What you are about to enter is what is called a Distinguished Name or a DN.There are quite a few fields but you can leave some blankFor some fields there will be a default value,If you enter '.', the field will be left blank.-----Country Name (2 letter code) [XX]:USState or Province Name (full name) []:North CarolinaLocality Name (eg, city) [Default City]:RaleighOrganization Name (eg, company) [Default Company Ltd]:WildFlyOrganizational Unit Name (eg, section) []:jbossCommon Name (eg, your name or your server's hostname) []:localhostEmail Address []:Please enter the following 'extra' attributesto be sent with your certificate requestA challenge password []:An optional company name []:Make sure you enter \"localhost\" as the Common Name, otherwise you might run intoissues.Create the following files, which will be helpful whencreating the certificate revocation list:touch SSL_CONFIG/certindexecho 01 &gt; SSL_CONFIG/certserialecho 01 &gt; SSL_CONFIG/crlnumberAlso, create the configuration file SSL_CONFIG/ca.conf with the content below:[ ca ]default_ca = myca[ crl_ext ]# issuerAltName=issuer:copy  #this would copy the issuer name to altnameauthorityKeyIdentifier=keyid:always [ myca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/ca.crt database = $dir/certindex private_key = $dir/ca.key serial = $dir/certserial default_days = 730 default_md = sha1 policy = myca_policy x509_extensions = myca_extensions crlnumber = $dir/crlnumber default_crl_days = 730 [ myca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ myca_extensions ] basicConstraints = CA:false subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always keyUsage = digitalSignature,keyEncipherment extendedKeyUsage = serverAuth crlDistributionPoints = URI:http://example.com/root.crl subjectAltName  = @alt_names [alt_names] DNS.1 = example.com DNS.2 = *.example.comYou must change the crlDistributionPoints to point to your domain if you wishto use distribution points to access the certificate revocation lists. This example usesa file in your system to configure the CRL as opposed to the CRL distribution points.Sign the server&#8217;s certificate signing request with your Root Certificate Authority:openssl ca -batch -config SSL_CONFIG/ca.conf -notext -in server.csr -out server.crtUsing configuration from ca.confCheck that the request matches the signatureSignature okThe Subject's Distinguished Name is as followscountryName           :PRINTABLE:'US'stateOrProvinceName   :ASN.1 12:'North Carolina'localityName          :ASN.1 12:'Raleigh'organizationName      :ASN.1 12:'WildFly'organizationalUnitName:ASN.1 12:'jboss'commonName            :ASN.1 12:'localhost'Certificate is to be certified until Dec  9 19:15:58 2022 GMT (730 days)Write out database with 1 new entriesData Base UpdatedCreate the Server KeystoreThe server&#8217;s keystore should include our server&#8217;s certificate along with its entire certificate chaini.e. server.crt &#8594; ca.crt.Create the certificate chain as follows:cat server.crt SSL_CONFIG/ca.crt &gt; chained.crtFor Windows, use notepad to concatenate certificates.Pack all the certificates, and the server private key into a pkcs12 file as follows:openssl pkcs12 -export -inkey server.key -in chained.crt -out chained.pkcs12Enter Export Password:Verifying - Enter Export Password:Enter secret as the password.Import this pkcs12 file into a java keystore:keytool -importkeystore -srckeystore chained.pkcs12 -srcstoretype PKCS12 -destkeystore server.keystoreEnter destination keystore password:Re-enter new password:Enter source keystore password:Entry for alias 1 successfully imported.Import command completed:  1 entries successfully imported, 0 entries failed or cancelledAgain, you can use the password secret for server.keystore.Pre-requisite Client ConfigurationNow that we have configured a server certificate signed by our Root Certificate Authority. We needto configure our client&#8217;s trust store.Configure Client TrustStoreFor the client&#8217;s trust store, it suffices if it holds the certificate for the Root CertificateAuthority. The client will automatically trust any certificates which have been issued by the Root Certificate Authorityor whose certificate chain contains the Root Certificate Authority.Configure it as follows:keytool -import -file SSL_CONFIG/ca.crt -alias ca -keystore client.truststore -storepass secretOwner: CN=Root Certificate Authority, OU=jboss, O=WildFly, L=Raleigh, ST=North Carolina, C=USIssuer: CN=Root Certificate Authority, OU=jboss, O=WildFly, L=Raleigh, ST=North Carolina, C=USSerial number: 66724cf6a35ff0fd504e6b30bbbad73e8ae4e7b3Valid from: Wed Dec 09 14:10:06 EST 2020 until: Thu Dec 09 14:10:06 EST 2021Certificate fingerprints:\t SHA1: 4A:63:B8:AA:D2:9A:D4:E4:21:14:C6:AA:4A:74:00:AD:02:DE:91:EB\t SHA256: EC:06:81:49:F7:E6:D9:54:5E:77:79:EC:EE:D2:16:90:60:F6:B9:92:F3:4D:D9:2E:C2:F6:E8:28:4E:4D:52:98Signature algorithm name: SHA256withRSASubject Public Key Algorithm: 4096-bit RSA keyVersion: 3Extensions:#1: ObjectId: 2.5.29.35 Criticality=falseAuthorityKeyIdentifier [KeyIdentifier [0000: CD CA 95 5D C3 6E 03 C4   A3 59 A5 0C 4D 8C 20 9E  ...].n...Y..M. .0010: 52 0A C3 86                                        R...]]#2: ObjectId: 2.5.29.19 Criticality=trueBasicConstraints:[  CA:true  PathLen:2147483647]#3: ObjectId: 2.5.29.14 Criticality=falseSubjectKeyIdentifier [KeyIdentifier [0000: CD CA 95 5D C3 6E 03 C4   A3 59 A5 0C 4D 8C 20 9E  ...].n...Y..M. .0010: 52 0A C3 86                                        R...]]Trust this certificate? [no]:  yCertificate was added to keystoreConfigure the ServerYou configure the SSL context by running JBoss CLI commands. For your convenience, this quickstart batches the commands into a configure-ssl.cli script provided in the root directory of this example.Before you begin, make sure you do the following:Start the server with the standalone default profile as follows:WILDFLY_HOME/bin/standalone.shReview the configure-ssl.cli file in the root of this directory. Comments in the script describe the purpose of each block of commands.Open a new terminal, navigate to the root directory of this quickstart, and run the following command, replacing WILDFLY_HOME with the path to your server:$ WILDFLY_HOME/bin/jboss-cli.sh --connect --file=configure-ssl.cliFor Windows, use the WILDFLY_HOME\\bin\\jboss-cli.bat script.You should see the following result when you run the script:The batch executed successfullyprocess-state: reload-requiredCreate the Certificate Revocation ListsNavigate to your SSL_CONFIG directory.Generate an empty CRL file as follows:openssl ca -config ca.conf -gencrl -keyfile ca.key -cert ca.crt -out ca.crl.pemUsing configuration from ca.confRevoke the server&#8217;s certificate using this command:openssl ca -config ca.conf -revoke WILDFLY_HOME/standalone/configuration/server.crt -keyfile ca.key -cert ca.crtUsing configuration from ca.confRevoking Certificate 01.Data Base UpdatedRegenerate the CRL file:openssl ca -gencrl -keyfile ca.key -cert ca.crt -out ca.crl.pem -config ca.confUsing configuration from ca.confTest the CRL:cat ca.crt ca.crl.pem &gt; test.pemopenssl verify -extended_crl -verbose -CAfile test.pem -crl_check WILDFLY_HOME/standalone/configuration/server.crterror 23 at 0 depth lookup: certificate revokederror server.crt: verification failedError 23 indicates the certificate has been revoked, as expected.Configure a Client that verifies certificates against CRLsThe example application presents a simple client SslClient.java which checks the connectionto the server is successful. To ensure the client configurescertificate revocation lists, we have provided a common configuration framework inwildfly-config.xml.Review this file to see how the certificate revocation lists are configured in the client SSLcontext:&lt;certificate-revocation-lists&gt;    &lt;certificate-revocation-list path=\"PATH/TO/CRL\"/&gt;&lt;/certificate-revocation-lists&gt;In this example we have only configured one CRL under the certificate-revocation-liststag, as we are only concerned that our client accepts certificates signed by the CA we created. If we wantedour client to trust certificates from various CAs, and therefore be able to access the CRLs correspondingto each of those CAs, we could simply add additional certificate-revocation-list objects.As a final step in configuring the client, update the path to the client&#8217;s trust store with thepath to your trust store. Additionally, also update the certificate-revocation-list tag to thepath the CRL we configured earlier.Build and Deploy the ApplicationEnsure you have a running instance of your server. Then, navigate to the root directory of the example application and run the following commands:cd ssl-servermvn clean package wildfly:deployThis deploys the ssl-server.war to the running instance of the server.You should see a message in the server log indicating that the archive deployed successfully.Run the Client and Verify Certificate RejectionNavigate to the root directory of the example application and run the following commands:cd ssl-clientmvn clean install -Dtest=SslClientYou should see the following error in the log:  test(SslClient): RESTEASY004655: Unable to invoke request:javax.net.ssl.SSLHandshakeException: PKIX path validation failed: java.security.cert.CertPathValidatorException:Certificate has been revoked, reason: UNSPECIFIED, revocation date: Wed Dec 09 14:26:04 EST 2020,authority: CN=Root Certificate Authority, OU=jboss, O=WildFly, L=Raleigh, ST=North Carolina, C=US, extension OIDs: []Alternatively, you could comment out the entire certificate-revocation-lists tag in yourwildfy-config.xml file and verify that communication succeeds otherwise.Undeploy the ApplicationWhen you are finished testing the application, follow these steps to undeploy the archive:Make sure you start the WildFly server.Open a terminal and navigate to the root directory of this example.Type the following commands to undeploy the archive:cd ssl-servermvn wildfly:undeployRestore the WildFly Standalone Server ConfigurationYou can restore your WildFly Standalone Server Configuration by replacing yourWILDFLY_HOME/standalone/configuration/standalone.xml file with your backed up copy.Configuring CRLs on the Server SideThis example has demonstrated how to configure CRLs on the client side. However, it is alsopossible to configure multiple CRLs on the server side for two-way SSL communication.Please review the documentation here. to learn more.SummaryThis blog post has given an overview on how certificate revocation lists can be used with WildFly onthe client side. For more details, take a look at the Elytron documentation.",
        "url": "
          
            /blog/ssl-certificate-revocation-list/
          "
      }
      ,
    
      "blog-secure-wildfly-cli-with-keycloak": {
        "title": "Secure WildFly CLI with Keycloak",
        "author": "dvilkola",
        "category": "",
        "content": "This blog post gives an example of how to secure WildFly CLI using Keycloak and Elytron.Keycloak&#8217;s Wildfly Elytron AdapterDownload WildFly server, Keycloak server and the WildFly OpenID Connect client adapter for WildFly from keycloak.org. Make sure your versions are compatible. Then, extract the contents of the client adapter into the root directory of your WildFly server.Start WildFly on default port 8080:$WILDFLY_HOME/bin/standalone.shFor Keycloak, use the following command to start the server on port 8180:$KEYCLOAK_HOME/bin/standalone.sh -Djboss.socket.binding.port-offset=100Below script will make the necessary edits to the $WILDFLY_HOME/standalone/configuration/standalone.xml file in order to install the keycloak adapter.$WILDFLY_HOME/bin/jboss-cli.sh --file=$WILDFLY_HOME/bin/adapter-elytron-install-offline.cliYou should be able to access Keycloak Administration Console at http://localhost:8180/auth. If you are running the server for the first time, you should create an initial admin user to get started. Once you provide the username and password for the admin user you will be able to log in.Keycloak configurationCreate a realm with a name wildfly-realm. Then, create a client application with a name wildfly-cli and configure it as follows:Select confidential in the Access Type fieldPut value http://localhost:9990/ to Valid Redirect URI fieldNow you need to create a user in wildfly-realm. Make sure you configure password for this user as well.Create an ADMINISTRATOR role. You need to add this role to this user in order to grant him/her access to the Wildfly CLI.Finally, you should configure the Keycloak realm to put roles in a top level field in the JWT roken. This is because Keycloak uses the claim realm_access.roles to map roles by default. Since we want to configure role decoder to take roles from the claim Roles, we need to configure Keycloak to use this claim as well. It is of course possible to configure some other claim as well.To configure this in Keycloak, go to the client scopes and click on roles. You should be able to find realm roles in the Mappers tab. Change the Token Claim Name to be Roles.WildFly configurationConnect to the WildFly CLI and run the below commands. Make sure you change the &lt;wildfly-cli-client-secret&gt; to match the client secret of your wildfly-cli client. You can find it in the Keycloak Administration Console./subsystem=elytron/token-realm=my-jwt-realm:add(oauth2-introspection={client-id=wildfly-cli,client-secret=&lt;wildfly-cli-client-secret&gt;,introspection-url=\"http://localhost:8180/auth/realms/wildfly-realm/protocol/openid-connect/token/introspect\"})/subsystem=elytron/simple-role-decoder=roles-attribute:add(attribute=\"Roles\")/subsystem=elytron/security-domain=my-jwt-domain:add(realms=[{realm=my-jwt-realm,role-decoder=roles-attribute}],permission-mapper=default-permission-mapper,default-realm=my-jwt-realm)/subsystem=elytron/sasl-authentication-factory=my-sasl-auth:add(sasl-server-factory=configured,security-domain=my-jwt-domain,mechanism-configurations=[{mechanism-name=OAUTHBEARER,mechanism-realm-configurations=[{realm-name=my-jwt-realm}]}])/core-service=management/management-interface=http-interface:write-attribute(name=http-upgrade.sasl-authentication-factory, value=my-sasl-auth)reloadAbove commands configure the WildFly CLI to require token for authorization of users. All incoming tokens will be validated using Keycloak&#8217;s token introspection endpoint.You will be asked to provide a token when trying to access WildFly CLI with $WILDFLY_HOME/bin/jboss-cli.sh client.To obtain and provide a token, create a file $WILDFLY_HOME/wildfly-config.xml with the following content:&lt;configuration&gt;    &lt;authentication-client xmlns=\"urn:elytron:client:1.6\"&gt;        &lt;authentication-rules&gt;            &lt;rule use-configuration=\"myconfig\"&gt;            &lt;/rule&gt;        &lt;/authentication-rules&gt;        &lt;authentication-configurations&gt;            &lt;configuration name=\"myconfig\"&gt;                &lt;credentials&gt;                    &lt;oauth2-bearer-token                            token-endpoint-uri=\"http://localhost:8180/auth/realms/wildfly-realm/protocol/openid-connect/token\"&gt;                        &lt;resource-owner-credentials name=\"administrator-user\"&gt;                            &lt;credential-store-reference clear-text=\"password\"/&gt;                        &lt;/resource-owner-credentials&gt;                        &lt;client-credentials client-id=\"wildfly-cli\"                                            client-secret=\"&lt;wildfly-cli-client-secret&gt;\"&gt;                        &lt;/client-credentials&gt;                    &lt;/oauth2-bearer-token&gt;                &lt;/credentials&gt;            &lt;/configuration&gt;        &lt;/authentication-configurations&gt;    &lt;/authentication-client&gt;&lt;/configuration&gt;Make sure you configure your client secret accordingly and change the resource owner credentials to match the user you added to the wildfly-cli realm. This configuration ensures that the token will be obtained from Keycloak and subsequently sent to the WildFly CLI endpoint.Now you can connect to the WildFly CLI with the following command:$WILDFLY_HOME/bin/jboss-cli.sh -c -Dwildfly.config.url=$WILDFLY_HOME/wildfly-config.xml",
        "url": "
          
            /blog/secure-wildfly-cli-with-keycloak/
          "
      }
      ,
    
      "blog-ejb-over-http": {
        "title": "Invoking EJBs over HTTP",
        "author": "araskar",
        "category": "",
        "content": "Server ConfigurationPrerequisite ConfigurationConfigure the HTTP TransportClient ConfigurationPrerequisite ConfigurationPerforming InvocationsSummaryThe ejb-http quickstart will describe the steps to setting up EJBs using HTTP as the transport. It will also secure it with a FileSystem realm, and use a credential store to access the EJB. This will focus on the configuration of the server to allow it to communicate over HTTP.Server ConfigurationPrerequisite ConfigurationFirst we will connect to the server via:$ WILDFLY_HOME/bin/jboss-cli.sh --connectWILDFLY_HOME refers to the location where WildFly is installed. For example it could be something like ~/wildfly/build/target/wildfly-24.0.0.Beta1-SNAPSHOTThen we will create a file system realm called fsRealm, and add a directory in the jboss server config directory called fs-realm-users that will contain all the data of the identity of each user created:/subsystem=elytron/filesystem-realm=fsRealm:add(path=fs-realm-users, relative-to=jboss.server.config.dir)Then we will create a new user, assign them a password, and give them the role of guest:/subsystem=elytron/filesystem-realm=fsRealm:add-identity(identity=quickstartUser)/subsystem=elytron/filesystem-realm=fsRealm:set-password(clear={password=quickstartPwd1!},identity=quickstartUser)/subsystem=elytron/filesystem-realm=fsRealm:add-identity-attribute(identity=quickstartUser, name=Roles, value=[guest])We will also add a role decoder to be able to process the roles assigned:/subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)We create a security domain that references the filesystem realm and will use the role decoder we created above:/subsystem=elytron/security-domain=fsSD:add(realms=[{realm=fsRealm, role-decoder=from-roles-attribute}], default-realm=fsRealm,permission-mapper=default-permission-mapper)Next we add the application security domain mapping in the EJB3 subsystem so that the server uses the correct security domain:/subsystem=ejb3/application-security-domain=other:add(security-domain=fsSD)Configure the HTTP TransportFirst we must configure the http-authentication-factory for the server to authenticate over HTTP.Here we set the mechanism to BASIC (but could also be set to another HTTP mechansim, like FORM for example), point to the fsSD security-domain, and the fsRealm filesystem-realm, and we call the newly created http-authentication-factory, example-http-auth:/subsystem=elytron/http-authentication-factory=example-http-auth:add(http-server-mechanism-factory=global,security-domain=fsSD,mechanism-configurations=[{mechanism-name=BASIC,mechanism-realm-configurations=[{realm-name=fsRealm}]}])Then in order to operate over HTTP, we must disable the legacy security-realm. This is done by undefining it from the http-invoker:/subsystem=undertow/server=default-server/host=default-host/setting=http-invoker:undefine-attribute(name=security-realm)And finally we can enable the http-invoker with the http-authentication-factory defined earlier (example-http-auth) that allows HTTP invocation for the EJB:/subsystem=undertow/server=default-server/host=default-host/setting=http-invoker:write-attribute(name=http-authentication-factory, value=example-http-auth)Client ConfigurationPrerequisite ConfigurationTo create a credential store, we run the following command, which creates it in the path specified after the --location flag, and secures it with the password specified after the --password flag (in this case it is “StorePassword”):WILDFLY_HOME/bin/elytron-tool.sh credential-store --create --location \"/PATH/TO/mycredstore.cs\" --password StorePasswordWe now create an alias that will hold the password to use when accessing the EJB. In this case the alias username is “quickstartUser”, and the password is “quickstartPwd1!”:WILDFLY_HOME/bin/elytron-tool.sh credential-store --location \"/PATH/TO/mycredstore.cs\" --password StorePassword --add quickstartUser --secret quickstartPwd1!If we access the wildfly-config-xml, the following file should appear:&lt;configuration&gt;    &lt;authentication-client xmlns=\"urn:elytron:client:1.7\"&gt;        &lt;credential-stores&gt;            &lt;credential-store name=\"mycredstore\"&gt;                &lt;attributes&gt;                    &lt;attribute name=\"keyStoreType\" value=\"JCEKS\"/&gt;                    &lt;attribute name=\"location\" value=\"/PATH/TO/mycredstore.cs\"&gt;&lt;/attribute&gt;                &lt;/attributes&gt;                &lt;protection-parameter-credentials&gt;                    &lt;clear-password password=\"StorePassword\"/&gt;                &lt;/protection-parameter-credentials&gt;            &lt;/credential-store&gt;        &lt;/credential-stores&gt;        &lt;authentication-rules&gt;            &lt;rule use-configuration=\"default-config\"/&gt;        &lt;/authentication-rules&gt;        &lt;authentication-configurations&gt;            &lt;configuration name=\"default-config\"&gt;                &lt;set-user-name name=\"quickstartUser\"/&gt;                &lt;credentials&gt;                    &lt;credential-store-reference store=\"mycredstore\" alias=\"quickstartUser\"/&gt;                &lt;/credentials&gt;                &lt;providers&gt;                    &lt;use-service-loader /&gt;                &lt;/providers&gt;            &lt;/configuration&gt;        &lt;/authentication-configurations&gt;    &lt;/authentication-client&gt;&lt;/configuration&gt;Here we can see the definition of the credential store.Make sure to change the path from \"/PATH/TO/mycredstore.cs\", to the same path as when configuring the credential store. Also ensure that the path here is the absolute path, starting with a /Performing InvocationsWhen creating the InitialContext in your Client Application, the PROVIDER_URL field should be changed.When using EJB over the Remoting protocol, the PROVIDER_URL is set to:\"remote+http://localhost:8080\"Since we now want to use EJB over HTTP, the PROVIDER_URL should be changed to:\"http://localhost:8080/wildfly-services\"The path that specifies /wildfly-services is the default when setting up the http-invoker, and should be changed to the same as the one specified, if the defaut was not used.SummaryThis blog post has given an overview on how to invoke an EJB over HTTP, make use of a filesystem realm, and use a credential-store to obtain the password to invoke the EJB.",
        "url": "
          
            /blog/ejb-over-http/
          "
      }
      ,
    
      "blog-wildfly-encrypted-expressions": {
        "title": "WildFly Encrypted Expression Support",
        "author": "darranl",
        "category": "",
        "content": "With the release of WildFly 23 the WildFly Elytron project and it&#8217;s integration now adds support forencrypted expressions within the management model, this post will describe the steps to quickly getstarted using this new feature.IntroductionThe CredentialStore functionality provided by WildFly Elytron provides a mechanism for the securestorage of credentials that can be cross referenced by WildFly&#8217;s management model to avoid storingthe credentials directly in the configuration.Using the credential store however leaves us with two remaining problems:How to protect the secret of the credential store.How to protect other configuration values.Within WildFly in addition to specifying a clear text password to unlock the credential store anadministrator can configure the server to run an external command to obtain the password or theadministrator can MASK the password.  The issue with the masked password support however is thisuses password based encryption using a well know password publicly available in open sourceprojects.The encrypted expression support added to WildFly solves both of these problems.  Firstly by addingsupport for loading SecretKey instances from the credential store including a new clear store.Secondly by adding support for values contained in the model to be encrypted and dynamicallydecrypted using the stored keys.The first part of this blog post will illustrate the commands to get started with encryptedexpressions using an automatically generated SecretKey.  The second part of this post willillustrate how an encrypted expression can be used to protect a second credential store which inturn will have a SecretKey added and enabled for use with expression encryption.Initial Encrypted Expression SupportStarting with a clean and running WildFly 23 (or later) installation, the examples in this postwill make use of the jboss-cli to configure the server.Before we begin it is worth noting that by default the CLI will cache all executed commands in it&#8217;shistory, as these examples are going to be encrypting clear text passwords we should disablehistory for our session.[standalone@localhost:9990 /] history --disableFirst we will add a new credential store which will be automatically be populated with adynamically SecretKey and stored under the alias key.[standalone@localhost:9990 /] /subsystem=elytron/secret-key-credential-store=initial:add( \\    relative-to=jboss.server.config.dir, \\    path=initial.cs){\"outcome\" =&gt; \"success\"}This will create a new credential store initial.cs in the configuration directory of yourapplication server installation.  If a key is lost we do not have the ability to recover previouslyencrypted expressions so be sure to backup the credential store or export the key and store itsafely.[standalone@localhost:9990 /] /subsystem=elytron/secret-key-credential-store=initial:export-secret-key(\\    alias=key){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {\"key\" =&gt; \"RUxZAUuMVPg8wefEp0KTvGJfRrmwWwGIql2px7MKAbwV3gW3bg==\"}}This credential store is not protected by it&#8217;s own password so filesystem permissions shouldbe used to ensure it is only accessible by the application server process.Now that we have a generated secret key in a credential store we can activate the resource responsiblefor handling encrypted expressions.[standalone@localhost:9990 /] /subsystem=elytron/expression=encryption:add( \\    resolvers=[{name=initial-resolver, \\                credential-store=initial, \\                secret-key=key}]){\"outcome\" =&gt; \"success\"}Support for encrypted expressions is now active, we can now encrypt a clear text value and convertit to an expression.[standalone@localhost:9990 /] /subsystem=elytron/expression=encryption:create-expression( \\    resolver=initial-resolver, clear-text=MyPassword){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {\"expression\" =&gt; \\        \"${ENC::initial-resolver:RUxZAUMQEH6CP3xXyAqYzqsC3oNayyeGH32wsdAZ8VLkkxaEmWc=}\"}}The expression returned here can be used on any attribute in other subsystems which supportsexpressions.  The read-resource-description operation can be used on a resource to identifyif it&#8217;s attributes support expressions.[standalone@localhost:9990 /] /subsystem=elytron/dir-context=*:read-resource-description{    \"outcome\" =&gt; \"success\",    \"result\" =&gt; [{        \"address\" =&gt; [            (\"subsystem\" =&gt; \"elytron\"),            (\"dir-context\" =&gt; \"*\")        ],....                \"properties\" =&gt; {                    \"type\" =&gt; OBJECT,                    \"description\" =&gt; \"The additional connection properties for the DirContext.\",                   \"expressions-allowed\" =&gt; true,                },....Where an attribute specifies expressions-allowed is set to true these encrypted expressions can be used.Second Credential StoreNow we have a password converted to an encrypted expression we can define a new credential store using thispassword and we can also add a SecretKey to the second store.[standalone@localhost:9990 /] /subsystem=elytron/credential-store=main:add( \\    relative-to=jboss.server.config.dir, \\    path=main.cs, \\    credential-reference= \\        {clear-text=\"${ENC::initial-resolver:RUxZAUMQEH6CP3xXyAqYzqsC3oNayyeGH32wsdAZ8VLkkxaEmWc=}\"}, \\    create=true){\"outcome\" =&gt; \"success\"}[standalone@localhost:9990 /] /subsystem=elytron/credential-store=main:generate-secret-key( \\    alias=main-key){\"outcome\" =&gt; \"success\"}A second resolver can now be added to the expression=resolver resource, we can also make this newresolver a default.[standalone@localhost:9990 /] /subsystem=elytron/expression=encryption:list-add(\\    name=resolvers, \\    value={ \\        name=main-resolver, \\        credential-store=main, \\        secret-key=main-key})....[standalone@localhost:9990 /] /subsystem=elytron/expression=encryption:write-attribute( \\    name=default-resolver, \\    value=main-resolver)''''[standalone@localhost:9990 /] :reload....Finally we can use this new resolver to create an expression.[standalone@localhost:9990 /] /subsystem=elytron/expression=encryption:create-expression( \\    clear-text=MySecondPassword){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; { \\        \"expression\" =&gt; \"${ENC::RUxZAUMQLRoRLS2PYwFgxXlFTNvTaaI5GXO7qkY4W7UHCwGgUl9Vr4R1BKgm+SKfb4DCwuHf}\"}}As we defined a default-resolver this was omitted in the create-expression operation,additionally the name of the resolver is not included in the resulting expression.XML ConfigurationThe commands executed in this post have resulted in the following resources being defined in theelytron subsystem.&lt;credential-stores&gt;    &lt;credential-store name=\"main\" relative-to=\"jboss.server.config.dir\" path=\"main.cs\" create=\"true\"&gt;        &lt;credential-reference            clear-text=\"${ENC::initial-resolver:RUxZAUMQEH6CP3xXyAqYzqsC3oNayyeGH32wsdAZ8VLkkxaEmWc=}\"/&gt;    &lt;/credential-store&gt;    &lt;secret-key-credential-store name=\"initial\" relative-to=\"jboss.server.config.dir\" path=\"initial.cs\"/&gt;&lt;/credential-stores&gt;&lt;expression-resolver default-resolver=\"main-resolver\"&gt;    &lt;resolver name=\"initial-resolver\" credential-store=\"initial\" secret-key=\"key\"/&gt;    &lt;resolver name=\"main-resolver\" credential-store=\"main\" secret-key=\"main-key\"/&gt;&lt;/expression-resolver&gt;Further ReadingThis blog post has illustrated the use of this new feature using a specific scenario, furtherinformation is available in the WildFly documentation including information using the stand alonecommand line tooling.WildFly Elytron Credential StoreEncrypted Expressions",
        "url": "
          
            /blog/wildfly-encrypted-expressions/
          "
      }
      ,
    
      "blog-upcoming-hash-encodings": {
        "title": "Upcoming hash character sets and hash encodings support in Elytron",
        "author": "szaldana",
        "category": "",
        "content": "One of the features we have been working on for the Elytron subsytem is the ability to specify the hash character setand hash encoding in security realms that support storing hashed passwords. The purpose of this task is to ensure feature parity withlegacy security configurations. We have plans that this feature will be released in WildFly 24.An Overview of Hash Character Sets and Hash Encodings in Legacy SecurityIn the legacy security configuration using PicketBox, theUsernamePasswordLoginModulesupports storing hashed passwords by specifying the hashing algorithm, encoding and character set to comparethe client-supplied password to the password stored in the management system.Currently, Elytron supports specifying the hashing algorithm, but not the string encoding or character set to usein its security realms (with the exception of the JDBC realm where configuring the encoding is supported). From WildFly 24,the Properties Realm, Filesystem Realm, JDBC Realm and LDAP Realm will support specifying the hash encoding and charset.Hash Encoding and Hash Charset ConfigurationAll realms that support storing hashed passwords (namely the Properties Realm, Filesystem Realm, JDBC Realm and LDAP realm)will support the following new attributes:hash-encoding: This attribute will specify the string format for the hashed password if thepassword is not being stored in plain text. It will specify one of two: hex or base64.hash-charset: This attribute will specify the name of the character set to use when converting the client providedpassword string to a byte array for hashing calculations.SummaryThis blog post has given an overview of the upcoming hash encoding and hash charset support for security realms in the Elytron Subsystem.For more details and updates on the status of this feature,keep an eye on WFCORE-5027.",
        "url": "
          
            /blog/upcoming-hash-encodings/
          "
      }
      ,
    
      "blog-sslcontext-delegation-to-alternate-instances-based-on-peer": {
        "title": "Upcoming SSLContext that supports delegation to alternate instances based on peer information",
        "author": "dvilkola",
        "category": "",
        "content": "One of the features we have been working on for the Elytron subsytem is the ability to configure SSL context that will delegate to different instances of SSL context based on the host and port of the peer.BackgroundIn some cases it can be useful to have SSL context that can select appropriate certificate/keystore for the connection based on the hostname and/or port of the peer. It would be easier to configure one such SSL context and provide rules at one place based on which the appropriate SSL Context instance will be selected.In Elytron it is already possible to configure authentication-context resource where you can provide rules that associate SSL context with specific host and/or port. After this feature is complete, you should be able to configure dynamic SSL context that will use these rules and will select appropriate SSL context for the connection.SummaryThis blog post has given a short overview of the upcoming SSL context that selects appropriate instances based on peer information. It will be possible to configure it using WildFly CLI or directly in server configuration file.For more details and updates on the status of this feature, take a look at WFLY-13762. You can also take a look at the proposal. We welcome feedback.",
        "url": "
          
            /blog/sslcontext-delegation-to-alternate-instances-based-on-peer/
          "
      }
      ,
    
      "blog-normalization-of-ejb-principal-propagation": {
        "title": "Normalize principal propagation/injection across elytron and legacy",
        "author": "dvilkola",
        "category": "",
        "content": "In WildFly 23 there is a new configuration option in the EJB subsystem that allows to switch between legacy and elytron principal propagation. This blog post will provide an explanation about the difference between these propagation modes and where the configuration can be done.Definition of termsSecured EJB refers to EJB that has any security metadata configured at the EJB level. Unsecured EJB is EJB without such security metadata.Incoming run-as identity refers to the security identity that was active for the context before the run-as* annotation was applied. For further information please see RunAsPrincipal annotation documentation.BackgroundIssue WFLY-12537 was created to resolve incompatibility between Elytron and legacy principal propagation.If Elytron was used before this issue was resolved, then the security identity of an unsecured EJB was always anonymous if there was no incoming run-as identity. This is not true for legacy, where the identity is anonymous only if mentioned unsecured EJB was called from remote context. The identity for local EJB is the current security identity obtained from security domain.This behaviour was made consistent after issue WFLY-12537 got resolved. However in WildFly 23, we decided to provide possibility for both options in order to avoid regressions for users.ConfigurationNew attribute called legacy-compliant-principal-propagation  was added to the application-security-domain component in the ejb3 subsystem. You can configure it the following way:/subsystem=ejb3/application-security-domain=other:add(security-domain=ApplicationDomain,legacy-compliant-principal-propagation=false)See below the full description of the difference.legacy-compliant-principal-propagation set to true If incoming run-as identity exists then it is the identity of the EJB. Otherwise, if the EJB is secured, then the identity is the current security identity obtained from a security domain. If the EJB is unsecured then identity is anonymous regardless of whether the EJB was called from remote context or not.legacy-compliant-principal-propagation set to false If incoming run-as identity exists then it is the identity of the EJB. Otherwise,if the EJB is local then the security identity of this EJB is the current security identity obtained from security domain.if the EJB is unsecured and called from remote context then its identity is anonymous. If the EJB is secured and called from remote context then its identity is the current security identity obtained from security domain.The attribute&#8217;s default value is true.SummaryThis blog post has given an overview of how to switch between legacy compliant principal propagation and Elytron principal propagation in the EJB subsystem.",
        "url": "
          
            /blog/normalization-of-EJB-principal-propagation/
          "
      }
      ,
    
      "blog-new-ssl-features": {
        "title": "Upcoming SSL features: Multiple certificate revocation lists support and SSLv2Hello support",
        "author": "szaldana",
        "category": "",
        "content": "Two of the new features regarding SSL that we have been working on include adding support for configuring multiplecertificate revocation lists and SSLv2Hello support. These features did not make it into WildFly 23but we have plans for them to be included in WildFly 24.An Overview of Certificate Revocation ListsCertificate Revocation Lists (CRLs) contain a list of certificates that have been revokedby the issuing Certificate Authority before their expected expiration date, and therefore should no longerbe trusted. Elytron currently supports configuring only one Certificate Revocation List.From WildFly 24, it will be possible to configure multiple CRL files, which is useful when several certificateauthorities are used.Certificate Revocation List ConfigurationSupport for multiple CRLs will be available for both the server and client. Currently, in the Elytron Subsystem, we canconfigure a single CRL in the trust-manager element using the certificate-revocation-list attribute.From WildFly 24, we will be able to configure a list of certificate revocation lists using the new certificate-revocation-lists attribute.An Overview of the SSLv2Hello ProtocolOlder JDK versions use SSLv2Hello during the initial handshake messagewhere the SSL version that will be used for the rest of the handshake is negotiated.The use of this protocol is discouraged. As a result, newer JDK versions disable thisprotocol by default for clients, but do provide the ability to re-enable it if needed.By adding SSLv2Hello as a supported protocol in WildFly, we are ensuring olderclients are still able to communicate to servers guaranteeing parity with legacy security.SSLv2Hello ConfigurationSSLv2Hello will be enabled by configuring it in the protocols attribute in theSSL context definition in the Elytron subsystem: the server-ssl-context and client-ssl-context for theserver and client respectively. The attribute protocols contains the list of protocols supported by WildFly.From WildFly 24, this attribute will also allow SSLv2Hello to be specified.SummaryThis blog post has given an overview of the upcoming support for multiple certificate revocation lists andSSLv2Hello.For more details on these features, keep an eye on WFCORE-5170and WFCORE-5145 respectively.",
        "url": "
          
            /blog/new-ssl-features/
          "
      }
      ,
    
      "blog-new-security-features-in-wildfly-23": {
        "title": "New Security Features in WildFly 23",
        "author": "fjuma",
        "category": "",
        "content": "This blog post highlights the new security features that are in WildFly 23 and also gives an updateon the new security features that the Elytron team has been working on.New Features in WildFly 23Encrypted Expression SupportWildFly 23 now adds support for encrypted expressions within the management model. For details on how toquickly get started with this new feature, check out this blog post.Principal PropagationIn certain cases, the principal associated with an unsecured EJB can differ depending on whether Elytron or legacysecurity is in use. WildFly 23 makes it possible for users to decide which behaviour they would like to use.More information can be found in this blog post.Support for MicroProfile JWT 1.2The version of MicroProfile JWT supported by WildFly has been upgraded to version 1.2. Moreinformation about what&#8217;s new in MicroProfile JWT 1.2 can be found here.In Progress FeaturesThe Elytron team has also been working on many other new features during the WildFly 23 development phase. Althoughthese features weren&#8217;t quite ready to be included in WildFly 23, we hope to include them in a future WildFly release.Here&#8217;s a quick update on these features.SSL/TLS enhancementsELY-1996 SSLContext to support delegation to alternate instances based on peer informationThis feature looks at making use of the host and port information of the peer that we areconnecting to in order to dynamically select which SSL context to use. More information about how thisnew feature will be configured can be found in this blog post.WFCORE-5120 Automatic registration of a client side / JVM wide default SSLContextThis feature will make it possible to register a JVM wide default SSL context for libraries that make use of Elytronclient configuration. Additional information on the plans for this feature can be found here.WFCORE-5170 Support for multiple certificate revocation listsThis feature will make it possible to configure multiple certificate revocation lists (e.g., for the case where morethan one certificate authority is being used). An introduction to this feature can be found in this blog post.WFCORE-5145 Elytron server-ssl-context allowed protocolsThis enhancement allows an additional legacy protocol to be configured for SSL contexts to provide featureparity with legacy security. More information can be found in this blog post.Security Realm EnhancementsWFCORE-5027 Security Realms should support specifying the charset and encoding for credentialsThis feature will make it possible for security realms to store hashed passwords in hex format, in addition toBase64 format. It will also make it possible to configure the character set to use when processing a user&#8217;spassword. An introduction to this new feature can be found in this blog post.OpenID ConnectWFLY-14017 Native support for OpenID ConnectWildFly currently provides the ability to secure deployments using OpenID Connect (OIDC)by installing a Keycloak client adapter.By adding native support for OpenID Connect to Elytron, the Keycloak client adapter will no longer be neededto secure applications deployed to WildFly using OIDC. More details can be found here.Where to Find More InformationThis blog post has given an overview of the new security features that are included in WildFly 23 and hasalso given an update on the new security features that are currently in progress. Be sure to check out ourblog posts page, where we have all ourblog posts on Elytron features. If there is an Elytron topic you’d like to see a blog post on, feel free tolet us know on WildFly’s user forums.To learn more about Elytron, check out our site.",
        "url": "
          
            /blog/new-security-features-in-wildfly-23/
          "
      }
      ,
    
      "blog-automatic-registration-of-client-side-jvm-wide-default-sslcontext": {
        "title": "Upcoming automatic registration of client side default SSLContext",
        "author": "dvilkola",
        "category": "",
        "content": "One of the features we have been working on for the Elytron subsytem is the ability to automatically register client side JVM wide default SSL context. This SSL context will be available to any library that supports the use of the default context.DetailsWe plan to provide implementation of new java security provider that will provide protocol named \"Default\". When registering this provider, elytron client will load configuration and provide initialized ssl context for clients requesting SSL context by using SSLContext.getDefault() or by using method SSLContext.getInstance(\"Default\", newElytronClientProviderInstance).Our plans are that this provider will load the ssl context from either current authentication context obtained from classpath, or from authentication context obtained from file that is passed to the security provider either dynamically or as an argument in java.security file.SummaryThis blog post has given a short overview of the upcoming client side jvm wide default SSL context that will be configurable in Elytron client configuration.For more details and updates on the status of this feature, keep an eye on WFCORE-5120. You can also take a look at the proposal. We welcome feedback.",
        "url": "
          
            /blog/automatic-registration-of-client-side-jvm-wide-default-sslcontext/
          "
      }
      ,
    
      "blog-planned-security-features-for-wildfly-23": {
        "title": "Planned Security Features for WildFly",
        "author": "fjuma",
        "category": "",
        "content": "Since the feature development phase for WildFly 23 has now started, we wanted to highlight thesecurity features that we will be working on. As usual, please keep in mind that this blog postis a summary of our general plans and not a guarantee that each of these features will be mergedfor WildFly 23.Planned FeaturesExpression ResolutionWFC0RE-4360 Support expression resolution backed by a credential storeCurrently, credential store references can be used anywhere in the model where a credential needs to be specified.This feature will make it possible to encrypt other attribute values stored in the management model. More details can be found here.SSL/TLS EnhancementsELY-1996 SSLContext to support delegation to alternate instances based on peer informationThe host and port information of the peer that we are connecting to is available when an SSLEngine is being created.This feature looks at making use of this information to dynamically select which SSL context to use. More information can be found here.WFCORE-5120 Automatic registration of a client side / JVM wide default SSLContextThis feature will make it possible to register a JVM wide default SSL context for libraries that make use of Elytronclient configuration. Additional information can be found here.WFCORE-5170 Support for multiple certificate revocation listsCurrently, it is only possible to configure a trust manager to make use of one certificate revocation list. Thisfeature will make it possible to configure multiple certificate revocation lists (e.g., for the case where morethan one certificate authority is being used). More details on this can be found here.Principal PropagationWFLY-14074 Normalization of principal propagation/injection across Elytron and Legacy securityIn certain cases, the principal associated with an unsecured EJB can differ depending on whether Elytron or legacysecurity is in use. This feature will make it possible for users to decide which behaviour they would like to use.More information can be found here.Security Realm EnhancementsWFCORE-5027 Security Realms should support specifying the charset and encoding for credentialsThis feature will make it possible for security realms to store hashed passwords in hex format, in addition toBase64 format. It will also make it possible to configure the character set to use when processing a user&#8217;spassword. More details can be found here.OpenID ConnectWFLY-14017 Native support for OpenID ConnectWildFly currently provides the ability to secure deployments using OpenID Connect (OIDC)by installing a Keycloak client adapter.By adding native support for OpenID Connect to Elytron, the Keycloak client adapter will no longer be neededto secure applications deployed to WildFly using OIDC. More details can be found here.SummaryThis blog post has highlighted the security features that we will be working on. If any of these featuresare a priority for you, please let us know. Please also let us know if there are any security features thatare missing that you would like to see prioritized as we can take this kind of feedback into accountfor future releases.",
        "url": "
          
            /blog/planned-security-features-for-wildfly-23/
          "
      }
      ,
    
      "blog-auto-self-signed-certificate-generation": {
        "title": "Automatic Self-Signed Certificate Generation with Elytron",
        "author": "fjuma",
        "category": "",
        "content": "WildFly 22 adds the ability to automatically generate a self-signed certificate the first timeWildFly receives an HTTPS request when WildFly is being secured using Elytron. This is usefulfor development or testing environments. This blog post gives an introduction to this new feature.Default SSL contextMaking use of the default SSL contextLog messagesSwitching to a signed certificatePre-requisite configurationSwitching to a certificate from Let&#8217;s EncryptSummaryDefault SSL contextWildFly now contains configuration for one-way SSL out of the box. This means that by default,the Elytron subsystem now contains a key-store, key-manager, and server-ssl-context thatare ready for you to use in a development or testing environment, as shown below:&lt;subsystem xmlns=\"urn:wildfly:elytron:12.0\" final-providers=\"combined-providers\" disallowed-providers=\"OracleUcrypto\"&gt;...    &lt;tls&gt;        &lt;key-stores&gt;            &lt;key-store name=\"applicationKS\"&gt;                &lt;credential-reference clear-text=\"password\"/&gt;                &lt;implementation type=\"JKS\"/&gt;                &lt;file path=\"application.keystore\" relative-to=\"jboss.server.config.dir\"/&gt;            &lt;/key-store&gt;        &lt;/key-stores&gt;        &lt;key-managers&gt;            &lt;key-manager name=\"applicationKM\" key-store=\"applicationKS\" generate-self-signed-certificate-host=\"localhost\"&gt;                &lt;credential-reference clear-text=\"password\"/&gt;            &lt;/key-manager&gt;        &lt;/key-managers&gt;        &lt;server-ssl-contexts&gt;            &lt;server-ssl-context name=\"applicationSSC\" key-manager=\"applicationKM\"/&gt;        &lt;/server-ssl-contexts&gt;    &lt;/tls&gt;...&lt;/subsystem&gt;Notice that the default key-manager, applicationKM, contains a generate-self-signed-certificate-hostattribute with value localhost. This attribute indicates that when this key-manager is used to obtain theserver&#8217;s certificate, if the file that backs its key-store doesn&#8217;t already exist, then the key-manager shouldautomatically generate a self-signed certificate with localhost as the Common Name. This generated self-signedcertificate will then be stored in the file that backs the key-store.Making use of the default SSL contextTo make use of the new default SSL context, the Undertow subsystem https-listener configurationjust needs to be updated to reference the Elytron server-ssl-context:batch/subsystem=undertow/server=default-server/https-listener=https:undefine-attribute(name=security-realm)/subsystem=undertow/server=default-server/https-listener=https:write-attribute(name=ssl-context,value=applicationSSC)run-batchreloadWith this change, WildFly will automatically generate a self-signed certificate the first time it receivesan HTTPS request if the server&#8217;s key store file (application.keystore) does not already exist.To try this out, try accessing https://localhost:8443. Notice that WildFly generates and presents aself-signed certificate and your browser presents a warning message. Inspect the certificate and verifythat the fingerprints shown in your browser match the fingerprints shown in the server log file beforeconfirming that you want to accept the server&#8217;s certificate.Log messagesWhen using the default server-ssl-context, you&#8217;ll notice some warning messages in the server log file beforeand after the self-signed certificate is automatically generated:13:21:39,197 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-6) WFLYELY01083: KeyStore /wildfly/standalone/configuration/application.keystore not found, it will be auto generated on first use with a self-signed certificate for host localhost...13:39:57,152 WARN  [org.wildfly.extension.elytron] (default task-1) WFLYELY01084: Generated self-signed certificate at /wildfly/dist/target/wildfly-22.0.0.Final/standalone/configuration/application.keystore. Please note that self-signed certificates are not secure and should only be used for testing purposes. Do not use this self-signed certificate in production.SHA-1 fingerprint of the generated key is fc:16:cf:bf:de:3a:6d:d6:fe:ec:f9:cd:9d:22:c9:3d:43:d7:e3:57SHA-256 fingerprint of the generated key is 38:69:00:4e:39:e2:40:e2:ef:b6:95:58:c6:ba:d0:0f:56:c5:7c:5d:fc:d5:c3:b9:b0:94:80:9c:f5:45:9d:40As mentioned in the warning message, it is very important that the generated self-signed certificate is only useda development or testing environment. Self-signed certificates should never be used in a production environment.To disable the automatic self-signed certificate generation, simply undefine the generate-self-signed-certificate-hostattribute for the default key-manager.Switching to a signed certificateSince the default WildFly configuration contains one-way SSL configuration out of the box, it is nowvery simple to switch to using a signed certificate.Pre-requisite configurationWe&#8217;re going to switch to using a certificate from Let&#8217;s Encrypt so we first need to configurea Let&#8217;s Encrypt account:/subsystem=elytron/key-store=accountsKS:add(path=accounts.keystore.jks,relative-to=jboss.server.config.dir,credential-reference={clear-text=secret},type=JKS)/subsystem=elytron/certificate-authority-account=myLetsEncryptAccount:add(alias=letsEncrypt,key-store=accountsKS,contact-urls=[mailto:admin@admin.org])Switching to a certificate from Let&#8217;s EncryptFirst, undefine the generate-self-signed-certificate-host attribute:/subsystem=elytron/key-manager=applicationKM:undefine-attribute(name=generate-self-signed-certificate-host)Then, use the applicationKS key store to obtain a signed certificate from Let&#8217;s Encrypt (make sure you updatethe domain-names parameter to specify the domain name(s) you want to obtain a certificate for):/subsystem=elytron/key-store=applicationKS:obtain-certificate(alias=server,domain-names=[www.example.org],certificate-authority-account=myLetsEncryptAccount,agree-to-terms-of-service)Now, reload your key-manager so that WildFly makes use of your newly obtained signed certificate:/subsystem=elytron/key-manager=applicationKM:init()SummaryThis blog post has given an overview of automatic self-signed certificate generation for WildFly.This feature should only be used in development or testing environments. For more details on this,take a look at the documentation.For more information on how to switch to a certificate from Let&#8217;s Encrypt, take a look at thisblog post.Details on how to switch to a certificate signed by a different certificate authority that implements theAutomated Certificate Management Environment (ACME) protocol can be foundhere.",
        "url": "
          
            /blog/auto-self-signed-certificate-generation/
          "
      }
      ,
    
      "blog-case-principal-transformer": {
        "title": "Using case principal transformers in Elytron",
        "author": "szaldana",
        "category": "",
        "content": "The case-principal-transformerquickstart demonstrates how to use a case-principal-transformer to adjust a principal to upper casewhen securing  EJBs. Note, the quickstart is building from this post which more closely explains how to configure filesystem realms and SASL authentication to secure EJBs.An Overview of the Case Principal TransformerPrincipal transformers take a name and map it to another representation of the name or perform somenormalisation. The new case-principal-transformer in the Elytron subsystem allows converting a principal to upper or lower case.Previously, a custom transformer was required to adjust a principal&#8217;s username toupper/lower case.In particular, this new principal transformer has the following optional attribute:upper-case - A boolean value which adjusts the principal to upper case when set to true andadjusts the principal to lower case when set to false. Note: If omitted, this value is set to true by default.Reviewing the Elytron ConfigurationIn the following section, we will review the configuration available in the script for the quickstartconfigure-elytron.cli. We start our configuration by connecting to the server using the following command:$ WILDFLY_HOME/bin/jboss-cli.sh --connectNote: Use of WILDFLY_HOMEIn the following post, replace WILDFLY_HOME with the actual path to your WildFly installation.We then create a filesystem realm under the Elytron subsystem, followed by adding an identity in upper case(QUICKSTARTUSER), and a simple role decoder as follows:/subsystem=elytron/filesystem-realm=exampleRealm:add(path=fs-realm-users, relative-to=jboss.server.config.dir)/subsystem=elytron/filesystem-realm=exampleRealm:add-identity(identity=QUICKSTARTUSER)/subsystem=elytron/filesystem-realm=exampleRealm:set-password(clear={password=\"quickstartPwd1!\"}, identity=QUICKSTARTUSER)/subsystem=elytron/filesystem-realm=exampleRealm:add-identity-attribute(identity=QUICKSTARTUSER, name=Roles, value=[\"Admin\", \"Guest\"])/subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)For more information about creating FileSystem realms along with all of its possible configurations,please refer to the Elytron documentation.Configuring a Case Principal TransformerAdding a case-principal-transformer that converts a principal to upper/lower case takes the general form:/subsystem=elytron/case-principal-transformer=transformerName:add(upper-case=\"...\")In our example, the case-principal-transformer is configured to specify that a principal shouldbe transformed to upper case as follows:/subsystem=elytron/case-principal-transformer=myTransformer:add(upper-case=true)Note, the upper-case attribute can be omitted as it will be set to true by default.We then configure a new security domain caseDomain to use our filesystem realm, role decoderand the case principal transformer as a pre-realm-principal-transformer:/subsystem=elytron/security-domain=caseDomain:add(realms=[{realm=exampleRealm}], \\default-realm=exampleRealm,permission-mapper=default-permission-mapper, pre-realm-principal-transformer=myTransformer)Note that creating an additional security domain (caseDomainin this case) is not necessary.We could alternatively take the default ApplicationDomain and add theFileSystem realm, role-decoder, principal transformer and permission-mapper to it.We then add our security domain mapping to the EJB3 subsystem, update the sasl-authentication-factory to useour security domain and update the http-remoting-connector to use our sasl-authentication-factory:/subsystem=ejb3/application-security-domain=other:add(security-domain=caseDomain)/subsystem=elytron/sasl-authentication-factory=application-sasl-authentication:write-attribute(name=security-domain, value=caseDomain)/subsystem=remoting/http-connector=http-remoting-connector:write-attribute(name=sasl-authentication-factory,value=application-sasl-authentication)For more information on the above snippet, please refer to the quickstart this example is based onhere.Configuring the Client (wildfly-config.xml)The username and credentials to establish the connection to the application server are configured in thewildfly-config.xml file. Notice the username provided by the client is quickstartuser and the username we added to theidentity store is QUICKSTARUSER. &lt;authentication-configurations&gt;            &lt;configuration name=\"default-config\"&gt;                &lt;set-user-name name=\"quickstartuser\"/&gt;                &lt;credentials&gt;                    &lt;clear-password password=\"quickstartPwd1!\"/&gt;                &lt;/credentials&gt;                ...            &lt;/configuration&gt;&lt;/authentication-configurations&gt;Since we configured our case-principal-transformer to be used prior to accessing the security realm,the principal provided by the client will  be adjusted to upper case resulting in successful authentication.Build and Deploy the QuickstartMake sure you start the WildFly server.Open a terminal and navigate to the root directory of this quickstart.Type the following command to build the artifacts.    $ mvn clean install wildfly:deployYou should see a message in the server log indicating that the archive deployed successfully.Run the ClientBefore you run the client, make sure you have successfully deployed the EJBs to the server in the previous step and that yourterminal is still in the root directory of this quickstart.Run this command to execute the client:$ mvn exec:execInvestigate the Console OutputWhen you run the mvn exec:exec command, you should see the following output.* * * * * * * * * * * * * * * * * * * * * * * * * * * * * *Successfully called secured bean, caller principal QUICKSTARTUSERPrincipal has admin permission: true* * * * * * * * * * * * * * * * * * * * * * * * * * * * * *The username and credentials to establish the connection to the application server are configured in thewildfly-config.xml. Notice the username provided in the wildfly-config.xml file is quickstartuserand the username stored in the identity store is QUICKSTARTUSER.As expected, the quickstartuser was adjusted to QUICKSTARTUSER by the case-principal-transformer prior to accessingthe security realm and the principal was able to invoke the  method available for the admin role.SummaryThis blog post has given an overview on how to use a case-principal-transformer in theElytron subsystem.",
        "url": "
          
            /blog/case-principal-transformer/
          "
      }
      ,
    
      "blog-tls-13-with-wildfly-openssl": {
        "title": "TLS 1.3 support for WildFly with OpenSSL",
        "author": "fjuma",
        "category": "",
        "content": "WildFly 21 adds the ability to use TLS 1.3 with WildFly when using the OpenSSL TLS provider.This blog post will give an introduction to this new feature.Disabled by DefaultThe use of TLS 1.3 is currently disabled by default when using the OpenSSL TLS provider. This is because ifJDK 11 is in use and if there is a very large number of TLS 1.3 requests coming in, it is possible that a dropin performance (i.e., throughput and response time) will occur compared to when using TLS 1.2 with the OpenSSLTLS provider. It is recommended to test for performance degradation prior to enabling TLS 1.3 in a productionenvironment.Enabling TLS 1.3 on the Server SideTLS 1.3 can be enabled by configuring the cipher-suite-names attribute in the SSL Context resource definitionin the Elytron subsystem. Let&#8217;s take a look at a complete example.Pre-requisite ConfigurationAs a first step, we&#8217;re going to enable one-way SSL for applications deployed to WildFly using thesecurity enable-ssl-http-server CLI command:Enabling one-way SSLsecurity enable-ssl-http-server --interactivePlease provide required pieces of information to enable SSL:Certificate info:Key-store file name (default default-server.keystore): server.keystorePassword (blank generated): secretWhat is your first and last name? [Unknown]: localhostWhat is the name of your organizational unit? [Unknown]:What is the name of your organization? [Unknown]:What is the name of your City or Locality? [Unknown]:What is the name of your State or Province? [Unknown]:What is the two-letter country code for this unit? [Unknown]:Is CN=localhost, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown correct y/n [y]?yValidity (in days, blank default): 30Alias (blank generated): localhostEnable SSL Mutual Authentication y/n (blank n):nSSL options:key store file: server.keystoredistinguished name: CN=localhost, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown,C=Unknownpassword: secretvalidity: 30alias: localhostServer keystore file server.keystore, certificate file server.pem and server.csr file will be generated in server configuration directory.Do you confirm y/n :yServer reloaded.SSL enabled for default-serverssl-context is ssl-context-b0110cb7-595b-4de9-942b-e616690bb350key-manager is key-manager-b0110cb7-595b-4de9-942b-e616690bb350key-store   is key-store-b0110cb7-595b-4de9-942b-e616690bb350As we can see from the output, the above command automatically generated a self-signed server certificate, added it to anewly created keystore, and added a new ssl-context resource, ssl-context-b0110cb7-595b-4de9-942b-e616690bb350, tothe Elytron subsystem in order to enable one-way SSL for applications deployed to WildFly.Configuring WildFly to use the OpenSSL TLS providerThere are two ways to configure WildFly to make use of the OpenSSL TLS provider.Using the OpenSSL TLS provider by defaultTo configure the Elytron subsystem so that the OpenSSL TLS provider is used by default, the following commands can be used:/subsystem=elytron:write-attribute(name=initial-providers, value=combined-providers)/subsystem=elytron:undefine-attribute(name=final-providers)reloadConfiguring an SSL context to use the OpenSSL TLS providerInstead of configuring the Elytron subsystem to use the OpenSSL TLS provider by default, it is also possibleto specify that the OpenSSL TLS provider should be used for a specific SSL context by configuring the providersattribute for a server-ssl-context. Let&#8217;s update our server-ssl-context to specify that we want to use theOpenSSL TLS provider:/subsystem=elytron/server-ssl-context=ssl-context-b0110cb7-595b-4de9-942b-e616690bb350:write-attribute(name=providers,value=openssl)reloadNow, let&#8217;s try to access the WildFly landing page using curl:curl -v -k https://localhost:8443* SSL connection using TLSv1.2 / ECDHE-RSA-AES256-GCM-SHA384* ALPN, server accepted to use h2* Server certificate:*  subject: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  start date: Oct  6 14:58:16 2020 GMT*  expire date: Nov  5 15:58:16 2020 GMT*  issuer: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  SSL certificate verify result: self signed certificate (18), continuing anyway.Since the security enable-ssl-http-server command simply generated a self-signed server certificate fortesting purposes, this server certificate won&#8217;t be trusted by curl. This is why we specified the -k optionin the curl command.Notice that in the above output, we can see that the TLS 1.2 protocol was used for the connectionand that the ECDHE-RSA-AES256-GCM-SHA384 cipher suite was used.Switching to TLS 1.3To enable TLS 1.3, we just need to update our ssl-context configuration in the Elytron subsystem to specify thecipher-suite-names attribute. The format of this attribute is colon separated list of the TLS 1.3 cipher suitesthat you would like to enable. We&#8217;re going to set this attribute to TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:# This is only needed when the ssl-context is configured to use specific protocol version(s) other# than TLS 1.3. In general, this is not needed when the protocols attribute is simply undefined./subsystem=elytron/server-ssl-context=ssl-context-b0110cb7-595b-4de9-942b-e616690bb350:write-attribute(name=protocols,value=[TLSv1.3])/subsystem=elytron/server-ssl-context=ssl-context-b0110cb7-595b-4de9-942b-e616690bb350:write-attribute(name=cipher-suite-names,value=TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256)reloadNow, let&#8217;s try to access the WildFly landing page using curl again:* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384* ALPN, server accepted to use h2* Server certificate:*  subject: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  start date: Oct  6 14:58:16 2020 GMT*  expire date: Nov  5 15:58:16 2020 GMT*  issuer: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  SSL certificate verify result: self signed certificate (18), continuing anyway.Notice that this time, we can see that the TLS 1.3 protocol was used for the connection and that the TLS 1.3TLS_AES_256_GCM_SHA384 cipher suite was used.SummaryThis blog post has given an overview on how TLS 1.3 can be used with WildFly with the OpenSSL TLS provider.For more details, take a look at the documentation.",
        "url": "
          
            /blog/tls-13-with-wildfly-openssl/
          "
      }
      ,
    
      "blog-ssh-auth-for-git-persistence": {
        "title": "SSH Authentication with Git Persistence",
        "author": "aabdelsa",
        "category": "",
        "content": "When using a standalone WildFly server, it is currently possible to manage your configuration file history using a gitrepository. While previously it was only possible to connect to HTTP git servers, it is now possible to establish a connectionwith SSH servers as well.In order to connect to the SSH git repository, you will have to use an Elytron configuration file to set up SSH credentials.This blog will describe how to generate SSH keys and add them as credentials in a wildfly-config.xml file and how tostart the standalone server with an SSH git repository to manage your configuration file history.Generating SSH keys using the Elytron ToolThe wildfly-config.xml configurationGenerating SSH keys using the OpenSSH command line toolThe wildfly-config.xml configurationConnecting to a git repoGenerating SSH keys using the Elytron ToolElytron offers a way to generate and store private keys securely in a credential store. We can use the Elytron tool scriptsfound in your JBOSS home to do so. For this example, we will be creating a new credential store and generating an RSA key.First, we must create the credential store:[$JBOSS_HOME]$ ./bin/elytron-tool.sh credential-store --create --location=cs_example.cs --password ElytronThis command creates a credential store in the file cs_example.cs and secures the credential store with the passwordElytron. Note the file cs_example.cs does not need to exist before running this command to create the credential store.Next, we generate a key pair to store in the credential store:[$JBOSS_HOME]$ ./bin/elytron-tool.sh credential-store --location=cs_example.cs --password Elytron --generate-key-pair example --algorithm RSA --size 3072This command generates an RSA key pair credential of size 3072 bytes and stores it under the alias example in the credentialstore we created.Finally, we can print our public key with the following command:[JBOSS_HOME]$ ./bin/elytron-tool.sh credential-store --location=cs_example.cs --password Elytron --export-key-pair-public-key examplessh-rsaAAAAB3NzaC1yc2EAAAADAQABAAABgwo8etzxo2JiERvv07/Cvkb6eIqodZrdWWAI11cp0VYgnEvd5dGoYGSHmDWO5EqXdOLROifr+CmOGUEWRIwSy+W13QywZbnrmDPJbx4e/KckVvhpEtq3AZc2w7Zunob+yxGlX9PyeYI4HEsKmwOi+brqeBD7fo923U9FUyqs47pu088tpuoYo2kcxX7BJP+uxfEIkZECWkQcolL8qMl4PkUvzWnTv+KjRzUXYAHEefdqpMa+th58KmB7W8An8weJ85/nerbOkVxN6dAbDO82at77LvaRRDh+65ur1JfTWf1iS+fH2TwTv5e/RGNOnV4sdpNcKVfZ3AWVKp5kmt+x0EQsCalFiDwGyciIjQ1jA8NRr83/LQgdzHsDZ7Amudc25IEwRdXS9BYxTqAMeBLoxHqDKAZ6uiZoPH4QfaVYSXeF3GrYUC2Fzg5P1VKa1OJQOb3itztXsor2vFVtQeUjQ3lv63FN8YE6HnS2PRhbqn9Ep0oh/QqbhlK4vtY+WtY5UWBf7Q==If you already have an SSH key pair, it is possible to import the key into a credential store. See theCredential Store Documentationfor more informationThe wildfly-config.xml configurationOnce we have our key pair credential in a credential store, we can reference it from our wildfly-config.xml file as follows:&lt;configuration&gt;  &lt;authentication-client xmlns=\"urn:elytron:client:1.6\"&gt;     &lt;credential-stores&gt;        &lt;credential-store name=\"store1\"&gt;           &lt;protection-parameter-credentials&gt;              &lt;clear-password password=\"Elytron\"/&gt;           &lt;/protection-parameter-credentials&gt;           &lt;attributes&gt;              &lt;attribute name=\"keyStoreType\" value=\"JCEKS\"/&gt;                &lt;attribute name=\"location\" value=\"cs_example.cs\"/&gt;           &lt;/attributes&gt;        &lt;/credential-store&gt;     &lt;/credential-stores&gt;     &lt;authentication-rules&gt;        &lt;rule use-configuration=\"example-config\"/&gt;     &lt;/authentication-rules&gt;     &lt;authentication-configurations&gt;        &lt;configuration name=\"example-config\"&gt;           &lt;credentials&gt;              &lt;credential-store-reference store=\"store1\" alias=\"example\" clear-text=\"Elytron\"/&gt;           &lt;/credentials&gt;        &lt;/configuration&gt;     &lt;/authentication-configurations&gt;  &lt;/authentication-client&gt;&lt;/configuration&gt;This configuration defines a new credential store from the file we created. It then references the alias example (whichstores the RSA key pair we generated) to be used as credentials.Generating SSH keys using the OpenSSH command line toolAlternatively, one may use the OpenSSH command line tool to generate their SSH keys. The algorithms supported by Elytronare: RSA, DSA, and ECDSA. For example, we can generate an ECDSA key of size 256 and encrypted with the passphrase “secret”as follows:[~/.ssh]$ ssh-keygen -t ecdsa -b 256Generating public/private ecdsa key pair.Enter file in which to save the key (/home/user/.ssh/id_ecdsa):Enter passphrase (empty for no passphrase): secretEnter same passphrase again: secretYour identification has been saved in /home/user/.ssh/id_ecdsa.Your public key has been saved in /home/user/.ssh/id_ecdsa.pub.For more information on how to generate OpenSSH keys see: OpenSSH DocumentationThe wildfly-config.xml configurationIf you already have SSH keys generated, you can add them as credentials a couple of ways:Key Pair CredentialOne way is to specify your keys directly in the wildfly-config.xml using a key-pair credential as follows:&lt;configuration&gt;  &lt;authentication-client xmlns=\"urn:elytron:client:1.6\"&gt;     &lt;authentication-rules&gt;        &lt;rule use-configuration=\"example\"/&gt;     &lt;/authentication-rules&gt;     &lt;authentication-configurations&gt;        &lt;configuration name=\"example\"&gt;           &lt;credentials&gt;              &lt;key-pair&gt;                 &lt;openssh-private-key pem=\"-----BEGIN OPENSSH PRIVATE KEY-----b3BlbnNzaC1rZXktdjEAAAAACmFlczI1Ni1jdHIAAAAGYmNyeXB0AAAAGAAAABDaZzGpGV922xmrL+bMHioPAAAAEAAAAAEAAABoAAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBIMTU1m6pmpnSTZ2k/cbKnxXkRpXUmWwqN1SSNLpRswGsUhmLG2H21br1ZlEHRiRn6zQmA4YCtCw2hLuz8M8WVoAAADAQk+bMNWFfaI4Ej1AQdlLl6v4RDa2HGjDS3V439h0pOx4Ix7YZKydTN4SPkYRt78CNK0AhhtKsWo2lVNwyfh8/6SeqowhgCG9MJYW8yRR1R3DX/eQTx6MV/gSSRLDTpcVWUY0jrBGpMaEvylKoNcabiEo44flkIYlG6E/YtFXsmXsoBsjnFcjvmfE7Lzyin5Fowwpbqj9f0XOARu9wsUzeyJVAwT7+YCU3mWJ3dnO1bOxK4TuLsxD6jRB7bJemsfr-----END OPENSSH PRIVATE KEY-----\"&gt;                    &lt;clear-password password=\"secret\"/&gt;                 &lt;/openssh-private-key&gt;              &lt;/key-pair&gt;           &lt;/credentials&gt;        &lt;/configuration&gt;     &lt;/authentication-configurations&gt;  &lt;/authentication-client&gt;&lt;/configuration&gt;This configuration shows how to specify keys which are in OpenSSH format. In this example, we specify the passphrase secretthat is required to decrypt the key as a clear-password type, but we could have also used a masked-password or acredential-store-reference.Elytron also supports keys in PKCS8 format, but they must not be encrypted with a passphrase.SSH credentialThe other way to add existing keys as credentials is to specify the location and file name containing your private keysusing a ssh-credential as follows:&lt;configuration&gt;  &lt;authentication-client xmlns=\"urn:elytron:client:1.6\"&gt;     &lt;authentication-rules&gt;        &lt;rule use-configuration=\"example\"/&gt;     &lt;/authentication-rules&gt;     &lt;authentication-configurations&gt;        &lt;configuration name=\"example\"&gt;           &lt;credentials&gt;              &lt;ssh-credential ssh-directory=\"/user/home/example/.ssh\" private-key-file=\"id_test_ecdsa\" known-hosts-file=\"known_hosts_test\"&gt;                 &lt;clear-password password=\"secret\"/&gt;              &lt;/ssh-credential&gt;           &lt;/credentials&gt;        &lt;/configuration&gt;     &lt;/authentication-configurations&gt;  &lt;/authentication-client&gt;&lt;/configuration&gt;The ssh-directory attribute specifies the location of the key and the known hosts file.The private-key-file attribute specifies the name of the file containing your private key.The known-hosts-file attribute specifies the name of the file containing the known SSH hosts.This key was encrypted with the passphrase secret and so we specify a clear-password to be able to decrypt it, butagain we could have also used a masked-password or a credential-store-reference.It is also possible to specify both a key-pair credential and ssh-credential at the same time if you wouldlike to specify your private key using a key-pair but your known_hosts file is not in the default [user.home]/.ssh location and you needto use the ssh-credential to specify its location.For more information on the key-pair credential and ssh-credential check out theElytron Authentication Client DocumentationConnecting to a git repoOnce we have added our credentials in a wildfly-config.xml file, we can connect to the remote SSH git repo.To connect, we use the SSH url of this repo and specify the following options when starting the standalone WildFly server:[JBOSS_HOME]$ ./bin/standalone.sh --git-repo=ssh:giturl.com/repo --git-auth=file:///path/to/wildfly-config.xmlThe --git-repo option specifies the uri of the git repo we would like to connect to.The --git-auth option specifies the location of the wildfly-config file containing your credentials.And all done! We should be able to successfully start up our standalone server and your configuration file history will bemanaged by the repository we connected to. For more information on git persistence, check out:Git Configuration file history",
        "url": "
          
            /blog/ssh-auth-for-git-persistence/
          "
      }
      ,
    
      "blog-resteasy-elytron-client-integration": {
        "title": "RESTEasy client integration with WildFly Elytron client",
        "author": "dvilkola",
        "category": "",
        "content": "We have added a new functionality to the RESTEasy client that allows it to use authentication configuration from WildFly Elytron client.It is now possible to configure bearer token, SSL context and credentials in Elytron client that RESTEasy client will automatically use when making requests.Elytron client configurationNo new elements have been added to the Elytron client configuration as all of the mentioned mechanisms were already configurable. Configured credentials will be used for HTTP Basic authentication by default. For more information on how to configure Elytron client take a look at the documentation.Please note that any configuration that RESTEasy client already had configured will not be rewritten.RESTEasy client useIt is necessary to have WildFly Elytron client on classpath when the build method of RESTEasy client is called:import javax.ws.rs.client.ClientBuilder;import org.jboss.resteasy.client.jaxrs.ResteasyClient;...ResteasyClient client = new ResteasyClientBuilder().build();or:ResteasyClient client = (ResteasyClient) ClientBuilder.newBuilder().build();Make sure you have the following dependency on your classpath:&lt;dependency&gt;    &lt;groupId&gt;org.wildfly&lt;/groupId&gt;    &lt;artifactId&gt;wildfly-client-all&lt;/artifactId&gt;    &lt;version&gt;21.0.0.Final&lt;/version&gt;&lt;/dependency&gt;Note: You can have Elytron client configured either in wildfly-config.xml file or in code like below:AuthenticationConfiguration context = AuthenticationConfiguration.empty().useName(\"name\").usePassword(\"pass\");AuthenticationContext.empty().with(MatchRule.ALL, context).run(() -&gt; {    ResteasyClient client = new ResteasyClientBuilder().build();    ...});ExampleAn example demonstrating this integration can be found here. In this example, two-way SSL is configured on the server. Additionally, HTTP BASIC authentication is required to connect to the server as well. RESTEasy client uses SSLContext and credentials from Elytron client to successfully connect to the server.Supply your own security configuration to RESTEasy clientYou can also provide your own implementation of the org.jboss.resteasy.client.jaxrs.spi.ClientConfigProvider interface and supply authentication configuration from other source than Elytron client.SummaryThis blog post has given an overview of RESTEasy client integration with WildFly Elytron client.",
        "url": "
          
            /blog/resteasy-elytron-client-integration/
          "
      }
      ,
    
      "blog-new-security-features-in-wildfly-21": {
        "title": "New Security Features in WildFly 21",
        "author": "fjuma",
        "category": "",
        "content": "This blog post highlights the new security features that are in WildFly 21.Security Realm EnhancementsIf a security realm becomes unavailable for some reason, it is now possible to fail over to an alternate securityrealm.WildFly 21 also adds support for distributed security realms, where identities can be stored in multiple securityrealms. When retrieving an identity from a distributed security realm, each of the configired realms is invokedsequentially until a realm containing the identity is found.For an overview of these two new realm implementations, check out this blog post.Client IntegrationIt&#8217;s now possible for RESTEasy clients to make use of authentication information like credentials and SSL configurationfrom an Elytron client configuration file. Check out this blog postto see an example of how to make use of this new feature.Additional Authentication MechanismsWhen using a remote Git repository to manage your WildFly configuration file history, it&#8217;s now possible toconnect to your Git repository using SSH authentication. For details on how to specify the SSHcredentials that are needed to connect to your Git repository, take a look at thisblog post.Support for the HTTP External authentication mechanism has now been added to WildFly. This means thatit is now possible for WildFly to authenticate a user based on credentials established externally.More details can be found in this blog post.TLS 1.3 Support with OpenSSLA little while ago, we added support for TLS 1.3 for WildFly when using the JSSE TLS provider. WildFly 21 nowadds support for TLS 1.3 when using the OpenSSL TLS provider. As with the JSSE TLS provider, there is an importantcaveat to be aware of when using the OpenSSL TLS provider with TLS 1.3. If JDK 11 is in use and if there is a verylarge number of TLS 1.3 requests being made, it is possible that a drop in performance (throughput and response time)will occur compared to when using TLS 1.2 with WildFly. It is recommended to test for performance degradation priorto enabling TLS 1.3 in a production environment. Take a look at thisblog postto learn how to enable TLS 1.3 when using the OpenSSL TLS provider.Where to Find More InformationBe sure to check out our blog posts page, where we have all ourblog posts on Elytron features. If there is an Elytron topic you’d like to see a blog post on, feel free to let us knowon WildFly’s user forums.To learn more about Elytron, check out our site.",
        "url": "
          
            /blog/new-security-features-in-wildfly-21/
          "
      }
      ,
    
      "blog-http-external-mechanism": {
        "title": "HTTP External Mechanism",
        "author": "aabdelsa",
        "category": "",
        "content": "WildFly Elytron now supports authenticating users with the External HTTP mechanism. The External mechanism allows users tobe authenticated with credentials established outside the server via the AJP protocol. This means if you have users authenticatedby an Apache httpd server, these users can be forwarded to WildFly. This can be done by setting upElytron to secure a WildFly deployment and specifying for the External HTTP mechanism to be used. This is done by specifyingthe EXTERNAL mechanism as one of the mechanism configurations to be used by the http-authentication-factory:/subsystem=elytron/http-authentication-factory=web-tests:add(security-domain=example-domain, http-server-mechanism-factory=example-factory,mechanism-configurations=[{mechanism-name=EXTERNAL}])If your application is secured using this http-authentication-factory and a remote server forwards an authenticateduser using the REMOTE_USER attribute via the AJP protocol, Elytron will accept the externally authenticated user anduse the specified security domain to perform role mapping to complete authorization.",
        "url": "
          
            /blog/http-external-mechanism/
          "
      }
      ,
    
      "blog-distributed-and-failover-realms": {
        "title": "An overview of new security realm implementations",
        "author": "mmazanek",
        "category": "",
        "content": "We have added a new functionality to WildFly ElytronIt is now possible to configure security realms that delegate authentication and authorization to multiple realms.Distributed realmFirst added realm is the distributed-realm, which can be used to join multiple realms into one, for example if youhave user data on two databases. Unlike aggregate-realm, which uses one realm for authentication and multiple realmsor authorization, distributed-realm uses multiple realms for both authentication and authorization.Lets say we have two realms called realm1 and realm2, which we want to use as one. We can do so in CLI using following command:/subsystem=elytron/distributed-realm=newrealm:add(realms=[realm1, realm2])which results in following configuration:&lt;security-realms&gt;...    &lt;distributed-realm name=\"newrealm\" realms=\"realm1 realm2\"/&gt;...&lt;/security-realms&gt;The new distributed-realm newrealm will use both realm1 and realm2 for authentication and authorization.Failover realmThe other added realm is the failover-realm, which enables you to configure a backup realm in case another realm isunavailable. For example, we can have a file based as a backup for database realm,so we can still access the deployed application using backup identity stored in the file based realm,even if we lose network connection to the jdbc-realm database.Lets say we have user data in jdbc-realm called realm1 and we want to use filesystem-realm called realm2 as a backup.We can do this in CLI using following command:/subsystem=elytron/failover-realm=newrealm:add(delegate-realm=realm1, failover-realm=realm2)which results in following configuration:&lt;security-realms&gt;...    &lt;failover-realm name=\"newrealm\" delegate-realm=\"realm1\" failover-realm=\"realm2\"/&gt;...&lt;/security-realms&gt;The new failover-realm newrealm will use realm1 as a primary realm for authentication and authorization, but if therealm becomes unavailable, it will switch to using realm2. The failover happens per authentication, so if the realm1 becomesunavailable for a short time, you will be able to authenticate using it as soon as it comes back up without any reloads.SummaryThis blog post has given an overview of WildFly Elytron distributed-realm and failover-realm.",
        "url": "
          
            /blog/distributed-and-failover-realms/
          "
      }
      ,
    
      "blog-anomaly-based-intrusion-detection-system": {
        "title": "Anomaly based Intrusion Detection System",
        "author": "piyush-palta",
        "category": "",
        "content": "Intrusion Detection is the art of sensing when a system or network is being used inappropriately or without authorization. Without intrusion detection, an attacker can attempt attacks many times until an attack is finally successful. Intrusion detection allows for these attacks to be identified before a successful attack is likely to occur.In this blog, we’ll talk about an Anomaly detection based approach for Intrusion Detection System. First of all, let’s discuss what the whole concept of anomaly based intrusion detection is.Anomaly based intrusion detection uses statistics to form a baseline usage of the networks at different time intervals. This system uses machine learning to create a model simulating regular activity and then compares new behaviour with the existing model.Before we continue with defining anomaly based IDS, here are a few things you should know:Machine Learning is the field of study that gives computers the capability to learn and improve from experience without being programmed to do so explicitly.The process of learning begins with observations or data to look for patterns in data and make better predictions based on the dataset provided. The primary objective is to allow computers to learn without human assistance and adjust its actions accordingly.Machine Learning Algorithms can be broadly classified into:Supervised machine learning algorithms: It is called supervised learning because the process of an algorithm learning from the training dataset can be thought of as a teacher supervising the learning process. We know the correct answers, the algorithm iteratively makes predictions on the training data and is corrected by the teacher. Learning stops when the algorithm achieves an acceptable level of performance. The teacher here is the labelled dataset, that provides us with information &amp; facilitates learning.Unsupervised machine learning algorithms: are used when the information used to train is neither labelled nor classified. Unattended learning studies how systems can infer a function to describe a hidden structure from unlabeled data.Semi-supervised machine learning algorithms: makes use of unlabeled data for training — with a blend of less labelled data and a lot of unlabeled data. Semi-supervised learning falls between unsupervised learning and supervised learningEvaluation of different Machine Learning Models for IDSUnsupervised learning algorithms can learn the typical pattern of the network and can report outliers without labelling the dataset. It can detect new types of intrusions but is extremely prone to false positives. To reduce the false positives, we can introduce a labelled dataset and build a supervised machine learning model by teaching it the difference between a normal and an attack packet in the network, basically we will be labelling the normal &amp; malicious traffic. The supervised model can handle the known attacks deftly and can also recognise variations of those attacks. Standard supervised algorithms such as Naive Bayes, Random Forest Classifier, MLP and Deep Neural Network are discussed below.Apart from the algorithm used, one of the most important things while writing a Machine model and training it, is the dataset used. And the quality and extensiveness of the dataset determines the quality of the model &amp; how well it will perform generally.For many years, KDD99 Dataset has been a benchmark for IDS model training &amp; evaluations. But to fully customise your model as per your network server and to train your model to handle anomalies in your network, it is important for it to train a model specifically for your network, and let the model learn what normal traffic looks like for your network i.e. normal and anomalous traffic for each network is different. One can use both supervised and unsupervised learning for this purpose.To solve this problem &amp; generate customisable dataset, we have implemented Network Intrusion Dataset Generator that lets you capture your network traffic using scapy and generates a csv file that can readily be used for training your model after preprocessing the dataset. The best part is, it is fully customizable and one can choose to keep whatever features they want. You can find the implementation here Code presented here is an implementation to generate csv file from packets captured on the network. One can also convert already captured packets in a pcap file to csv. The current implementation hasn&#8217;t applied many filters on capturing of packets &amp; can be extended according to one&#8217;s own need.Coming back to different models, let’s evaluate how each model fares on KDD99 Dataset (for testing we’ve used KDD99 Dataset). We have used scikit-learn models for the evaluation, implementation of all the models can be found in this colab notebook here.Let’s talk in brief about what each model does (we won’t discuss which model is the best here since each model will serve good for different purposes &amp; different datasets, so for now we’ll skip discussing the metrics. Although, if one wishes they can look at the accuracy we are getting for the KDD99 dataset for each model by running the cells in the colab notebook.Random Forest Classifier :Random forest, like its name implies, consists of a large number of individual decision trees that operate as an ensemble. Each individual tree in the random forest spits out a class prediction and the class with the most votes becomes our model’s predictionIt basically is like an election where uncorrelated models votes to choose a class, and the rule is majority wins.Figure 1. Visualization of how Random Forest Classifier worksNaive Bayes Classifier :Naive Bayes classifiers are a collection of classification algorithms based on Bayes’ Theorem. It is not a single algorithm but a family of algorithms where all of them share a common principle, i.e. every pair of features being classified is independent of each other.MLP (Multi-layered Perceptron) :A multi-layered perceptron consists of interconnected neurons transferring information to each other, much like the human brain. Each neuron is assigned a value. The network can be divided into three main layers :Input LayerHidden Layer(s)Output LayerFigure 2. Representation of Multi-layered PerceptronThe MLP is a feedforward neural network, which means that the data is transmitted from the input layer to the output layer in the forward direction. The connections between the layers are assigned weights. These weights are calculated by a mathematical function and adjusted based on the provided dataset to minimize the cost function.Deep Neural NetworkDeep Neural Network is similar to MLP, it’s just that it supports backpropagation.Backpropagation is a technique used to optimize the weights of a neural net using the outputs as inputs. Conventionally, random weights are assigned to all the connections. These random weights propagate values through the network to produce the output. Naturally, this output would differ from the expected output. The difference between the two values is called the error.Backpropagation refers to the process of sending this error back through the network, readjusting the weights automatically so that eventually, the error between the actual and expected output is minimized.Feature AnalysisEnough on briefing each separate model, let’s have a look at the feature analysis of KDD dataset. This brief discussion below is based on research paper.The KDD data set has 42 attributes. The attribute labeled 42 in the data set is the ‘class’ attribute which indicates whether a given instance is a normal connection instance or an attack. Out of these 42 attributes, 41 attributes can be classified into four different classes as discussed below:Basic, B Features are the attributes of individual TCP connectionsContent ,C features are the attributes within a connection suggested by the domain knowledgeTraffic, T features are the attributes computed using a two-second time windowHost, H features are the attributes designed to assess attacks which last for more than two secondsFigure 3. Attributes in KDD99 DatasetThe conclusion of the result is that Basic features alone results in highest accuracy. One can find more details and all the metrics in the research paper provided above.Summary:In this blog, we introduced an anomaly based Intrusion Detection System &amp; discussed various machine learning models &amp; its implementation.",
        "url": "
          
            /blog/anomaly-based-intrusion-detection-system/
          "
      }
      ,
    
      "blog-introduction-rule-engine-and-blacklist-dump": {
        "title": "Introduction to Rule Engine &amp; Blacklist IP Dump of Intrusion Detection System",
        "author": "piyush-palta",
        "category": "",
        "content": "Earlier we introduced Intrusion Detection System using Elytron&#8217;s security events and discussed its architecture. In this blog we&#8217;ll discuss the implementation of Rule Engine &amp; Blacklist IP Dump.Rule EngineRule Engine comprises of a set of pre-defined rules, which are used to score the event on a scale of 0 to 100. This score helps determine whether an event is safe or risky, this can be decided by setting a risk threshold.Rule Engine is backed by a database that has information such as IP address, user id, event outcome(success or failure) of past security events. Each entry in database has Time to live(TTL) or hop limit of 3 hours, which can be configured based on requirement.Generally speaking rule based engines are robust but can only take on already identified &amp; can&#8217;t do much about new attacks. It does only as much as it is asked for, which though results in extremely low false positives doesn&#8217;t scale well to all situations.That&#8217;s when Machine Learning &amp; anomaly detection engines come into the picture. These engines are currently under development &amp; will be introduced in future posts.Coming back to the Rule Engine, current implementation focuses mainly to prevent dictionary &amp; brute force attacks from happening.There are four rules, each addressing different use cases :Multiple login attempts from same IPMultiple login attempts for same user ID via different IPsMultiple login attempts from IP that was used to access same user ID in past (the risk is relatively low here)Multiple incorrect user ID attempts due to typo (We use edit_distance to subsidize the penalty for each attempt)Implementation available at : https://github.com/piyush-palta/risk-analyzer/blob/master/risk_calculator/rule_engine.pyBlacklist IP DumpBlacklist IP Dump is a database of all the IPs that are blacklisted over the internet for malicious behaviour. One such source of blacklisted IP addresses is myip.ms. These IPs are provided in a text file &amp; stored in a sqlite3 based database. IPs are hashed as integers for easy lookup i.e. O(logN) lookup.If an IP is found to be present in this database, highest possible score of 100 is returned and the event is forfeited.Implementation available at : https://github.com/piyush-palta/risk-analyzer/blob/master/risk_calculator/blacklist_ip.pySummary:In this blog, we introduced the rule engine &amp; blacklist IP dump of Intrusion Detection System using Elytron&#8217;s security events &amp; discussed their implementation.",
        "url": "
          
            /blog/introduction-rule-engine-and-blacklist-dump/
          "
      }
      ,
    
      "blog-architectural-overview-intrusion-detection-system": {
        "title": "An Introduction to Intrusion Detection System using Elytron",
        "author": "piyush-palta",
        "category": "",
        "content": "Intrusion Detection is the art of sensing when a system or network is being used inappropriately or without authorization. Without intrusion detection, an attacker can attempt attacks many times until an attack is finally successful. Intrusion detection allows for these attacks to be identified before a successful attack is likely to occur.In this blog, we’ll talk about an architectural overview of a system that uses Elytron’s security events for intrusion detection &amp; prevention and discuss briefly about each component and their interactions within the system as a whole. Later, we’ll understand the implementation &amp; how the system’s architecture has been realised.Elyton’s core concepts comprises Authentication &amp; Authorization and is based on a Security Policy that utilises several smaller components together to work. In addition to that it provides support for security events which can indicate things like a failed authentication attempt for a particular user. These security events can be used to detect various attacks such as Brute force, Dictionary attack etc. So the high level idea is to log the security events in a data store system, and harness information provided to make predictions on a possible network breach.Figure 1. Architecture of Intrusion Detection SystemThe proposed architecture is as depicted in Figure 1.  The idea here is to evaluate the risk posed by an authentication &amp; authorization event based on its attributes &amp; forfeit the event auth if the posed risk is above set threshold limits.NOTE: A general IDS like any other auditing systems, consists of three parts: an agent, a director, and a notifier.The agent corresponds to the logger. It acquires information from the target. The director corresponds to the analyzer.It analyzes the data from the agents to determine if an attack is in progress or has occurred. The director then passesthis information to the notifier, which determines whether and how to notify the requisite entity.The various components of our Intrusion Detection System (IDS) are :Elytron’s Query System (Trigger)Risk Analyzer (Director &amp; Notifier)Syslog Server (Passive Agent)Elytron’s Syslogger (Agent)In this architecture, Elytron’s Query System acts as a trigger, it resides inside of Elytron &amp; queries the IDS for risk analysis of an event. Risk Analyzer has two submodules &amp; acts as a Director i.e. it receives the query &amp; analyses it for threats; as well as Notifier i.e. it provides the system with risk analysis. Elytron’s Syslogger resides inside Elytron and acts as Agent by logging every security event to an external Syslog server, which is a part of IDS &amp; acts as a passive agent. Let’s discuss each component in greater detail.Elytron’s Query System (Risk Role Decoder)Elytron’s Query System resides in Elytron &amp; implemented as a RoleDecoder. An Elytron RoleDecoder takes the raw AuthorizationIdentity return from SecurityRealm and converts its attributes into roles. RiskRoleDecoder makes use of runtime attributes to get hold of remote client’s IP addresses &amp; provides a way to query the Risk Analyzer via Sockets to receive a risk score.RiskRoleDecoder is provided with a threshold risk score, exceeding which leads to assigning empty roles to the auth event, which ultimately leads to authorization failure and further access is denied. In case an event is deemed safe, roles are assigned accordingly.RiskRoleDecoder&#8217;s implementation can be found here.Risk AnalyzerRisk Analyzer is a server module that acts as Director as well as Notifier in IDS. It takes in an IP address &amp; returns a risk score in the range of 0 to 100. The risk score is used to make the authorization decisions based on a set threshold risk. Risk Analyzer comprises several different components : Risk Server Socket, Main Analyzer &amp; Risk Calculator.Risk Server Socket :Risk Server Socket is used to declare a socket server instance, required to open connection to the client. Once the socket has been set up, it will listen for connection until terminated. Current maximum connection limit has been set at 5. While introducing socket threading in future, a more versatile approach will be taken.Risk Calculator :When Risk Analyzer receives a query, it sends the IP Address to Risk Calculator, which is backed by Blacklist IP dump, Rule Engine &amp; a Learning Module. Results from all these will be aggregated &amp; returned to the client.Risk Analyzer is implemented in Python &amp; communicates directly with Elytron via RiskRoleDecoder, which makes use of runtime attributes to access remote client’s IP address, &amp; communicate via a temporary socket. Implementation available at : https://github.com/piyush-palta/risk-analyzerFigure 2. Architecture of Risk AnalyzerSyslog ServerSyslog server is a python based external server for syslogging of Elytron security events and acts as a Passive Agent. These events are logged using the inherent syslogging capabilities of the wildfly or undertow server. For now we’re using an undertow server, due to its sheer versatility. Both TCP &amp; UDP syslogging is possible &amp; with connections served as threads, it will easily scale for practical applications.Implementation available at : https://github.com/piyush-palta/syslog-serverElytron’s Syslogger (Inbuilt Syslog Auditing)Elytron’s Syslogger acts as an agent and logs security events directly to the Syslog server. We are using inbuilt syslog auditing capabilities of the server. Undertow Standalone is a servlet implementation, which uses Wildfly Elytron. We are using this implementation to emit the security events.Implementation available at : https://github.com/piyush-palta/undertow-standaloneSummary:In this blog, we introduced the new Intrusion Detection System using Elytron&#8217;s security events &amp; discussed an overview of its architecture.",
        "url": "
          
            /blog/architectural-overview-intrusion-detection-system/
          "
      }
      ,
    
      "blog-regex-role-mapper": {
        "title": "Using regex role mapper in Elytron",
        "author": "dvilkola",
        "category": "",
        "content": "Elytron subsystem configuration was enhanced to allow possibility to define a regex based security roles mapping mechanism. With this functionality it is possible to easily translate list of roles, eg. app-admin, abc-user, to simpler roles , eg. admin, user.Add a regex role mapperYou can add a regex-role-mapper to the Elytron subsystem by specifying:pattern string that will be tested by a regex in order to identify which of the input roles are matchingreplacement string that the resulting security roles should be mapped tokeep-non-mapped attribute that specifies whether to keep the roles that did not match the pattern or discard them from resulting rolesreplace-all attribute that specifies whether to replace all of the occurrences or only the first occurrence of the pattern in the resulting security role.Default value of keep-non-mapped is true and of replace-all is false.Regex role mapper in the example below will extract the domain part from input roles that are in form of an email address in order to convert them to the {extracted_domain}-role format. E.g.: user@gmail.com and user@customApp.com input roles would result in gmail-role and customerApp-role security roles. Attribute keep-non-mapped=\"true\" is used to keep the roles that do not match the regex (those that were not in form of an email).&lt;mappers&gt;...\t&lt;regex-role-mapper name=\"my-rrm\" pattern=\".*@([a-z]*)\\..*\" replacement=\"$1-role\" keep-non-mapped=\"true\"/&gt;...&lt;/mappers&gt;ExampleConnect to the WildFly CLI and add security domain to the Elytron subsystem with identity that contains roles 123-user, 123-admin.Also add regex-role-mapper and apply it to this security domain. This regex-role-mapper will map roles that match .*-([a-z]*) to the role $1:/subsystem=elytron/filesystem-realm=myFsRealm:add(path=my-fs-realm-users,relative-to=jboss.server.config.dir)/subsystem=elytron/filesystem-realm=myFsRealm:add-identity(identity=joe)/subsystem=elytron/filesystem-realm=myFsRealm:add-identity-attribute(identity=joe, name=Roles, value=[\"123-user\",\"123-admin\"])/subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)/subsystem=elytron/regex-role-mapper=rrm:add(pattern=\".*-([a-z]*)\", replacement=\"$1\", keep-non-mapped=\"false\", replace-all=\"false\")/subsystem=elytron/security-domain=mySD:add(realms=[{realm=myFsRealm,role-decoder=from-roles-attribute}],role-mapper=rrm,default-realm=myFsRealm,permission-mapper=default-permission-mapper)Check that when asked for roles of the identity from given security domain, the regex will be used and resulted roles will be correctly mapped from 123-user, 123-admin to user and admin:/subsystem=elytron/security-domain=mySD:read-identity(name=joe){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {        \"name\" =&gt; \"joe\",        \"attributes\" =&gt; {\"Roles\" =&gt; [            \"123-user\",            \"123-admin\"        ]},        \"roles\" =&gt; [            \"admin\",            \"user\"        ]    }}SummaryThis blog post has given an overview on how to use regex-role-mapper in Elytron subsystem.",
        "url": "
          
            /blog/regex-role-mapper/
          "
      }
      ,
    
      "blog-planned-security-features-for-wildfly-21": {
        "title": "Planned Security Features for WildFly",
        "author": "fjuma",
        "category": "",
        "content": "Since the feature development phase for WildFly 21 has now started, we wanted to highlight thenew security features that we will be working on.Planned FeaturesSecurity Realm EnhancementsWFCORE-4485 Support for multiple security realms - Distributed IdentitiesThis new feature will make it possible to use multiple security realms by sequentially invoking the each of the configuredrealms until a realm that contains the identity is found. More details can be found here.WFCORE-4486 Support for multiple security realms - FailoverIf a security realm becomes unavailable for some reason, it will be possible to failover to an alternate realm. More detailscan be found here.Client IntegrationELY-1891 Revisit Rest integration with WildFly Elytron - AuthenticationClient for Authentication / SSLThis feature looks at security integration for RESTEasy clients. More information about this feature can be found here.Expression ResolutionWFC0RE-4360 Support expression resolution backed by a credential storeCurrently, credential store references can be used anywhere in the model where a credential needs to be specified.This feature will make it possible to encrypt other attribute values stored in the management model. More details can be found here.Additional Authentication MechanismsWFC0RE-4484 Support SSH authentication for Git persistenceIt will be possible to use SSH authentication via Elytron when using Git to manage and persist your WildFly configuration file.More details are available here.WFC0RE-4853 Support for HTTP External authentication mechanismThis feature adds support for the HTTP External authentication mechanism with Elytron, making it possible toauthenticate a user based on credentials established externally. More details can be found here.WEJBHTTP-43 Ability to use BEARER/JWT authentication when using EJB over HTTPThis feature looks at adding support for BEARER/JWT authentication for EJB invocations over HTTP. More details can be found here.SSL/TLS EnhancementsWFCORE-4842 Add support for TLSv1.3 using the OpenSSL TLS providerWe recently added support for TLS 1.3 for WildFly when using the JSSE TLS provider with Elytron. This feature will alsoadd support for TLS 1.3 when using the OpenSSL TLS provider with Elytron. More information can be found here.ELY-1996 SSLContext to support delegation to alternate instances based on peer informationAs an SSLEngine is created, the host and port information is available at the time the engine is requested. This featurelooks at making use of this information to dynamically select alternative configurations.SummaryAs usual, please keep in mind that this blog post is a summary of our general plans and not a guaranteethat each of these features will be merged for WildFly 21. However, this blog post does give an indicationof our team’s current priorities. If any of these features are a priority for you, please let us know.Please also let us know if there are any security features that are missing that you would like to seeprioritized as we can take this kind of feedback into account for future releases.",
        "url": "
          
            /blog/planned-security-features-for-wildfly-21/
          "
      }
      ,
    
      "blog-advanced-ejb-security": {
        "title": "Advanced EJB: Securing EJBs using a FileSystem realm and invoking them from a remote client using a credential store",
        "author": "szaldana",
        "category": "",
        "content": "The ejb-security quickstart demonstrates an advanced example on how to secure EJBs using a FileSystem realm withSCRAM-SHA-512 SASL authentication along with a client credential store. The focus is on the Elytronconfiguration, so if you wish to learn more about using Jakarta EE declarative security to control access to EJBs pleaserefer to this blog.An Overview of the FileSystem RealmBy default, when using the Elytron security subsystem, our application uses a properties file-based identity store.In this example, we wish to use a FileSystem realm which stores the identity information on a FileSystem by paging each identity in an XMLalong with its credentials and roles.Configuring a FileSystem RealmWe start our configuration by connecting to the server using the following command:$ WILDFLY_HOME/bin/jboss-cli.sh --connectNote: Use of WILDFLY_HOMEIn the following post, replace WILDFLY_HOME with the actual path to your WildFly installation.We then create a FileSystem realm under the Elytron subsystem by specifying a directory where to store these identities. Noticein this case, we are storing the identities in a directory called fs-realm-users relative to jboss.server.config.dir:/subsystem=elytron/filesystem-realm=fsRealm:add(path=fs-realm-users, relative-to=jboss.server.config.dir)We can then add an identity, along with its password and role. For the implementation of this example, we need an identityquickstartUser, whose password is quickstartPwd1! and whose Role is guest:/subsystem=elytron/filesystem-realm=fsRealm:add-identity(identity=quickstartUser)/subsystem=elytron/filesystem-realm=fsRealm:set-password(clear={password=quickstartPwd1!}, identity=quickstartUser)/subsystem=elytron/filesystem-realm=fsRealm:add-identity-attribute(identity=quickstartUser, name=Roles, value=[guest])We then add a role decoder which will convert attributes from the identity provided by the security realm into roles:/subsystem=elytron/simple-role-decoder=from-roles-attribute:add(attribute=Roles)For more information about creating FileSystem realms along with all of its possible configurations,please refer to the Elytron documentation.Configuring the Security DomainWe first configure an Elytron security domain called fsSD to use the FileSystem realm and role decoder we specifiedas follows:/subsystem=elytron/security-domain=fsSD:add(realms=[{realm=fsRealm, role-decoder=from-roles-attribute}], default-realm=fsRealm,permission-mapper=default-permission-mapper)Note that creating an additional security domain (fsSD in this case) is not necessary. We could alternatively take the default ApplicationDomain and add theFileSystem realm, role-decoder and permission-mapper to it.We configure a security domain other in our EJB (as demonstrated by the @SecurityDomainannotation). Since security for EJBs is handled by legacy security subsystems when deploying with WildFly,we need to configure the security subsystem to be handled by Elytron by adding our security domain mapping in theEJB subsystem as follows:/subsystem=ejb3/application-security-domain=other:add(security-domain=fsSD)Enabling SCRAM-SHA-512Multiple authentication mechanisms can be configured for different protocols. Elytron provides support for two types ofauthentication: HTTP authentication and SASL  authentication. We want our SASL authentication factory to makeuse of the FileSystem security domain we configured. Therefore, we add said security domain as follows:/subsystem=elytron/sasl-authentication-factory=application-sasl-authentication:write-attribute(name=security-domain, value=fsSD)By default, our authentication factory has enabled JBOSS-LOCAL-USER and DIGEST-MD5. Therefore, we enable SCRAM-SHA-512as an additional SASL authentication mechanism by updating thesasl-authentication-factory as follows:/subsystem=elytron/sasl-authentication-factory=application-sasl-authentication:list-add(name=mechanism-configurations, value={mechanism-name=SCRAM-SHA-512})Finally, we update the http-remoting-connector to use our updated application-sasl-authentication-factory as follows:/subsystem=remoting/http-connector=http-remoting-connector:write-attribute(name=sasl-authentication-factory,value=application-sasl-authentication).Configuring the Credential StoreFor the purpose of this example, we aim to provide a more secure setup than specifying the client&#8217;s password inclear-text in the wildfly-config.xml file. As a result, we create a credential store locally as follows: $ WILDFLY_HOME/bin/elytron-tool.sh credential-store --create --location \"/PATH/TO/mycredstore.cs\" --password StorePasswordNote this creates a credential store mycredstore.cs locally with a corresponding password StorePassword. We thenadd an alias (quickstartUser) storing the password (quickstartPwd1!) to be used for the authentication configuration as follows: $ WILDFLY_HOME/bin/elytron-tool.sh credential-store --location \"/PATH/TO/mycredstore.cs\" --password StorePassword --add quickstartUser --secret quickstartPwd1!Configuring the Client (wildfly-config.xml)Upon inspecting our wildfly-config.xml, notice how the credential store to be used by the authentication client isspecified:&lt;credential-stores&gt;    &lt;credential-store name=\"mycredstore\"&gt;        &lt;attributes&gt;            &lt;attribute name=\"keyStoreType\" value=\"JCEKS\"/&gt;            &lt;attribute name=\"location\" value=\"PATH/TO/mycredstore.cs\"&gt;&lt;/attribute&gt;        &lt;/attributes&gt;            &lt;protection-parameter-credentials&gt;                &lt;clear-password password=\"StorePassword\"/&gt;        &lt;/protection-parameter-credentials&gt;    &lt;/credential-store&gt;&lt;/credential-stores&gt;Note you would need to replace \"PATH/TO/mycredstore.cs\" with the actual path to your credential store.Then, notice the reference to our credential store along with the alias to extract the password from, and thespecification of the desired authentication mechanism under the &lt;authentication-configurations&gt; tag:&lt;authentication-configurations&gt;    &lt;configuration name=\"default-config\"&gt;        &lt;set-user-name name=\"quickstartUser\"/&gt;        &lt;credentials&gt;            &lt;credential-store-reference store=\"mycredstore\" alias=\"quickstartUser\"/&gt;        &lt;/credentials&gt;        &lt;sasl-mechanism-selector selector=\"SCRAM-SHA-512\"/&gt;        &lt;providers&gt;            &lt;use-service-loader /&gt;        &lt;/providers&gt;    &lt;/configuration&gt;&lt;/authentication-configurations&gt;Also, note the &lt;providers&gt; tag which will result in the Elytron providers being registered.SummaryIn this blog post, we have taken a look at FileSystem realms, SCRAM-SHA-512 authentication and client credentialstores. This post described how to configure these components in relation to EJB security.",
        "url": "
          
            /blog/advanced-ejb-security/
          "
      }
      ,
    
      "blog-using-remote-client-ip-for-authorization": {
        "title": "Using the IP Address of a Remote Client for Authorization Decisions",
        "author": "fjuma",
        "category": "",
        "content": "WildFly 20 adds the ability to make use of the IP address of a remote client when makingauthorization decisions. This blog post will give an overview of this new feature.Authorization DecisionsRoles and permissions can be assigned to a security identity based on attributes that areloaded from the identity&#8217;s security realm. Sometimes it might be necessary to also takeinto account the IP address of a remote client when making authorization decisions. As anexample, we might want to make use of the IP address of a remote client in order to assigna user a particular role when establishing a connection to the server from a corporatenetwork and a different role when establishing a connection to the server from a differentnetwork. This can now be done using a new role decoder in the Elytron subsystem.Source Address Role DecoderA role decoder that assigns roles to an identity based on the IP address of the remote clientcan be configured using a new source-address-role-decoder resource in the Elytron subsystem.For example, a source-address-role-decoder can be added as follows:/subsystem=elytron/source-address-role-decoder=myRoleDecoder:add(source-address=\"10.10.10.10\", roles=[admin])The source-address attribute in the above command specifies the IP address. Instead ofspecifying the IP address directly, it&#8217;s also possible to use the patternattribute instead to configure a regular expression that specifies the IP address to match.Only one of source-address and pattern should be specified. The roles attribute indicatesthe list of roles to assign to the identity if the IP address of the remote client matches theconfigured source-address or pattern. The above example command specifies that an identityshould be assigned the admin role when establishing a connection to the server from the10.10.10.10 IP address.Once a source-address-role-decoder has been configured, it can be referenced from asecurity-domain. In the rest of this post, we&#8217;re going to go through a complete example thatshows how to make use of this new resource. We&#8217;re going to be using the EJB Clientto attempt to invoke a secured EJB that has been deployed to WildFly. We&#8217;re going to tryconnecting to the server from different IP addresses.Example ProjectFirst, clone the elytron-examples repo locally:git clone https://github.com/wildfly-security-incubator/elytron-examplescd elytron-examplesWe&#8217;re going to be looking at the source-address-role-decoder project.Server ConfigurationA WildFly CLI script that contains all of the commands used in this example can be found in thesource-address-role-decoderproject.Prerequisite ConfigurationLet’s first add a user - this is the user that we’re going to use later on when attempting to invoke the EJB.For this example, we’re going to create a filesystem-based identity store and add a user named alice with password alice123+ usingthe following CLI commands:/subsystem=elytron/filesystem-realm=exampleRealm:add(path=fs-realm-users,relative-to=jboss.server.config.dir)/subsystem=elytron/filesystem-realm=exampleRealm:add-identity(identity=alice)/subsystem=elytron/filesystem-realm=exampleRealm:set-password(identity=alice,clear={password=alice123+})/subsystem=elytron/filesystem-realm=exampleRealm:add-identity-attribute(identity=alice,name=Roles,value=[employee])Next, we’re going to add the filesystem-realm that we just created to the ApplicationDomain security domain that is alreadydefined in the default Elytron subsystem configuration and we’re going to make this the default security realm for this security domain:/subsystem=elytron/security-domain=ApplicationDomain:list-add(name=realms, value={realm=exampleRealm})/subsystem=elytron/security-domain=ApplicationDomain:write-attribute(name=default-realm, value=exampleRealm)Finally, we&#8217;ll add an application-security-domain mapping in the EJB3 subsystem to indicate that security for EJBs shouldbe handled by Elytron. We&#8217;ll also update the http-remoting-connector in the Remoting subsystem to reference the SASL authenticationfactory that is backed by our Elytron security domain./subsystem=ejb3/application-security-domain=other:add(security-domain=ApplicationDomain)/subsystem=remoting/http-connector=http-remoting-connector:write-attribute(name=sasl-authentication-factory, value=application-sasl-authentication)/subsystem=remoting/http-connector=http-remoting-connector:undefine-attribute(name=security-realm)Finally, let&#8217;s reload the server using the :reload command.Configuring a Source Address Role DecoderNotice that in the prerequisite configuration above, the filesystem-based identity store only assigns alice theemployee role. Let&#8217;s say that we want to assign a user an additional role, admin, if she is connecting fromthe 127.0.0.2 IP address. We can configure this as follows:/subsystem=elytron/source-address-role-decoder=ipRoleDecoder1:add(source-address=\"127.0.0.2\", roles=[admin])To make use of this new role decoder, we can update our security domain to reference it:/subsystem=elytron/security-domain=ApplicationDomain:write-attribute(name=role-decoder,value=ipRoleDecoder1)reloadDeploying the EJBNow that we&#8217;ve finished configuring our server, let&#8217;s deploy our EJB. From the $PATH_TO_ELYTRON_EXAMPLES/source-address-role-decoderdirectory, run the following command:mvn clean install wildfly:deployClient ConfigurationThe client configuration that we will be using for this example can be found in $PATH_TO_ELYTRON_EXAMPLES/src/main/resources/wildfly-config.xml.Notice that this file contains all of the information that&#8217;s needed to connect to the server. In particular, it specifies thatwe want to use alice as the username and it also specifies her password. (It also specifies that we want to use\"127.0.0.2\" as the IP address for our EJB Client. We are using this for demonstration purposes here since our serverand client are both running locally.)Our RemoteClientis going to look up the EJB that&#8217;s deployed on the server and it&#8217;s going to invoke two methods using thatEJB. The first method it invokes requires the employee role. This method simply returns the principal name. The secondmethod our client invokes requires admin role.Let&#8217;s run the client:mvn exec:execNow, let&#8217;s take a closer look at the output:* * * * * * * * * * * * * * * * * * * * * * * * * * * * * *Successfully called secured bean, caller principal alicePrincipal has admin permission: true* * * * * * * * * * * * * * * * * * * * * * * * * * * * * *We can see that we were able to successfully invoke both EJB methods. This is because our filesystem-basedidentity store assigns alice the employee role that&#8217;s required to invoke the first method. Oursource-address-role-decoder assigns alice the admin role since the IP address of our remoteclient is 127.0.0.2.Now, let&#8217;s update our $PATH_TO_ELYTRON_EXAMPLES/src/main/resources/wildfly-config.xml file so that a different IP address will be used for our remote client.To do this, we&#8217;re going to update the bind-address as follows:&lt;bind-address bind-address=\"127.0.0.3\" bind-port=\"61111\" match=\"0.0.0.0/0\"/&gt;Now, try running the client and inspecting the output again:mvn clean install exec:exec* * * * * * * * * * * * * * * * * * * * * * * * * * * * * *Successfully called secured bean, caller principal alicePrincipal has admin permission: false* * * * * * * * * * * * * * * * * * * * * * * * * * * * * *Notice that this time, only one of the two EJB methods can be successfully invoked. In particular,since alice is now connecting from 127.0.0.3 (instead of from 127.0.0.2), our source-address-role-decoderno longer assigns alice the admin role. Thus, she is unable to invoke the method that requires admin role.Aggregate Role DecodersNote that it&#8217;s also possible to configure an aggregate-role-decoder that is made up of two or more role decoders, as shown in thefollowing example:/subsystem=elytron/source-address-role-decoder=ipRoleDecoder1:add(source-address=\"127.0.0.2\", roles=[admin])/subsystem=elytron/source-address-role-decoder=ipRoleDecoder2:add(source-address=\"127.0.0.3\", roles=[guest])/subsystem=elytron/aggregate-role-decoder=myAggregateRoleDecoder:add(role-decoders=[ipRoleDecoder1,ipRoleDecoder2])Each role decoder will be attempted and the returned roles will be a union of the roles returned by each decoder.SummaryThis blog post has given an overview of how to make use of an IP address of a remote client for authorizationdecisions. For more information, be sure to take a look at the Elytron documentation.",
        "url": "
          
            /blog/using-remote-client-ip-for-authorization/
          "
      }
      ,
    
      "blog-automatic-credential-store-updates": {
        "title": "Automatic Credential Store Updates",
        "author": "fjuma",
        "category": "",
        "content": "WildFly 20 adds support for automatic credential store updates. This blog post will give an overview of thisnew feature.Credential StoresCredential stores allow credentials to be stored securely. When adding a credential to a store, it is associatedwith an alias. This alias is then subsequently used to reference the credential from the store instead ofneeding to specify the credential directly. As an example, when configuring a key-store in the Elytronsubsystem, we need to specify the keystore password. Instead of specifying the password in clear text, wecan first add the keystore password to a credential store and then reference the alias that we associated withthat password, as shown below.First, let&#8217;s create a credential store:/subsystem=elytron/credential-store=myCredStore:add(location=mycredstore.cs, relative-to=jboss.server.config.dir, credential-reference={clear-text=StorePassword}, create=true)Next, we&#8217;ll add our keystore password to this store and associate it with the alias example:/subsystem=elytron/credential-store=myCredStore:add-alias(alias=example, secret-value=mySecretPassword)Finally, we&#8217;ll reference our credential store and alias when configuring our key-store:/subsystem=elytron/key-store=myKS:add(relative-to=jboss.server.config.dir, path=my.keystore, type=JCEKS, credential-reference={store=myCredStore, alias=example})The credential-reference attribute above is used to reference a credential from a credential store. Notice that thecredential-reference has two attributes, store and alias. The store attribute indicates the credential store.The alias attribute indicates the entry in the credential store that holds our credential. Besides the key-storeresource, there are many other resources in the WildFly management model that allow a credential-reference to bespecified.Notice that in the above example, we first had to add our credential to the store before being able to reference itfrom a credential-reference.Automatic Credential Store UpdatesInstead of needing to first add a credential to a credential store, WildFly 20 adds the ability to automaticallyadd a credential to a previously defined credential store by specifying both the store and clear-text attributesfor a credential-reference. In particular, when configuring a new credential-reference with both the store andclear-text attributes specified, the following will happen:If the alias attribute is also specified, one of the following will occur:If the configured credential store does not contain an entry for the given alias, a new entry will be added to thecredential store to hold the clear text password that was specified. The clear-text attribute will then be removedfrom the management model.If the credential store does contain an entry for the given alias, the existing credential will be replaced withthe clear text password that was specified. The clear-text attribute will then be removed from the management model.If the alias attribute is not specified, an alias will be generated and a new entry will be added to the credentialstore to hold the clear text password that was specified. The clear-text attribute will then be removed from themanagement model.We&#8217;re going to take a look at some examples in the next sections.Automatically Adding a Credential to a StoreWe&#8217;re first going to configure another key-store in the Elytron subsystem but this time we&#8217;re not going to add thekeystore password to the credential store ourselves:/subsystem=elytron/key-store=newKS1:add(relative-to=jboss.server.config.dir, path=new.keystore, type=JCEKS, credential-reference={store=myCredStore, alias=myNewAlias, clear-text=myNewPassword}){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {\"credential-store-update\" =&gt; {        \"status\" =&gt; \"new-entry-added\",        \"new-alias\" =&gt; \"myNewAlias\"    }}}Notice that the credential-reference attribute for the new key-store we are configuring specifies the store, alias,and clear-text attributes. The store attribute references the credential store that we already created. The aliasattribute specified is myNewAlias and the clear-text attribute specified is myNewPassword. Since our credential storedoes not already contain the specified alias, the above command will result in a new entry being automatically added toour credential store, myCredStore, with alias myNewAlias and credential myNewPassword.We can check the aliases that are in the credential store to confirm that we see the new alias there:/subsystem=elytron/credential-store=myCredStore:read-aliases(){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; [        \"mynewalias\",        \"example\"    ],    \"response-headers\" =&gt; {\"process-state\" =&gt; \"reload-required\"}}If we take a look at our newly configured key-store, we can see that its credential-reference attribute onlyreferences the credential store and the alias, it does not reference the clear text password:/subsystem=elytron/key-store=newKS1:read-attribute(name=credential-reference){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {        \"store\" =&gt; \"myCredStore\",        \"alias\" =&gt; \"myNewAlias\",        \"clear-text\" =&gt; undefined    },    \"response-headers\" =&gt; {\"process-state\" =&gt; \"reload-required\"}}If we hadn&#8217;t specified the alias attribute in our credential-reference when configuring our key-store, a new aliaswould have been generated automatically for us:/subsystem=elytron/key-store=newKS2:add(relative-to=jboss.server.config.dir, path=new.keystore, type=JCEKS, credential-reference={store=myCredStore, clear-text=myNewPassword}){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {\"credential-store-update\" =&gt; {        \"status\" =&gt; \"new-entry-added\",        \"new-alias\" =&gt; \"kgoxia900g\"    }},    \"response-headers\" =&gt; {\"process-state\" =&gt; \"reload-required\"}}The above command will result in a new entry being automatically added to our credential store, myCredStore, withthe generated alias, kgoxia900g, and credential myNewPassword. If we take a look at our newly configured key-store,we can see that its credential-reference attribute references the credential store and the newly generated alias only:/subsystem=elytron/key-store=newKS2:read-attribute(name=credential-reference){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {        \"store\" =&gt; \"myCredStore\",        \"clear-text\" =&gt; undefined,        \"alias\" =&gt; \"kgoxia900g\"    },    \"response-headers\" =&gt; {\"process-state\" =&gt; \"reload-required\"}}Automatically Updating an Existing Credential in a StoreIf we update an existing credential-reference attribute that contains both the alias and store attributes to alsospecify the clear-text attribute, the existing credential in the configured credential store will be replaced with theclear text password that was specified. The clear-text attribute will then be removed from the management model. As anexample, the following command will result in updating the credential for the myNewAlias entry from our previous example:/subsystem=elytron/key-store=newKS1:write-attribute(name=credential-reference.clear-text, value=myUpdatedPassword){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {\"credential-store-update\" =&gt; {\"status\" =&gt; \"existing-entry-updated\"}},    \"response-headers\" =&gt; {        \"operation-requires-reload\" =&gt; true,        \"process-state\" =&gt; \"reload-required\"    }}SummaryThis blog post has given an overview of how credentials can be automatically added to a credential store and howexisting credentials in a credential store can be automatically updated. This means that users no longer need toadd credentials to a credential store or update existing credentials in a store before being able to reference themfrom a credential-reference. Take a look at the Elytron documentationfor more details.",
        "url": "
          
            /blog/automatic-credential-store-updates/
          "
      }
      ,
    
      "blog-elytron-acme-client-implementation": {
        "title": "Elytron's ACME Client Implementation",
        "author": "fjuma",
        "category": "",
        "content": "The Automated Certificate Management Environment (ACME) protocol became anIETF standard a little overa year ago. This protocol makes it possible to automate the process of obtaining signedcertificates from a certificate authority without the need for human intervention. The WildFly Elytronproject provides a Java ACME client SPI that has been integrated in WildFly for quite some time now,making it possible toautomatically obtain and manage signed certificates from any certificateauthority that implements the ACME protocol using WildFly CLI commands. It is also possible to integrate Elytron&#8217;sACME client SPI in other web server environments. In this blog post, we&#8217;regoing to take a closer look at this SPI and how to make use of it.Note: A discussion has been startedon possibly moving Elytron&#8217;s ACME Client SPI to a new SmallRye project incase other projects find it easier to consume SmallRye components instead of WildFly Elytron components.Keep an eye on the discussion there for updates and feel free to add your thoughts there as well.An Overview of the ACME ProtocolElytron&#8217;s ACME Client SPICreating an implementation of AcmeClientSpiUsing your ACME client implementationCreating a certificate authority accountUpdating the contact URLs associated with a certificate authority accountObtaining a certificate from a certificate authorityAutomating certificate renewalsRevoking a certificateUpdating a certificate authority account keyDeactivating an accountSummaryAn Overview of the ACME ProtocolLet&#8217;s Encrypt is an example of a certificate authority that implements the ACME protocol.To obtain signed certificates from Let&#8217;s Encrypt, or any certificate authority that implements theACME protocol, an ACME client is needed. An ACME client requests signed certificates by sendingJSON messages to the desired certificate authority over HTTPS. The certificate authority issueschallenges to the ACME client to prove ownership of the requested domain name(s). Thechallenges usually require having the ACME client set up resources at specific paths with specificcontent to prove control of the domain name(s) being requested. If the ACME client is able tocomplete these challenges successfully, the certificate authority will issue a signed certificate.Elytron&#8217;s ACME Client SPILet&#8217;s take a look now at Elytron&#8217;sAcmeClientSpi.This abstract class contains methods for creating and managing an account with a certificate authority as wellas methods for obtaining and revoking certificates from a certificate authority. These methods have already beenimplemented as specified in RFC 8555.Creating an implementation of AcmeClientSpiNotice that there are twoabstract methods in AcmeClientSpi, proveIdentifierControland cleanupAfterChallenge.These are the only two methods that a class that extends AcmeClientSpi is required to implement. This means that tomake use of Elytron&#8217;s AcmeClientSpi in your web server environment, the main step is to create a class that extendsAcmeClientSpi and implements proveIdentifierControl and cleanupAfterChallenge. We&#8217;ll see how your proveIdentifierControland cleanUpAfterChallenge method implementations will get used in the section onobtaining a certificate from a certificate authority.Implementing proveIdentifierControlpublic abstract AcmeChallenge proveIdentifierControl​(AcmeAccount account, java.util.List&lt;AcmeChallenge&gt; challenges) throws AcmeExceptionThis method is used to prove control of the identifier (i.e., domain name) associated with the givenlist of challenges. In particular, this method should select one challenge from the given list ofchallenges from the certificate authority and then this method should take the steps necessary torespond to the challenge in order to prove that your ACME client does indeed control the domain namethat is being requested. This method should return the challenge that was selected.An AcmeException should be thrown if an error occurs while attempting to prove control of theidentifier associated with the challenges or if none of the challenge types are supported.As an example, take a look at the proveIdentifierControlmethod implementation in our WildFlyAcmeClient. This class extends AcmeClientSpi and is the ACME clientimplementation that is used by WildFly. Notice that this proveIdentifierControl implementation selects the HTTP challenge typeand it then responds to this challenge by provisioning an HTTP resource under the domain name. In particular,it provisions a new file that contains the key authorization and makes this file availableusing the DOMAIN_NAME/.well-known/acme-challenge/TOKEN URL. The TOKEN value and the key authorizationare obtained using the AcmeChallenge#getTokenand AcmeChallenge#getKeyAuthorization methods.Implementing cleanupAfterChallengepublic abstract void cleanupAfterChallenge​(AcmeAccount account, AcmeChallenge challenge) throws AcmeExceptionThis method is used to undo the actions that were taken to prove control of the identifier associated withthe given challenge. In particular, once your ACME client has successfully responded to the given challenge viathe proveIdentifierControl method, any resources that were provisioned there can be cleaned up. AnAcmeException should be thrown if an error occurs while attempting to undo the actions that were taken toprove control of the identifier associated with the given challenge.As an example, take a look at the cleanupAfterChallengemethod implementation in our WildFlyAcmeClient. Notice that this cleanupAfterChallenge implementationsimply deletes the file that was created to prove control of the identifier associated with the challenge.Using your ACME client implementationOnce you have a created a class that extends AcmeClientSpi and implements the two methods that havebeen described above, you are ready to start using your ACME client to obtain certificates for yourweb server:AcmeClientSpi acmeClient = // Your ACME client implementation should be loaded hereA java.util.ServiceLoadercan be used to load your AcmeClientSpi implementation. As an example, take a look at how thisis done in WildFly. The corresponding META-INF/services descriptor can be seen here.Creating a certificate authority accountBefore obtaining your first certificate from a certificate authority that implements the ACME protocol,you need to create an account with that certificate authority. This can be done using AcmeClientSpi#createAccount.First, we&#8217;re going to create an AcmeAccount instance that contains information about the account we want to create. We&#8217;regoing to do this using an AcmeAccount.Builder:AcmeAccount acmeAccount = AcmeAccount.builder()    .setTermsOfServiceAgreed(true)    .setServerUrl(\"https://acme-v02.api.letsencrypt.org/directory\")    .setStagingServerUrl(\"https://acme-staging-v02.api.letsencrypt.org/directory\")    .setContactUrls(new String[] { \"mailto:admin@example.com\" })    .build();In the example above, we&#8217;re creating an AcmeAccount instance to be used with the Let&#8217;s Encrypt certificate authority.Notice that we&#8217;re indicating that we agree to this certificate authority&#8217;s terms of service. The server URL is Let&#8217;s Encrypt&#8217;sACME server endpoint URL. The staging server URL that we&#8217;ve specified is optional and meant to be usedwhen obtaining certificates in a staging environment for testing purposes. Finally, we&#8217;ve also specified a contact URL.This is an optional list of contact URLs that the certificate authority can use to notify you about any issues withyour account. The AcmeAccount.build() method will generate an account key for you that will be used by your ACME clientwhen communicating with the certificate authority. The generated account key pair can be obtained usingAcmeAccount#getPublicKey and AcmeAccount#getPrivateKey.You can store this key pair in a Java key store. Instead of generating an account key, if you have an existing account keythat you want to use, the AcmeAccount.Builder#setKeymethod can be used.Now we can use our ACME client&#8217;s createAccount method to create an account with the certificate authority using theinformation from our AcmeAccount instance:acmeClient.createAccount(acmeAccount, false)Notice that the second parameter indicates whether or not the staging server URL should be used when communicatingwith the certificate authority. We are setting this to false since we don&#8217;t want to using the staging URL, i.e., goingback to our example, we want to use https://acme-v02.api.letsencrypt.org/directory when communicating with Let&#8217;s Encrypt.The createAccount method will return true if the account was created or false if the account already existed.In both cases, acmeAccount#getAccountUrl can then be used to obtain the new or existing account URL that was providedby the certificate authority.Updating the contact URLs associated with a certificate authority accountTo update the contact URLs associated with an existing account, the AcmeClientSpi#updateAccount method can be used:acmeClient.updateAccount(acmeAccount, false, new String[] { \"mailto:admin@example.com\", \"mailto:anotheradmin@example.com\"});The first parameter is our AcmeAccount instance that contains the information associated with our account.The second parameter indicates whether or not the staging server URL should be used when communicating with thecertificate authority. The last parameter includes our updated contact URLs.Obtaining a certificate from a certificate authorityTo obtain a certifcate from a certificate authority, the AcmeClientSpi#obtainCertificate method can be used.This method will prove ownership of the requested domain name(s) using your proveIdentifierControl implementation. This methodwill also generate a key pair, generate a certificate signing request (CSR) using the generated key pair and the requesteddomain names, and it will submit this CSR to the certificate authority. If successful, this method will retrieve theresulting certificate chain from the certificate authority. Finally, this method uses your cleanupAfterChallenge implementationto undo any actions that were taken to prove control of your requested domain name(s). The following example shows howto obtain a certificate for www.example.com using our AcmeAccount instance:X509CertificateChainAndSigningKey certChainAndPrivateKey = acmeClient.obtainCertificateChain(acmeAccount, false, \"www.example.com\");The first parameter is our AcmeAccount instance that contains the information associated with our account.The second parameter indicates whether or not the staging server URL should be used when communicating with thecertificate authority. The last parameter(s) is the domain name(s) that we want to request a certificate for.If you want, you can also specify the key algorithm and the key size that the ACME client should use whengenerating the certificate signing request that will be sent to the certificate authority:X509CertificateChainAndSigningKey certChainAndPrivateKey = acmeClient.obtainCertificateChain(acmeAccount, false, \"EC\", 256, \"www.example.com\");Notice that the obtainCertificateChain method returns an X509CertificateChainAndSigningKey,which consists of the X.509 certificate chain that was obtained from the certificate authority as well as the private key for yourweb server that the ACME client generated for you. These can be obtained using the X509CertificateChainAndSigningKey#getCertificateChain method andthe X509CertificateChainAndSigningKey#getSigningKey method. You can store this key pair in a Java key store.Automating certificate renewalsSome certificate authorities, like Let&#8217;s Encrypt, recommend renewing your web server&#8217;s certificate every 60 days. Renewalscan be easily automated by creating a script that checks if your web server&#8217;s certificate is due for renewal in the next 30 days and ifso, the AcmeClientSpi#obtainCertificateChain method can simply be used to obtain a new certificate. To see an exampleof how this can be done using WildFly, take a look here.Revoking a certificateIf you need to revoke a certificate that was issued by a certificate authority, the AcmeClientSpi#revokeCertificate method can be used.For example, to revoke a certificate due to a key compromise, the following can be used:acmeClient.revokeCertificate(acmeAccount, false, certificateToRevoke, CRLReason.KEY_COMPROMISE);The first parameter is our AcmeAccount instance that contains the information associated with our account.The second parameter indicates whether or not the staging server URL should be used when communicating with thecertificate authority. The third parameter is the X509Certificate that you want to revoke. The fourth parameteris optional and indicates the reason for revoking the certificate. Take a look at CRLReasonto see the values that can be specified here.Updating a certificate authority account keyIf you ever need to change the key that is associated with your certificate authority account, theAcmeClientSpi#changeAccountKeymethod can be used:acmeClient.changeAccountKey(acmeAccount, false);The first parameter is our AcmeAccount instance that contains the information associated with our account.The second parameter indicates whether or not the staging server URL should be used when communicating with thecertificate authority.Deactivating an accountIf you need to deactivate a certificate authority account, the AcmeClientSpi#deactivateAccountmethod can be used.acmeClient.deactivateAccount(acmeAccount, false);The first parameter is our AcmeAccount instance that contains the information associated with our account.The second parameter indicates whether or not the staging server URL should be used when communicating with thecertificate authority.SummaryIn this blog post, we&#8217;ve taken a detailed look at Elytron&#8217;s ACME client SPI. This SPI has already been integrated in WildFly,making it possible to automatically obtain and manage signed certificates using WildFly&#8217;s CLI. This blog post has describedhow Elytron&#8217;s ACME client SPI can also be used in other web server environments.",
        "url": "
          
            /blog/elytron-acme-client-implementation/
          "
      }
      ,
    
      "blog-server-side-sni-matching-with-wildfly": {
        "title": "Server Side SNI Matching with WildFly",
        "author": "fjuma",
        "category": "",
        "content": "For quite some time now, WildFly has provided support for server side Server Name Indication (SNI) matching.This allows a WildFly instance with multiple virtual hosts that share a single IP address to present thecorrect certificate depending on the server name specified by the client via the SNI extension. This blogpost is going to go through a complete example to show how to configure this.Example ProjectFirst, clone the elytron-examples repo locally:git clone https://github.com/wildfly-security-incubator/elytron-examplescd elytron-examplesA WildFly CLI script that contains all of the commands used in this example can be found in theserver-ssl-sni-contextproject in the elytron-examples git repository.Virtual Host ConfigurationWe&#8217;re going to configure a WildFly instance with two virtual hosts: app1.com and app2.com. The first thingwe&#8217;re going to do is add a couple aliases for localhost in our /etc/hosts/ file:127.0.0.1 app1.com127.0.0.1 app2.comNext, we&#8217;re going to add the following virtual host configuration to the Undertow subsystem:/subsystem=undertow/server=default-server/host=app1:add(alias=[\"app1.com\"],default-web-module=app1.war)/subsystem=undertow/server=default-server/host=app2:add(alias=[\"app2.com\"],default-web-module=app2.war)We&#8217;re now going to deploy the two web applications from our server-ssl-sni-context example project:cd $PATH_TO_ELYTRON_EXAMPLES/server-ssl-sni-context/app1mvn wildfly:deploycd $PATH_TO_ELYTRON_EXAMPLES/server-ssl-sni-context/app2mvn wildfly:deployWe can now access our two virtual hosts using http://app1.com:8080 and http://app2.com:8080. In the next few sections,we&#8217;re going to go through the steps needed to configure one-way SSL and provide support for SNI matching.Certificate GenerationWe need a certificate for each virtual host that we have configured. Normally, you would obtain a signedcertificate from a trusted certificate authority for each virtual host. For this example, we&#8217;re simplygoing to generate and make use of self-signed certificates as shown in the following commands:/subsystem=elytron/key-store=serverKS:generate-key-pair(alias=app1,distinguished-name=\"CN=app1.com\",algorithm=RSA)/subsystem=elytron/key-store=serverKS:generate-key-pair(alias=app2,distinguished-name=\"CN=app2.com\",algorithm=RSA)/subsystem=elytron/key-store=serverKS:generate-key-pair(alias=localhost,distinguished-name=\"CN=localhost\",algorithm=RSA)Notice that we now have three different certificates: one that we want to use for app1.com, one that we want to use forapp2.com, and one that we want to use for localhost.SNI Matching ConfigurationNow that we have configured our server keystore, our next step is to generate a few key managers that will be usedto select each of the above certificates:/subsystem=elytron/key-manager=app1KM:add(key-store=serverKS,credential-reference={clear-text=secret},alias-filter=app1)/subsystem=elytron/key-manager=app2KM:add(key-store=serverKS,credential-reference={clear-text=secret},alias-filter=app2)/subsystem=elytron/key-manager=localhostKM:add(key-store=serverKS,credential-reference={clear-text=secret},alias-filter=localhost)Notice that app1KM will always select the certificate we want to use for app1.com. Similarly, app2KM will alwaysselect the certificate we want to use for app2.com. Finally, localhostKM will always select the certificate we want to usefor localhost.Next, we&#8217;re going to configure some server SSL contexts that make use of each of the above key managers:/subsystem=elytron/server-ssl-context=app1SSC:add(key-manager=app1KM)/subsystem=elytron/server-ssl-context=app2SSC:add(key-manager=app2KM)/subsystem=elytron/server-ssl-context=localhostSSC:add(key-manager=localhostKM)As an example, if app1SSC is in use, it will make use of the app1KM key manager which means that it willselect the certificate we want to use for app1.com.Finally, we can now configure a server SSL SNI context that makes use of our server SSL contexts:/subsystem=elytron/server-ssl-sni-context=sniSSC:add(default-ssl-context=localhostSSC, host-context-map={app1\\\\.com=app1SSC,app2\\\\.com=app2SSC})The above server SSL SNI context will ensure the correct certificate is presented to the client based on the SNIextension provided by the client. If the client does not specify this extension or if the value does not matchany of the hostnames from our host-context-map, then the default-ssl-context will be used.We&#8217;re now going to update our HTTPS listener configuration in the Undertow subsystem so that it referencesour server SSL SNI context:batch/subsystem=undertow/server=default-server/https-listener=https:undefine-attribute(name=security-realm)/subsystem=undertow/server=default-server/https-listener=https:write-attribute(name=ssl-context,value=sniSSC)run-batchreloadAccess app1.com and app2.com via HTTPSNow that we&#8217;ve enabled server side SNI matching, we can use our browser to access app1.com and app2.comvia HTTPS. Let&#8217;s first try to access https://app1.com:8443. Note that the browser is going to add the SNIextension with value app1.com in the ClientHello message it sends to the server at the beginning of theTLS handshake. Now, since the server&#8217;s certificate is self-signed, it won&#8217;t be trusted by your browser.You&#8217;ll need to manually confirm that this certificate is trusted or configure your browser to trust it.Inspect the certificate that was presented by the server. Notice that it&#8217;s the certificate for app1.com.Next, try accessing https://app2.com:8443. Inspect the certificate that was presented by the server. Noticethat this time, it&#8217;s the certificate for app2.com.Finally, try accessing https://localhost:8443. This time, the certificate presented by the server will bethe certificate for localhost.SummaryThis blog post has shown how to configure server side SNI matching for WildFly. For more details, take a lookat the Elytron documentation.",
        "url": "
          
            /blog/server-side-sni-matching-with-wildfly/
          "
      }
      ,
    
      "blog-ws-elytron-client-integration": {
        "title": "Web Services client integration with Elytron",
        "author": "dvilkola",
        "category": "",
        "content": "It is now possible for Web Services client to automatically load and use authentication configuration from Elytron client to connect to a secured server. This blog post will give an introduction to this new feature.Scope of the integrationElytron client must be on classpath during assigning of configurations for WS client in order for this integration to take place.WS client will automatically use username, password and SSL context configured in Elytron client. Credentials will be used for HTTP BASIC authentication or Username Token Profile authentication. Elytron client configuration was extended to include option that specifies which of these mechanisms should be used.Any existing configuration a client already had configured will not be re-written. Configuration specified by user in default WS client descriptor within the application (jaxws-client-config.xml) has precedence.Configure Elytron clientElytron client allows for both use of an Elytron API and pre-defined configurations in the xml file (wildfly-config.xml) to enable remote clients to authenticate using Elytron. For more information please see the documentation. SSL context configuration did not change and WS client will use it automatically.Below is an example of wildfly-config.xml that contains configuration of mechanisms that WS client should use with Elytron client credentials:&lt;authentication-configurations&gt;    ...    &lt;configuration&gt;        ...        &lt;webservices&gt;            &lt;ws-security type=\"UsernameToken\"&gt;            &lt;set-http-mechanism name=\"BASIC\"/&gt;        &lt;/webservices&gt;        ...    &lt;/configuration&gt;&lt;/authentication-configurations&gt;The &lt;webservices /&gt; element can optionally contain the following child elements:&lt;set-http-mechanism name=\"BASIC\"/&gt; This element is used to specify an HTTP mechanism that WS client should use to authenticate. Currently only the HTTP Basic authentication is supported and used as default.&lt;set-ws-security-type name=\"UsernameToken\"/&gt; This element is used to specify WS-Security type that WS client will use to authenticate with the server. Currently only Username Token Profile can be configured.It is also possible to configure these mechanisms programmatically:AuthenticationConfiguration ac = AuthenticationConfiguration.empty().useWebServices(                Map.ofEntries(                        entry(\"http-mechanism\", \"BASIC\"),                        entry(\"ws-security-type\", \"UsernameToken\")                ));The mechanisms will take effect only if both username and password are configured in Elytron client.Use Web Services clientJBossWS API comes with facility classes that can be used for assigning of configurations when building a client. For more information, you can take a look at the documentation here.For integration to work it is necessary to use jbossws-cxf client, specifically CXFClientConfigurer class and its method setConfigProperties. Whenever this method is called, with or without other WS config files, Elytron client credentials and SSLContext will be used if present. Below are possible uses of this method:Service service = Service.create(wsdlURL, serviceName);Endpoint port = service.getPort(Endpoint.class);CXFClientConfigurer configurer = new CXFClientConfigurer();configurer.setConfigProperties(port, null, null);   // use null value if there is no other WS configurationport.echo(\"Kermit\");...configurer.setConfigProperties(port, \"META-INF/my-client-config.xml\", \"Custom Client Config 3\");port.echo(\"Kermit\");...configurer.setConfigProperties(port, null, \"Container Custom Client Config\");port.echo(\"Kermit\");ExampleWorking example demonstrating this integration can be found here. In this example, two-way SSL is configured on the server. Additionally, HTTP BASIC authentication is required to connect to the server as well. Web Services client uses SSLContext and credentials from Elytron client to successfully connect to the server.SummaryThis blog post has given an overview on how Web Services client can use Elytron client configuration when connecting to a secured server. For more information you can take a look at Elytron client documentation andWeb Services reference guide.",
        "url": "
          
            /blog/ws-elytron-client-integration/
          "
      }
      ,
    
      "blog-tls-13-with-wildfly": {
        "title": "TLS 1.3 with WildFly",
        "author": "fjuma",
        "category": "",
        "content": "It is now possible to use TLS 1.3 with WildFly when running against JDK 11 or higher. This blog post will give anintroduction to this new feature.Disabled by DefaultThe use of TLS 1.3 is currently disabled by default with WildFly. This is because if JDK 11 is in use and if there is avery large number of TLS 1.3 requests coming in, it is possible that a drop in performance (i.e., throughput andresponse time) will occur compared to when using TLS 1.2 with WildFly. The good news is that simply upgrading to newerJDK versions should improve performance. It is recommended to test for performance degradation prior to enablingTLS 1.3 in a production environment.Enabling TLS 1.3 on the Server SideTLS 1.3 can be enabled by configuring the new cipher-suite-names attribute in the SSL Context resource definitionin the Elytron subsystem. Let&#8217;s take a look at a complete example.Pre-requisite ConfigurationAs a first step, we&#8217;re going to enable one-way SSL for applications deployed to WildFly using thesecurity enable-ssl-http-server CLI command:security enable-ssl-http-server --interactivePlease provide required pieces of information to enable SSL:Certificate info:Key-store file name (default default-server.keystore): server.keystorePassword (blank generated): secretWhat is your first and last name? [Unknown]: localhostWhat is the name of your organizational unit? [Unknown]:What is the name of your organization? [Unknown]:What is the name of your City or Locality? [Unknown]:What is the name of your State or Province? [Unknown]:What is the two-letter country code for this unit? [Unknown]:Is CN=localhost, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown correct y/n [y]?yValidity (in days, blank default): 30Alias (blank generated): localhostEnable SSL Mutual Authentication y/n (blank n):nSSL options:key store file: server.keystoredistinguished name: CN=localhost, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown,C=Unknownpassword: secretvalidity: 30alias: localhostServer keystore file server.keystore, certificate file server.pem and server.csr file will be generated in server configuration directory.Do you confirm y/n :yServer reloaded.SSL enabled for default-serverssl-context is ssl-context-6881a025-6c31-4bfe-ba4b-d8e7ebdde133key-manager is key-manager-6881a025-6c31-4bfe-ba4b-d8e7ebdde133key-store   is key-store-6881a025-6c31-4bfe-ba4b-d8e7ebdde133As we can see from the output, the above command automatically generated a self-signed server certificate, added it to anewly created keystore, and added a new ssl-context resource, ssl-context-6881a025-6c31-4bfe-ba4b-d8e7ebdde133, tothe Elytron subsystem in order to enable one-way SSL for applications deployed to WildFly.Now, let&#8217;s try to access the WildFly landing page using curl:curl -v -k https://localhost:8443* SSL connection using TLSv1.2 / ECDHE-RSA-AES256-GCM-SHA384* ALPN, server accepted to use h2* Server certificate:*  subject: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  start date: Feb 28 19:39:26 2020 GMT*  expire date: Mar 29 18:39:26 2020 GMT*  issuer: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  SSL certificate verify result: self signed certificate (18), continuing anyway.Since the security enable-ssl-http-server command simply generated a self-signed server certificate fortesting purposes, this server certificate won&#8217;t be trusted by curl. This is why we specified the -k optionin the curl command.Notice that in the above output, we can see that the TLS 1.2 protocol was used for the connectionand that the ECDHE-RSA-AES256-GCM-SHA384 cipher suite was used.Switching to TLS 1.3To enable TLS 1.3, we just need to update our ssl-context configuration in the Elytron subsystem to specify thecipher-suite-names attribute. The format of this attribute is colon separated list of the TLS 1.3 cipher suitesthat you would like to enable. We&#8217;re going to set this attribute to TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:# This is only needed when the ssl-context is configured to use specific protocol version(s) other# than TLS 1.3. In general, this is not needed when the protocols attribute is simply undefined./subsystem=elytron/server-ssl-context=ssl-context-6881a025-6c31-4bfe-ba4b-d8e7ebdde133:write-attribute(name=protocols,value=[TLSv1.3])/subsystem=elytron/server-ssl-context=ssl-context-6881a025-6c31-4bfe-ba4b-d8e7ebdde133:write-attribute(name=cipher-suite-names,value=TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256)reloadNow, let&#8217;s try to access the WildFly landing page using curl again:curl -v -k https://localhost:8443* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384* ALPN, server accepted to use h2* Server certificate:*  subject: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  start date: Feb 28 19:39:26 2020 GMT*  expire date: Mar 29 18:39:26 2020 GMT*  issuer: C=Unknown; ST=Unknown; L=Unknown; O=Unknown; OU=Unknown; CN=localhost*  SSL certificate verify result: self signed certificate (18), continuing anyway.Notice that this time, we can see that the TLS 1.3 protocol was used for the connection and that the TLS 1.3TLS_AES_256_GCM_SHA384 cipher suite was used.Enabling TLS 1.3 on the Client SideWhen using the Elytron authentication client, it is now also possible to use TLS 1.3 by configuring thecipher-suite names attribute in the ssl-context configuration. For more details on that, take a lookat the authentication client documentation.SummaryThis blog post has given an overview on how TLS 1.3 can be used with WildFly on both the server side and the clientside. For more details, take a look at the Elytron documentation.",
        "url": "
          
            /blog/tls-13-with-wildfly/
          "
      }
      ,
    
      "blog-new-security-features-in-wildfly-19": {
        "title": "New Security Features in WildFly 19",
        "author": "fjuma",
        "category": "",
        "content": "This blog post highlights the new security features that have been included in WildFly 19.Support for MicroProfile JWT 1.1Support has been added for the Eclipse MicroProfile JWT RBAC1.1.1 specification with the addition of a new microprofile-jwt-smallrye subsystem. Traditionally, security fordeployments would depend on resources defined within the management model to access local or remote stores containingthe definitions of the identities. Now, with minimal configuration contained within a deployment, MicroProfile JWTprovides the ability for authenticated identities to be established from the contents of cryptographically signed JWTtokens received with each request. To get started with MicroProfile JWT, check out thisquickstart.Support for TLS 1.3It is now possible to use TLS 1.3 with WildFly when running against JDK 11 or higher. However, there is an importantcaveat to be aware of. If JDK 11 is in use and if there is a very large number of TLS 1.3 requests being made, it ispossible that a drop in performance (throughput and response time) will occur compared to when using TLS 1.2 with WildFly.Simply upgrading to newer JDK versions should improve performance. For this reason, the use of TLS 1.3 is currentlydisabled by default. It is recommended to test for performance degradation prior to enabling TLS 1.3 in a productionenvironment. Take a look at this blog postto learn how to enable TLS 1.3.Web Services Integration with ElytronElytron already provides an API and a configuration file that can be used to configure client side security for outgoingcalls. It is now possible to use this Elytron client configuration with Web Services deployments. Take a look at thisblog post to see how a WebServices client can make use of Elytron client configuration.Resolution of System Properties in Permission FilesIt is now possible to enable/disable the resolution of system properties in the permissions.xml and jboss-permissions.xmlfiles. More details can be found here.Where to Find More InformationBe sure to check out our blog posts page, where we have all ourblog posts on Elytron features. If there is an Elytron topic you’d like to see a blog post on, feel free to let us knowon WildFly’s user forums.To learn more about Elytron, check out our new site.",
        "url": "
          
            /blog/new-security-features-in-wildfly-19/
          "
      }
      ,
    
      "blog-planned-security-features-for-wildfly-19": {
        "title": "Planned Security Features for WildFly 19",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/10/10/planned-security-features-for-wildfly-19
          "
      }
      ,
    
      "blog-configuring-an-aggregate-realm-with-a-principal-transformer": {
        "title": "Configuring an aggregate-realm with a principal-transformer",
        "author": "aabdelsa",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/aabdelsa/blog/2019/09/06/configuring-an-aggregate-realm-with-a-principal-transformer
          "
      }
      ,
    
      "blog-support-for-masked-passwords-in-the-client-xml-configuration": {
        "title": "Support for masked passwords in the client XML configuration",
        "author": "aabdelsa",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/aabdelsa/blog/2019/09/05/support-for-masked-passwords-in-the-client-xml-configuration
          "
      }
      ,
    
      "blog-new-security-features-in-wildfly-18": {
        "title": "New Security Features in WildFly 18",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/09/05/new-security-features-in-wildfly-18
          "
      }
      ,
    
      "blog-automatic-updates-of-credential-stores": {
        "title": "Upcoming support for automatic updates of credential stores",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/09/05/automatic-updates-of-credential-stores
          "
      }
      ,
    
      "blog-enhanced-audit-logging-in-wildfly": {
        "title": "Enhanced Audit Logging - Additional RFC Support and Reliability vs Speed Customization Update",
        "author": "jucook",
        "category": "",
        "content": "",
        "url": "
          
            https://justinwildfly.blogspot.com/2019/08/enhanced-audit-logging-in-wildfly.html
          "
      }
      ,
    
      "blog-wildfly-elytron-credential-store-apis": {
        "title": "WildFly Elytron Credential Store APIs",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2019/06/wildfly-elytron-credential-store-apis.html
          "
      }
      ,
    
      "blog-using-elytron-certificate-based-authentication-with-authorization": {
        "title": "Using Elytron certificate-based authentication with authorization",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/06/14/using-elytron-certificate-based-authentication-with-authorization
          "
      }
      ,
    
      "blog-wildfly-elytron-aggregation-of": {
        "title": "WildFly Elytron Aggregation of Attributes",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2019/06/wildfly-elytron-aggregation-of.html
          "
      }
      ,
    
      "blog-security-features-for-wildfly-18": {
        "title": "Security Features for WildFly 18",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/06/12/security-features-for-wildfly-18
          "
      }
      ,
    
      "blog-security-feature-development-for": {
        "title": "Security Feature Development for WildFly 17",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2019/06/security-feature-development-for.html
          "
      }
      ,
    
      "blog-web-services-client-and-resteasy-client-integration-with-wildfly-elytron": {
        "title": "Web Services client and RESTEasy client integration with WildFly Elytron",
        "author": "dvilkola",
        "category": "",
        "content": "",
        "url": "
          
            https://dvilkola.wordpress.com/2019/06/11/web-services-client-and-resteasy-client-integration-with-wildfly-elytron/
          "
      }
      ,
    
      "blog-upcoming-support-for-tls-13-with-wildfly": {
        "title": "Upcoming support for TLS 1.3 with WildFly",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/06/11/upcoming-support-for-tls-13-with-wildfly
          "
      }
      ,
    
      "blog-support-for-masked-passwords-in-the-client-xml-configuration": {
        "title": "Configuring a JDBC Security Realm with BCrypt and Modular Crypt Password Mappers",
        "author": "aabdelsa",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/aabdelsa/blog/2019/06/11/configuring-a-jdbc-security-realm-with-bcrypt-and-modular-crypt-password-mappers
          "
      }
      ,
    
      "blog-obtain-and-manage-certificates-from-any-server-instance-that-implements-acme-specification-using-the-wildfly-cli": {
        "title": "Obtain and manage certificates from any server instance that implements ACME specification using the WildFly CLI",
        "author": "dvilkola",
        "category": "",
        "content": "",
        "url": "
          
            https://dvilkola.wordpress.com/2019/06/11/obtain-and-manage-certificates-from-any-server-instance-that-implements-acme-specification-using-the-wildfly-cli/
          "
      }
      ,
    
      "blog-mapping-an-x509-cert-to-an-identity-using-a-subject-alt-name": {
        "title": "Mapping an X.509 certificate chain to an identity using a subject alternative name",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/06/11/mapping-an-x509-cert-to-an-identity-using-a-subject-alt-name
          "
      }
      ,
    
      "blog-enhanced-audit-logging-in-wildfly": {
        "title": "Enhanced Audit Logging in WildFly Elytron - RFC Support and Reliabiliity/Speed Customization",
        "author": "jucook",
        "category": "",
        "content": "",
        "url": "
          
            https://justinwildfly.blogspot.com/2019/06/enhanced-audit-logging-in-wildfly.html
          "
      }
      ,
    
      "blog-security-features-for-wildfly-17": {
        "title": "Security Features for WildFly 17",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2019/03/security-features-for-wildfly-17.html
          "
      }
      ,
    
      "blog-whats-new-in-elytron-in-wildfly16": {
        "title": "What's new in Elytron in WildFly 16",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/02/28/whats-new-in-elytron-in-wildfly-16
          "
      }
      ,
    
      "blog-http-basic-authentication-in-silent-mode-with-wildfly-elytron": {
        "title": "HTTP Basic Authentication in silent mode with Wildfly Elytron",
        "author": "dvilkola",
        "category": "",
        "content": "",
        "url": "
          
            https://dvilkola.wordpress.com/2019/02/28/http-basic-authentication-in-silent-mode-with-wildfly-elytron/
          "
      }
      ,
    
      "blog-converting-legacy-properties-files-into": {
        "title": "Converting Legacy Properties Files into a FileSystemRealm with Elytron Tool",
        "author": "jucook",
        "category": "",
        "content": "",
        "url": "
          
            https://justinwildfly.blogspot.com/2019/02/converting-legacy-propeties-files-into.html
          "
      }
      ,
    
      "blog-implementing-a-custom-elytron-principal-transformer": {
        "title": "Implementing a custom Elytron principal transformer",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/02/25/implementing-a-custom-elytron-principal-transformer
          "
      }
      ,
    
      "blog-building-web-app-with-authorization-and-account-management-using-elytron-part-2": {
        "title": "Building web app with authorization and account management using Elytron (Part 2)",
        "author": "dvilkola",
        "category": "",
        "content": "",
        "url": "
          
            https://dvilkola.wordpress.com/2019/02/25/building-web-app-with-authorization-and-account-management-using-elytron-part-2/
          "
      }
      ,
    
      "blog-building-a-web-app-with-authorization-and-account-management-using-elytron": {
        "title": "Building a web app with authorization and account management using Elytron (Part 1)",
        "author": "dvilkola",
        "category": "",
        "content": "",
        "url": "
          
            https://dvilkola.wordpress.com/2019/02/25/building-a-web-app-with-authorization-and-account-management-using-elytron/
          "
      }
      ,
    
      "blog-using-wildfly-elytron-with-netty": {
        "title": "Using WildFly Elytron with the Netty HttpServerCodec",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2019/01/using-wildfly-elytron-with-netty.html
          "
      }
      ,
    
      "blog-securing-an-embedded-jetty-server-using-elytron": {
        "title": "Securing an embedded Jetty server using Elytron",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2019/01/07/securing-an-embedded-jetty-server-using-elytron
          "
      }
      ,
    
      "blog-dynamically-generating-keystores": {
        "title": "Dynamically Generating KeyStores, TrustStores, and Certificates with WildFly Elytron",
        "author": "jucook",
        "category": "",
        "content": "",
        "url": "
          
            https://justinwildfly.blogspot.com/2018/11/dynamically-generating-keystores.html
          "
      }
      ,
    
      "blog-using-wildfly-elytron-jaspi-with": {
        "title": "Using WildFly Elytron JASPI with Standalone Undertow",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2018/10/using-wildfly-elytron-jaspi-with.html
          "
      }
      ,
    
      "blog-wildfly-elytron-credential-store-next": {
        "title": "WildFly Elytron - Credential Store - Next Steps",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2018/09/wildfly-elytron-credential-store-next.html
          "
      }
      ,
    
      "blog-reinitializing-trust-manager-through": {
        "title": "Reinitializing a Trust Manager through a Two-Way SSL",
        "author": "jucook",
        "category": "",
        "content": "",
        "url": "
          
            https://justinwildfly.blogspot.com/2018/08/reinitializing-trust-manager-through.html
          "
      }
      ,
    
      "blog-obtaining-certificates-from-lets-encrypt-using-the-wildfly-cli": {
        "title": "Obtaining and managing certificates from Let’s Encrypt using the WildFly CLI",
        "author": "fjuma",
        "category": "",
        "content": "It is possible to obtain and manage certificates from the Let&#8217;s Encrypt certificate authority using the WildFly CLI.In particular, it is possible to get a certificate from Let&#8217;s Encrypt, revoke it if necessary, and check if it’s due for renewal.This blog post is going to give an overview of these new operations.Obtaining a certificate from Let&#8217;s EncryptUsing the security commandUsing Elytron subsystem commandsRevoking a certificate from Let&#8217;s EncryptChecking if a certificate is due for renewalUsing a CLI script to automate certificate renewalUpdating the contact URLs associated with your Let&#8217;s Encrypt accountChanging your Let&#8217;s Encrypt account keyDeactivating your Let&#8217;s Encrypt accountSummaryObtaining a certificate from Let&#8217;s EncryptFirst, make sure your WildFly server instance is publicly accessible using the domain name(s) you will be obtaininga certificate for from Let&#8217;s Encrypt. For example, if you are requesting a certificate for the domain name\"www.example.org\", then \"www.example.org\" needs to be publicly accessible. This is because Let&#8217;s Encrypt will attemptto access this URL when attempting to validate that you really do own this domain name. WildFly itself will handleproving that you really do own this domain name.There are a couple ways to obtain a certificate from Let&#8217;s Encrypt using WildFly CLI commands.Using the security commandThe simplest way to obtain and make use of a certificate from Let&#8217;s Encrypt is by using one of the securitywrapper commands as follows:security enable-ssl-http-server --interactive --lets-encryptsecurity enable-ssl-management --interactive --lets-encryptThese commands allow you to easily enable either one-way or two-way SSL for applications or managementinterfaces, respectively, using a certificate that will be obtained automatically from Let&#8217;s Encrypt.Let&#8217;s take a look at the security enable-ssl-http-server --interactive --lets-encrypt command:[standalone@localhost:9990 /] security enable-ssl-http-server --interactive --lets-encryptPlease provide required pieces of information to enable SSL:Let's Encrypt account key-store:File name (default accounts.keystore.jks):Password (blank generated):Let's Encrypt certificate authority account:Account name (default CertAuthorityAccount):Contact email(s) [admin@example.com,info@example.com]:Password (blank generated):Alias (blank generated):Certificate authority URL (default https://acme-v02.api.letsencrypt.org/directory):Let's Encrypt TOS (https://community.letsencrypt.org/tos)Do you agree to Let's Encrypt terms of service? y/n:yCertificate info:Key-store file name (default default-server.keystore):Password (blank generated):Your domain name(s) (must be accessible by the Let's Encrypt server at 80 &amp; 443 ports) [example.com,second.example.com]: www.example.orgAlias (blank generated):Enable SSL Mutual Authentication y/n (blank n):Let's Encrypt options:account key store name: account-key-store-b1f62709-d679-4e19-acf4-f5d286d481b8password: OAaMa6aIaccount keystore file accounts.keystore.jks will be generated in server configuration directory.Let's Encrypt certificate authority account name: CertAuthorityAccountcontact urls: []password: lSgY0ZoSalias: account-key-store-alias-b1f62709-d679-4e19-acf4-f5d286d481b8certificate authority URL: https://acme-v02.api.letsencrypt.org/directoryYou provided agreement to Let's Encrypt terms of service.SSL options:key store file: default-server.keystoredomain name: [www.mydomainname.com]password: iuApeaDHvalidity: 90alias: alias-b1f62709-d679-4e19-acf4-f5d286d481b8Certificate will be obtained from Let's Encrypt server and will be valid for 90 days.Server keystore file will be generated in server configuration directory.Do you confirm y/n :yAs we can see from the output, this command will first prompt you to specify the information neededto configure your Let&#8217;s Encrypt account. It will then ask for information related to the certificatethat you would like to obtain from Let&#8217;s Encrypt. This command will then automatically create your Let&#8217;sEncrypt account (if it doesn&#8217;t already exist), it will obtain a certificate from Let&#8217;s Encryptusing the domain name that you specified, and it will configure one-way SSL using this certificate.Using Elytron subsystem commandsIt is also possible to obtain a certificate from Let&#8217;s Encrypt using Elytron subsystem commandsdirectly.Prerequisite configurationFirst, configure a key-store in the Elytron subsystem that will be used to hold your server certificates.Note that the path to the keystore file doesn&#8217;t need to exist yet./subsystem=elytron/key-store=serverKS:add(path=server.keystore.jks, relative-to=jboss.server.config.dir, credential-reference={clear-text=secret}, type=JKS)Show me the commands firstObtaining certificates from Let&#8217;s Encrypt using Elytron subsystem commands requires a couple one-timeconfiguration steps. These commands are shown below. We&#8217;re going to go through each of these commands in more detail in the following sections.### One-time configuration# Configure a Let’s Encrypt account/subsystem=elytron/key-store=accountsKS:add(path=accounts.keystore.jks,relative-to=jboss.server.config.dir,credential-reference={clear-text=secret},type=JKS)/subsystem=elytron/certificate-authority-account=myLetsEncryptAccount:add(alias=letsEncrypt,key-store=accountsKS,contact-urls=[mailto:admin@admin.org])### Now you’re ready to start obtaining and managing certificates# Obtain a certificate from Let’s Encrypt/subsystem=elytron/key-store=serverKS:obtain-certificate(alias=server,domain-names=[www.example.org],certificate-authority-account=myLetsEncryptAccount,agree-to-terms-of-service)# Revoke a certificate that was issued by Let’s Encrypt/subsystem=elytron/key-store=serverKS:revoke-certificate(alias=server,reason=keyCompromise,certificate-authority-account=myLetsEncryptAccount)# Check if a certificate is due for renewal in less than 30 days/subsystem=elytron/key-store=serverKS:should-renew-certificate(alias=server)Configuring a Let’s Encrypt accountBefore obtaining your first certificate from Let&#8217;s Encrypt, a Let&#8217;s Encrypt account needs to be configured.First, configure a key-store in the Elytron subsystem that will be used to hold your Let&#8217;s Encrypt account key.The path to the keystore file doesn’t need to exist yet./subsystem=elytron/key-store=accountsKS:add(path=accounts.keystore.jks,relative-to=jboss.server.config.dir,credential-reference={clear-text=secret},type=JKS)Now we can configure a Let&#8217;s Encrypt account that we will reference when obtaining certificates:/subsystem=elytron/certificate-authority-account=myLetsEncryptAccount:add(alias=letsEncrypt,key-store=accountsKS,contact-urls=[mailto:admin@admin.org])The above command results in the following configuration in the Elytron subsystem:&lt;subsystem xmlns=\"urn:wildfly:elytron:4.0\" final-providers=\"combined-providers\" disallowed-providers=\"OracleUcrypto\"&gt;...    &lt;tls&gt;    ...        &lt;certificate-authority-accounts&gt;            &lt;certificate-authority-account name=\"myLetsEncryptAccount\" contact-urls=\"mailto:admin@admin.org\"&gt;                &lt;account-key key-store=\"accountsKS\" alias=\"letsEncrypt\"/&gt;            &lt;/certificate-authority-account&gt;        &lt;/certificate-authority-accounts&gt;    ...    &lt;/tls&gt;...&lt;/subsystem&gt;Notice that a certificate-authority-account has the following attributes and element:name - The name of the certificate authority account.contact-urls - An optional list of contact URLs that Let&#8217;s Encrypt can use to notify you about any issues with your account.account-key - Information about the account key that will be used when communicating with Let&#8217;s Encrypt.key-store - A reference to the Elytron key-store that will hold your Let&#8217;s Encrypt account key.alias - The alias in the referenced key-store that will contain your Let&#8217;s Encrypt account key.Obtaining a certificate from Let&#8217;s EncryptTo obtain a certificate from Let&#8217;s Encrypt, the key-store obtain-certificate command can be used. Its syntax is as follows:obtain-certificate --alias= --domain-names= --certificate-authority-account= [--agree-to-terms-of-service=&lt;true,false&gt;] [--staging=&lt;true,false&gt;] [--algorithm=] [--key-size=] [--credential-reference=]Let&#8217;s take a closer look at the obtain-certificate operation&#8217;s parameters:alias - The alias in the key-store that will be used to store the certificate obtained from Let&#8217;s Encrypt.domain-names - The list of domain names to request a certificate for.certificate-authority-account - A reference to the certificate authority account information that should be used to obtain the certificate.agree-to-terms-of-service - Whether or not you agree to Let&#8217;s Encrypt&#8217;s terms of service (this only needs to be specified the first time you obtain a certificate from Let&#8217;s Encrypt with your certificate-authority-account).staging - Optional. Indicates whether or not Let&#8217;s Encrypt&#8217;s staging environment should be used to obtain the certificate. The default value is false. This should only be set to true for testing purposes. This should never be set to true in a production environment.algorithm - Optional. Indicates the key algorithm that should be used (RSA or EC). The default value is RSA.key-size - Optional. Indicates the key size that should be used. The default value is 2048.credential-reference - Optional. The credential-reference that should be used to protect the generated private key. The default value is the key-store password.The obtain-certificate command will use the referenced certificate-authority-account to create an account withLet&#8217;s Encrypt if one does not already exist. It will then request a certificate from Let&#8217;s Encrypt for the specified domain-names.In particular, the obtain-certificate operation will prove ownership of the requested domain names, generate a key pair,generate a certificate signing request (CSR) using the generated key pair and the requested domain names, and submit thisCSR to Let&#8217;s Encrypt. If successful, the obtain-certificate operation will retrieve the resultingcertificate chain from Let&#8217;s Encrypt and store it along with the generated PrivateKey under the given alias in the key-store.These changes will also be persisted to the file that backs the key-store.For example, to request a certificate from Let&#8217;s Encrypt for the domain name \"www.example.org\" using the \"myLetsEncryptAccount\"certificate-authority-account, the following command could be used. The resulting certificate will be stored in the file that backsthe \"serverKS\" key-store under the alias \"server\"./subsystem=elytron/key-store=serverKS:obtain-certificate(alias=server,domain-names=[www.example.org],certificate-authority-account=myLetsEncryptAccount,agree-to-terms-of-service)You can now check the alias names in the key-store and confirm the new alias, \"server\", is listed:/subsystem=elytron/key-store=serverKS:read-aliases(){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; [\"server\"]}To make use of this server certificate that&#8217;s been issued by Let&#8217;s Encrypt for one-way or two-way SSL, this server key-storecan be used to create a key-manager in the Elytron subsystem and an ssl-context that references this key-manager canthen be created. More details about setting up one-way and two-way SSL can be found in the Elytron documentation.Now that we&#8217;ve seen the two main ways that certificates can be obtained from Let&#8217;s Encrypt using WildFly CLI commands, thenext sections will describe how to manage these certificates.Revoking a certificate from Let&#8217;s EncryptIf you need to revoke a certificate that was issued by Let&#8217;s Encrypt, the revoke-certificate command can be used:/subsystem=elytron/key-store=serverKS:revoke-certificate(alias=server,reason=keyCompromise,certificate-authority-account=myLetsEncryptAccount)In the above example, alias identifies the certificate that should be revoked. The certificate-authority-account is areference to the certificate authority account information that should be used to revoke the certificate. The reason isoptional and indicates the reason for revocation. If provided, it must be a valid revocation string.Once the certificate has been successfully revoked, it will be deleted from the key-store. This change will also bepersisted to the file that backs the key-store.Checking if a certificate is due for renewalThe should-renew-certificate command can be used to check if a certificate is due for renewal. It returns true if thecertificate expires in less than the given number of days and false otherwise. Its output also indicates the number ofdays to expiry. In the following example, should-renew-certificate checks if the certificate stored under the alias\"server\" expires in less than 15 days./subsystem=elytron/key-store=serverKS:should-renew-certificate(alias=server,expiration=15){    \"outcome\" =&gt; \"success\",    \"result\" =&gt; {        \"should-renew-certificate\" =&gt; false,        \"days-to-expiry\" =&gt; 89L    }}If the expiration parameter is not provided, it will default to 30 days, i.e., should-renew-certificate will returntrue if the certificate expires in less than 30 days and false otherwise.Using a CLI script to automate certificate renewalCertificates issued by Let&#8217;s Encrypt are valid for 90 days. Let&#8217;s Encrypt recommends renewing certificates every 60 days.You can automate renewal by first creating a CLI script that checks if a certificate is due for renewal and if so, usesthe obtain-certificate command to renew it. You could then create a cron job that runs say, twice daily, and executesthe CLI script. A simple example of such a CLI script can be found below:if (result.should-renew-certificate == true) of /subsystem=elytron/key-store=serverKS:should-renew-certificate(alias=server)    # certificate is due for renewal in less than 30 days, obtain a new certificate to replace the existing one in the key-store    /subsystem=elytron/key-store=serverKS:obtain-certificate(alias=server,domain-names=[www.example.org],certificate-authority-account=myLetsEncryptAccount,agree-to-terms-of-service)    # re-initialize your key-manager to ensure your new certificate will be used without needing to restart the server    /subsystem=elytron/key-manager=httpsKM:init()end-ifNotice that in the above script, after renewing the certificate, we can simply execute the key-manager init command inorder to ensure that the new certificate will be used by the key-manager from now on without needing to restart WildFly.Updating the contact URLs associated with your Let&#8217;s Encrypt accountTo update the contact URLs that are associated with your Let&#8217;s Encrypt, the following commands can be used:/subsystem=elytron/certificate-authority-account=myLetsEncryptAccount:write-attribute(name=contact-urls,value=[mailto:newadmin@admin.org])reload/subsystem=elytron/certificate-authority-account=myLetsEncryptAccount:update-account()Changing your Let&#8217;s Encrypt account keyIf you ever want to change the key that is associated with your Let&#8217;s Encrypt account (e.g., in the event of a keycompromise), the change-account-key command can be used:/subsystem=elytron/certificate-authority-account=myLetsEncryptAccount:change-account-key()Deactivating your Let&#8217;s Encrypt accountIf you ever need to deactivate your Let&#8217;s Encrypt account, the deactivate-account command can be used:/subsystem=elytron/certificate-authority-account=myLetsEncryptAccount:deactivate-account()SummaryThis blog post has given an overview on how to obtain and manage certificates from the Let&#8217;s Encrypt certificate authority using the WildFly CLI.",
        "url": "
          
            /blog/obtaining-certificates-from-lets-encrypt-using-the-wildfly-cli/
          "
      }
      ,
    
      "blog-custom-realm": {
        "title": "Creating custom security realm for WildFly Elytron",
        "author": "hkalina",
        "category": "",
        "content": "",
        "url": "
          
            https://hkalina.github.io/2018/06/06/custom-realm/
          "
      }
      ,
    
      "blog-configuring-permissions-using-elytron-in-wildfly-13": {
        "title": "Configuring permissions using Elytron in WildFly 13",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2018/06/01/configuring-permissions-using-elytron-in-wildfly-13
          "
      }
      ,
    
      "blog-cert-basic": {
        "title": "Certificate authentication with password fallback in Elytron",
        "author": "hkalina",
        "category": "",
        "content": "",
        "url": "
          
            https://hkalina.github.io/2018/05/30/cert-basic/
          "
      }
      ,
    
      "blog-manipulating-keystores-using-the-cli-in-wildfly-12": {
        "title": "Manipulating KeyStores using the CLI in WildFly 12",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2018/03/02/manipulating-keystores-using-the-cli-in-wildfly-12
          "
      }
      ,
    
      "blog-wildfly-elytron-implementing-custom": {
        "title": "WildFly Elytron - Implementing a Custom HTTP Authentication Mechanism",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2018/02/wildfly-elytron-implementing-custom.html
          "
      }
      ,
    
      "blog-filesystem-realm": {
        "title": "Filesystem realm in WildFly Elytron",
        "author": "hkalina",
        "category": "",
        "content": "",
        "url": "
          
            https://hkalina.github.io/2018/01/24/filesystem-realm/
          "
      }
      ,
    
      "blog-kerberos": {
        "title": "Configuration of Kerberos with Elytron in WildFly",
        "author": "hkalina",
        "category": "",
        "content": "",
        "url": "
          
            https://hkalina.github.io/2018/01/02/kerberos/
          "
      }
      ,
    
      "blog-gssproxy": {
        "title": "Elytron and Kerberos using gssproxy",
        "author": "hkalina",
        "category": "",
        "content": "",
        "url": "
          
            https://hkalina.github.io/2018/01/02/gssproxy/
          "
      }
      ,
    
      "blog-keystore-reload": {
        "title": "SSL key switch without server restart",
        "author": "hkalina",
        "category": "",
        "content": "",
        "url": "
          
            https://hkalina.github.io/2017/10/13/keystore-reload/
          "
      }
      ,
    
      "blog-openssl-support-in-wildfly": {
        "title": "OpenSSL support with WildFly",
        "author": "stuartwdouglas",
        "category": "",
        "content": "",
        "url": "
          
            https://wildfly.org/news/2017/10/06/OpenSSL-Support-In-Wildfly/
          "
      }
      ,
    
      "blog-how-to-use-an-elytron-sasl-plus-mechanism": {
        "title": "How to use an Elytron SASL mechanism that supports channel binding",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2017/09/28/how-to-use-an-elytron-sasl-plus-mechanism
          "
      }
      ,
    
      "blog-wildfly-elytron-add-kerberos": {
        "title": "WildFly Elytron - Add Kerberos Authentication To Existing Web Application",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2017/09/wildfly-elytron-add-kerberos.html
          "
      }
      ,
    
      "blog-using-wildfly-elytron-with-undertow": {
        "title": "Using WildFly Elytron with Undertow Standalone",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2017/09/using-wildfly-elytron-with-undertow.html
          "
      }
      ,
    
      "blog-getting-started-with-ejbs-and-elytron-part-2": {
        "title": "Getting started with EJBs and Elytron Part 2: EJB invocations from remote servers",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2017/09/08/getting-started-with-ejbs-and-elytron-part-2
          "
      }
      ,
    
      "blog-getting-started-with-ejbs-and-elytron-part-1": {
        "title": "Getting started with EJBs and Elytron Part 1: Securing EJBs and invoking them from remote clients",
        "author": "fjuma",
        "category": "",
        "content": "",
        "url": "
          
            https://developer.jboss.org/people/fjuma/blog/2017/09/08/getting-started-with-ejbs-and-elytron-part-1
          "
      }
      ,
    
      "blog-wildfly-elytron-principal-transformers": {
        "title": "WildFly Elytron - Principal Transformers, Realm Mappings, and Principal Decoders",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2017/07/wildfly-elytron-principal-transformers.html
          "
      }
      ,
    
      "blog-wildfly-elytron-ssl-configuration": {
        "title": "WildFly Elytron - SSL Configuration",
        "author": "darranl",
        "category": "",
        "content": "",
        "url": "
          
            https://darranl.blogspot.com/2016/02/wildfly-elytron-ssl-configuration.html
          "
      }
      
    
  };
</script>
<script src="https://unpkg.com/lunr/lunr.js"></script>
<script src="/wildfly-elytron/js/search.js"></script>
            </div>
        </div>
    </main>
</div>
</body>
</html>
